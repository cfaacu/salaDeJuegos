import{$ as pn,A as gr,B as Kl,C as Ql,D as Po,E as Lt,F as _r,G as yt,H as Do,I as Jl,J as ye,K,L as No,M as yr,N as vt,O as hn,P as Yl,Q as tt,R as ko,S as V,T as x,U as fe,V as Xl,W as je,X as Ut,Y as F,Z as dn,_ as fn,a as Se,aa as mn,b as Ne,ba as vr,c as _t,ca as Ge,d as _,da as Vo,e as wo,ea as Zl,f as Bl,fa as eh,g as ql,ga as th,h as jl,ha as nh,i as To,ia as xo,j as Ao,ja as Ir,k as bo,ka as It,l as Gl,la as Oo,m as $l,ma as gn,n as zl,na as rh,o as Wl,oa as ih,p as Ti,pa as sh,q as mr,qa as Ai,r as So,ra as bi,s as Co,sa as oh,t as ke,ta as Si,u as Hl,ua as ah,v as Ve,w as qe,x as Ro,y as Me,z as ln}from"./chunk-KYBULPUC.js";var uh=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},hm=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],c=n[t++],l=n[t++],h=((i&7)<<18|(o&63)<<12|(c&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{let o=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},lh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],c=i+1<n.length,l=c?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,v=o>>2,b=(o&3)<<4|l>>4,S=(l&15)<<2|f>>6,D=f&63;h||(D=64,c||(S=64)),r.push(t[v],t[b],t[S],t[D])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uh(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hm(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;let f=i<n.length?t[n.charAt(i)]:64;++i;let b=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||l==null||f==null||b==null)throw new Fo;let S=o<<2|l>>4;if(r.push(S),f!==64){let D=l<<4&240|f>>2;if(r.push(D),b!==64){let N=f<<6&192|b;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Fo=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dm=function(n){let e=uh(n);return lh.encodeByteArray(e,!0)},Er=function(n){return dm(n).replace(/\./g,"")},Uo=function(n){try{return lh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var pm=()=>fm().__FIREBASE_DEFAULTS__,mm=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},gm=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Uo(n[1]);return e&&JSON.parse(e)},Ri=()=>{try{return pm()||mm()||gm()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Bo=n=>{var e,t;return(t=(e=Ri())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},hh=n=>{let e=Bo(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},qo=()=>{var n;return(n=Ri())===null||n===void 0?void 0:n.config},jo=n=>{var e;return(e=Ri())===null||e===void 0?void 0:e[`_${n}`]};var Ci=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function dh(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Er(JSON.stringify(t)),Er(JSON.stringify(c)),""].join(".")}function ue(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ue())}function _m(){var n;let e=(n=Ri())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ph(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function mh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gh(){let n=ue();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function _h(){return!_m()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Go(){try{return typeof indexedDB=="object"}catch{return!1}}function yh(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var ym="FirebaseError",Re=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ym,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nt.prototype.create)}},nt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?vm(o,r):"Error",l=`${this.serviceName}: ${c} (${i}).`;return new Re(i,l,r)}};function vm(n,e){return n.replace(Im,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Im=/\{\$([^}]+)}/g;function vh(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],c=e[i];if(ch(o)&&ch(c)){if(!Bt(o,c))return!1}else if(o!==c)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function ch(n){return n!==null&&typeof n=="object"}function wr(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _n(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function yn(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Ih(n,e){let t=new Lo(n,e);return t.subscribe.bind(t)}var Lo=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Em(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Mo),i.error===void 0&&(i.error=Mo),i.complete===void 0&&(i.complete=Mo);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Em(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Mo(){}var CE=4*60*60*1e3;function Ae(n){return n&&n._delegate?n._delegate:n}var xe=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var qt="[DEFAULT]";var $o=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ci;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Tm(e))try{this.getOrInitializeService({instanceIdentifier:qt})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=qt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=qt){return this.instances.has(e)}getOptions(e=qt){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,c]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(o);r===l&&c.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wm(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qt){return this.component?this.component.multipleInstances?e:qt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function wm(n){return n===qt?void 0:n}function Tm(n){return n.instantiationMode==="EAGER"}var Pi=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new $o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Am=[],q=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(q||{}),bm={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},Sm=q.INFO,Cm={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},Rm=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Cm[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Et=class{constructor(e){this.name=e,this._logLevel=Sm,this._logHandler=Rm,this._userLogHandler=null,Am.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bm[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...e),this._logHandler(this,q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...e),this._logHandler(this,q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,q.INFO,...e),this._logHandler(this,q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,q.WARN,...e),this._logHandler(this,q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...e),this._logHandler(this,q.ERROR,...e)}};var Pm=(n,e)=>e.some(t=>n instanceof t),Eh,wh;function Dm(){return Eh||(Eh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nm(){return wh||(wh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Th=new WeakMap,Wo=new WeakMap,Ah=new WeakMap,zo=new WeakMap,Ko=new WeakMap;function km(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t($e(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Th.set(t,n)}).catch(()=>{}),Ko.set(e,n),e}function Vm(n){if(Wo.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Wo.set(n,e)}var Ho={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Wo.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ah.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $e(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bh(n){Ho=n(Ho)}function xm(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Di(this),e,...t);return Ah.set(r,e.sort?e.sort():[e]),$e(r)}:Nm().includes(n)?function(...e){return n.apply(Di(this),e),$e(Th.get(this))}:function(...e){return $e(n.apply(Di(this),e))}}function Om(n){return typeof n=="function"?xm(n):(n instanceof IDBTransaction&&Vm(n),Pm(n,Dm())?new Proxy(n,Ho):n)}function $e(n){if(n instanceof IDBRequest)return km(n);if(zo.has(n))return zo.get(n);let e=Om(n);return e!==n&&(zo.set(n,e),Ko.set(e,n)),e}var Di=n=>Ko.get(n);function Ch(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let c=indexedDB.open(n,e),l=$e(c);return r&&c.addEventListener("upgradeneeded",h=>{r($e(c.result),h.oldVersion,h.newVersion,$e(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),l.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}var Mm=["get","getKey","getAll","getAllKeys","count"],Fm=["put","add","delete","clear"],Qo=new Map;function Sh(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qo.get(e))return Qo.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Fm.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Mm.includes(t)))return;let o=function(c,...l){return _(this,null,function*(){let h=this.transaction(c,i?"readwrite":"readonly"),f=h.store;return r&&(f=f.index(l.shift())),(yield Promise.all([f[t](...l),i&&h.done]))[0]})};return Qo.set(e,o),o}bh(n=>Ne(Se({},n),{get:(e,t,r)=>Sh(e,t)||n.get(e,t,r),has:(e,t)=>!!Sh(e,t)||n.has(e,t)}));var Yo=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Lm(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Lm(n){let e=n.getComponent();return e?.type==="VERSION"}var Xo="@firebase/app",Rh="0.10.10";var rt=new Et("@firebase/app"),Um="@firebase/app-compat",Bm="@firebase/analytics-compat",qm="@firebase/analytics",jm="@firebase/app-check-compat",Gm="@firebase/app-check",$m="@firebase/auth",zm="@firebase/auth-compat",Wm="@firebase/database",Hm="@firebase/database-compat",Km="@firebase/functions",Qm="@firebase/functions-compat",Jm="@firebase/installations",Ym="@firebase/installations-compat",Xm="@firebase/messaging",Zm="@firebase/messaging-compat",eg="@firebase/performance",tg="@firebase/performance-compat",ng="@firebase/remote-config",rg="@firebase/remote-config-compat",ig="@firebase/storage",sg="@firebase/storage-compat",og="@firebase/firestore",ag="@firebase/vertexai-preview",cg="@firebase/firestore-compat",ug="firebase",lg="10.13.1";var Zo="[DEFAULT]",hg={[Xo]:"fire-core",[Um]:"fire-core-compat",[qm]:"fire-analytics",[Bm]:"fire-analytics-compat",[Gm]:"fire-app-check",[jm]:"fire-app-check-compat",[$m]:"fire-auth",[zm]:"fire-auth-compat",[Wm]:"fire-rtdb",[Hm]:"fire-rtdb-compat",[Km]:"fire-fn",[Qm]:"fire-fn-compat",[Jm]:"fire-iid",[Ym]:"fire-iid-compat",[Xm]:"fire-fcm",[Zm]:"fire-fcm-compat",[eg]:"fire-perf",[tg]:"fire-perf-compat",[ng]:"fire-rc",[rg]:"fire-rc-compat",[ig]:"fire-gcs",[sg]:"fire-gcs-compat",[og]:"fire-fst",[cg]:"fire-fst-compat",[ag]:"fire-vertex","fire-js":"fire-js",[ug]:"fire-js-all"};var Tr=new Map,dg=new Map,ea=new Map;function Ph(n,e){try{n.container.addComponent(e)}catch(t){rt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tt(n){let e=n.name;if(ea.has(e))return rt.debug(`There were multiple attempts to register component ${e}.`),!1;ea.set(e,n);for(let t of Tr.values())Ph(t,n);for(let t of dg.values())Ph(t,n);return!0}function br(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Fe(n){return n.settings!==void 0}var fg={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wt=new nt("app","Firebase",fg);var ta=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wt.create("app-deleted",{appName:this._name})}};var At=lg;function ia(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Zo,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw wt.create("bad-app-name",{appName:String(i)});if(t||(t=qo()),!t)throw wt.create("no-options");let o=Tr.get(i);if(o){if(Bt(t,o.options)&&Bt(r,o.config))return o;throw wt.create("duplicate-app",{appName:i})}let c=new Pi(i);for(let h of ea.values())c.addComponent(h);let l=new ta(t,r,c);return Tr.set(i,l),l}function vn(n=Zo){let e=Tr.get(n);if(!e&&n===Zo&&qo())return ia();if(!e)throw wt.create("no-app",{appName:n});return e}function Ni(){return Array.from(Tr.values())}function oe(n,e,t){var r;let i=(r=hg[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){let l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&l.push("and"),c&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rt.warn(l.join(" "));return}Tt(new xe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var pg="firebase-heartbeat-database",mg=1,Ar="firebase-heartbeat-store",Jo=null;function Vh(){return Jo||(Jo=Ch(pg,mg,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ar)}catch(t){console.warn(t)}}}}).catch(n=>{throw wt.create("idb-open",{originalErrorMessage:n.message})})),Jo}function gg(n){return _(this,null,function*(){try{let t=(yield Vh()).transaction(Ar),r=yield t.objectStore(Ar).get(xh(n));return yield t.done,r}catch(e){if(e instanceof Re)rt.warn(e.message);else{let t=wt.create("idb-get",{originalErrorMessage:e?.message});rt.warn(t.message)}}})}function Dh(n,e){return _(this,null,function*(){try{let r=(yield Vh()).transaction(Ar,"readwrite");yield r.objectStore(Ar).put(e,xh(n)),yield r.done}catch(t){if(t instanceof Re)rt.warn(t.message);else{let r=wt.create("idb-set",{originalErrorMessage:t?.message});rt.warn(r.message)}}})}function xh(n){return`${n.name}!${n.options.appId}`}var _g=1024,yg=30*24*60*60*1e3,na=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ra(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Nh();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{let l=new Date(c.date).valueOf();return Date.now()-l<=yg}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rt.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Nh(),{heartbeatsToSend:r,unsentEntries:i}=vg(this._heartbeatsCache.heartbeats),o=Er(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return rt.warn(t),""}})}};function Nh(){return new Date().toISOString().substring(0,10)}function vg(n,e=_g){let t=[],r=n.slice();for(let i of n){let o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),kh(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),kh(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ra=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Go()?yh().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield gg(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Dh(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Dh(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function kh(n){return Er(JSON.stringify({version:2,heartbeats:n})).length}function Ig(n){Tt(new xe("platform-logger",e=>new Yo(e),"PRIVATE")),Tt(new xe("heartbeat",e=>new na(e),"PRIVATE")),oe(Xo,Rh,n),oe(Xo,Rh,"esm2017"),oe("fire-js","")}Ig("");var Eg="firebase",wg="10.13.1";oe(Eg,wg,"app");var Gt=new Vo("ANGULARFIRE2_VERSION");function Vi(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(c=>c.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Sr=(n,e)=>{let t=e?[e]:Ni(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r},En=class{constructor(){return Sr(Tg)}},Tg="app-check";function In(){}var ki=class{zone;delegate;constructor(e,t=jl){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(c){i.runGuarded(()=>{e.apply(this,[c])})};return this.delegate.schedule(o,t,r)}},sa=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",In,{},In,In)),t.pipe(Wl({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Tn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ki(Zone.current)),this.insideAngular=t.run(()=>new ki(Zone.current,ql)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Hl(yt))};static \u0275prov=So({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xi(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ag(n){return xi().ngZone.runOutsideAngular(()=>n())}function jt(n){return xi().ngZone.run(()=>n())}function bg(n){return Sg(xi())(n)}function Sg(n){return function(t){return t=t.lift(new sa(n.ngZone)),t.pipe(bo(n.outsideAngular),Ao(n.insideAngular))}}var Cg=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),jt(()=>n.apply(void 0,r))},Le=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=jt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",In,{},In,In))),r[o]=Cg(r[o],t));let i=Ag(()=>n.apply(this,r));if(!e)if(i instanceof wo){let o=xi();return i.pipe(bo(o.outsideAngular),Ao(o.insideAngular))}else return jt(()=>i);return i instanceof wo?i.pipe(bg):i instanceof Promise?jt(()=>new Promise((o,c)=>i.then(l=>jt(()=>o(l)),l=>jt(()=>c(l))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:jt(()=>i)};var it=class{constructor(e){return e}},$t=class{constructor(){return Ni()}};function Rg(n){return n&&n.length===1?n[0]:new it(vn())}var oa=new ke("angularfire2._apps"),Pg={provide:it,useFactory:Rg,deps:[[new Ve,oa]]},Dg={provide:$t,deps:[[new Ve,oa]]};function Ng(n){return(e,t)=>{let r=t.get(Jl);oe("angularfire",Gt.full,"core"),oe("angularfire",Gt.full,"app"),oe("angular",Zl.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new it(i)}}function Oh(n,...e){return ln([Pg,Dg,{provide:oa,useFactory:Ng(n),multi:!0,deps:[yt,Lt,Tn,...e]}])}var Mh=Le(ia,!0);function Zh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ed=Zh,td=new nt("auth","Firebase",Zh());var Bi=new Et("@firebase/auth");function kg(n,...e){Bi.logLevel<=q.WARN&&Bi.warn(`Auth (${At}): ${n}`,...e)}function Mi(n,...e){Bi.logLevel<=q.ERROR&&Bi.error(`Auth (${At}): ${n}`,...e)}function We(n,...e){throw Pa(n,...e)}function zt(n,...e){return Pa(n,...e)}function nd(n,e,t){let r=Object.assign(Object.assign({},ed()),{[e]:t});return new nt("auth","Firebase",r).create(e,{appName:n.name})}function at(n){return nd(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pa(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return td.create(n,...e)}function L(n,e,...t){if(!n)throw Pa(e,...t)}function st(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Mi(e),new Error(e)}function St(n,e){n||st(e)}function la(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Vg(){return Fh()==="http:"||Fh()==="https:"}function Fh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function xg(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vg()||ph()||"connection"in navigator)?navigator.onLine:!0}function Og(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Wt=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,St(t>e,"Short delay should be less than long delay!"),this.isMobile=fh()||mh()}get(){return xg()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Da(n,e){St(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var qi=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;st("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;st("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;st("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Mg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Fg=new Wt(3e4,6e4);function Ct(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Rt(o,c,l,h){return _(this,arguments,function*(n,e,t,r,i={}){return rd(n,i,()=>_(this,null,function*(){let f={},v={};r&&(e==="GET"?v=r:f={body:JSON.stringify(r)});let b=wr(Object.assign({key:n.config.apiKey},v)).slice(1),S=yield n._getAdditionalHeaders();return S["Content-Type"]="application/json",n.languageCode&&(S["X-Firebase-Locale"]=n.languageCode),qi.fetch()(id(n,n.config.apiHost,t,b),Object.assign({method:e,headers:S,referrerPolicy:"no-referrer"},f))}))})}function rd(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Mg),e);try{let i=new ha(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let c=yield o.json();if("needConfirmation"in c)throw Oi(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{let l=o.ok?c.errorMessage:c.error.message,[h,f]=l.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oi(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Oi(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw Oi(n,"user-disabled",c);let v=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw nd(n,v,f);We(n,v)}}catch(i){if(i instanceof Re)throw i;We(n,"network-request-failed",{message:String(i)})}})}function xr(o,c,l,h){return _(this,arguments,function*(n,e,t,r,i={}){let f=yield Rt(n,e,t,r,i);return"mfaPendingCredential"in f&&We(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function id(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Da(n.config,i):`${n.config.apiScheme}://${i}`}function Lg(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ha=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(zt(this.auth,"network-request-failed")),Fg.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Oi(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=zt(n,e,r);return i.customData._tokenResponse=t,i}function Lh(n){return n!==void 0&&n.enterprise!==void 0}var da=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Lg(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Ug(n,e){return _(this,null,function*(){return Rt(n,"GET","/v2/recaptchaConfig",Ct(n,e))})}function Bg(n,e){return _(this,null,function*(){return Rt(n,"POST","/v1/accounts:delete",e)})}function sd(n,e){return _(this,null,function*(){return Rt(n,"POST","/v1/accounts:lookup",e)})}function Cr(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Na(n,e=!1){return _(this,null,function*(){let t=Ae(n),r=yield t.getIdToken(e),i=ka(r);L(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,c=o?.sign_in_provider;return{claims:i,token:r,authTime:Cr(aa(i.auth_time)),issuedAtTime:Cr(aa(i.iat)),expirationTime:Cr(aa(i.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function aa(n){return Number(n)*1e3}function ka(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Mi("JWT malformed, contained fewer than 3 sections"),null;try{let i=Uo(t);return i?JSON.parse(i):(Mi("Failed to decode base64 JWT payload"),null)}catch(i){return Mi("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Uh(n){let e=ka(n);return L(e,"internal-error"),L(typeof e.exp<"u","internal-error"),L(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Pr(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Re&&qg(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function qg({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var fa=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Dr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cr(this.lastLoginAt),this.creationTime=Cr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ji(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Pr(n,sd(t,{idToken:r}));L(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?od(o.providerUserInfo):[],l=jg(n.providerData,c),h=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!l?.length,v=h?f:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Dr(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(n,b)})}function Va(n){return _(this,null,function*(){let e=Ae(n);yield ji(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function jg(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function od(n){return n.map(e=>{var{providerId:t}=e,r=To(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Gg(n,e){return _(this,null,function*(){let t=yield rd(n,{},()=>_(this,null,function*(){let r=wr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=id(n,i,"/v1/token",`key=${o}`),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",qi.fetch()(c,{method:"POST",headers:l,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function $g(n,e){return _(this,null,function*(){return Rt(n,"POST","/v2/accounts:revokeToken",Ct(n,e))})}var Rr=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){L(e.idToken,"internal-error"),L(typeof e.idToken<"u","internal-error"),L(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Uh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){L(e.length!==0,"internal-error");let t=Uh(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(L(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Gg(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new n;return r&&(L(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(L(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(L(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return st("not implemented")}};function bt(n,e){L(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var An=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=To(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fa(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Dr(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield Pr(this,this.stsTokenManager.getToken(this.auth,e));return L(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Na(this,e)}reload(){return Va(this)}_assign(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ji(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Fe(this.auth.app))return Promise.reject(at(this.auth));let e=yield this.getIdToken();return yield Pr(this,Bg(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,c,l,h,f,v;let b=(r=t.displayName)!==null&&r!==void 0?r:void 0,S=(i=t.email)!==null&&i!==void 0?i:void 0,D=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,N=(c=t.photoURL)!==null&&c!==void 0?c:void 0,U=(l=t.tenantId)!==null&&l!==void 0?l:void 0,O=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,J=(f=t.createdAt)!==null&&f!==void 0?f:void 0,H=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:Y,emailVerified:se,isAnonymous:Be,providerData:ce,stsTokenManager:E}=t;L(Y&&E,e,"internal-error");let p=Rr.fromJSON(this.name,E);L(typeof Y=="string",e,"internal-error"),bt(b,e.name),bt(S,e.name),L(typeof se=="boolean",e,"internal-error"),L(typeof Be=="boolean",e,"internal-error"),bt(D,e.name),bt(N,e.name),bt(U,e.name),bt(O,e.name),bt(J,e.name),bt(H,e.name);let g=new n({uid:Y,auth:e,email:S,emailVerified:se,displayName:b,isAnonymous:Be,photoURL:N,phoneNumber:D,tenantId:U,stsTokenManager:p,createdAt:J,lastLoginAt:H});return ce&&Array.isArray(ce)&&(g.providerData=ce.map(y=>Object.assign({},y))),O&&(g._redirectEventId=O),g}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new Rr;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ji(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];L(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?od(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!o?.length,l=new Rr;l.updateFromIdToken(r);let h=new n({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Dr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,f),h})}};var Bh=new Map;function ot(n){St(n instanceof Function,"Expected a class definition");let e=Bh.get(n);return e?(St(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Bh.set(n,e),e)}var zg=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),pa=zg;function Fi(n,e,t){return`firebase:${n}:${e}:${t}`}var Gi=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Fi(this.userKey,i.apiKey,o),this.fullPersistenceKey=Fi("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?An._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(ot(pa),e,r);let i=(yield Promise.all(t.map(f=>_(this,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=i[0]||ot(pa),c=Fi(r,e.config.apiKey,e.name),l=null;for(let f of t)try{let v=yield f._get(c);if(v){let b=An._fromJSON(e,v);f!==o&&(l=b),o=f;break}}catch{}let h=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new n(o,e,r):(o=h[0],l&&(yield o._set(c,l.toJSON())),yield Promise.all(t.map(f=>_(this,null,function*(){if(f!==o)try{yield f._remove(c)}catch{}}))),new n(o,e,r))})}};function qh(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ld(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ad(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dd(e))return"Blackberry";if(fd(e))return"Webos";if(cd(e))return"Safari";if((e.includes("chrome/")||ud(e))&&!e.includes("edge/"))return"Chrome";if(hd(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function ad(n=ue()){return/firefox\//i.test(n)}function cd(n=ue()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ud(n=ue()){return/crios\//i.test(n)}function ld(n=ue()){return/iemobile/i.test(n)}function hd(n=ue()){return/android/i.test(n)}function dd(n=ue()){return/blackberry/i.test(n)}function fd(n=ue()){return/webos/i.test(n)}function xa(n=ue()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Wg(n=ue()){var e;return xa(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Hg(){return gh()&&document.documentMode===10}function pd(n=ue()){return xa(n)||hd(n)||fd(n)||dd(n)||/windows phone/i.test(n)||ld(n)}function md(n,e=[]){let t;switch(n){case"Browser":t=qh(ue());break;case"Worker":t=`${qh(ue())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${At}/${r}`}var ma=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((c,l)=>{try{let h=e(o);c(h)}catch(h){l(h)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Kg(t){return _(this,arguments,function*(n,e={}){return Rt(n,"GET","/v2/passwordPolicy",Ct(n,e))})}var Qg=6,ga=class{constructor(e){var t,r,i,o;let c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:Qg,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,c,l;let h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(l=h.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),h}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var _a=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $i(this),this.idTokenSubscription=new $i(this),this.beforeStateQueue=new ma(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=td,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ot(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Gi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield sd(this,{idToken:e}),r=yield An._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(Fe(this.app)){let c=this.app.settings.authIdToken;return c?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(l,l))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=i?._redirectEventId,h=yield this.tryRedirectSignIn(e);(!c||c===l)&&h?.user&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return L(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield ji(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Og()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Fe(this.app))return Promise.reject(at(this));let t=e?Ae(e):null;return t&&L(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&L(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Fe(this.app)?Promise.reject(at(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Fe(this.app)?Promise.reject(at(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(ot(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield Kg(this),t=new ga(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield $g(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&ot(e)||this._popupRedirectResolver;L(t,this,"argument-error"),this.redirectPersistenceManager=yield Gi.create(this,[ot(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),c=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(L(l,this,"internal-error"),l.then(()=>{c||o(this.currentUser)}),typeof t=="function"){let h=e.addObserver(t,r,i);return()=>{c=!0,h()}}else{let h=e.addObserver(t);return()=>{c=!0,h()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=md(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&kg(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Kt(n){return Ae(n)}var $i=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ih(t=>this.observer=t)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Yi={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Jg(n){Yi=n}function gd(n){return Yi.loadJS(n)}function Yg(){return Yi.recaptchaEnterpriseScript}function Xg(){return Yi.gapiScript}function _d(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Zg="recaptcha-enterprise",e_="NO_RECAPTCHA",ya=class{constructor(e){this.type=Zg,this.auth=Kt(e)}verify(e="verify",t=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((c,l)=>_(this,null,function*(){Ug(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{let f=new da(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{l(h)})}))})}function i(o,c,l){let h=window.grecaptcha;Lh(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(e_)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,c)=>{r(this.auth).then(l=>{if(!t&&Lh(window.grecaptcha))i(l,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=Yg();h.length!==0&&(h+=l),gd(h).then(()=>{i(l,o,c)}).catch(f=>{c(f)})}}).catch(l=>{c(l)})})})}};function jh(n,e,t,r=!1){return _(this,null,function*(){let i=new ya(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let c=Object.assign({},e);return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function va(n,e,t,r){return _(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield jh(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>_(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield jh(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(o)}))})}function Oa(n,e){let t=br(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Bt(o,e??{}))return i;We(i,"already-initialized")}return t.initialize({options:e})}function t_(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ot);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ma(n,e,t){let r=Kt(n);L(r._canInitEmulator,r,"emulator-config-failed"),L(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=yd(e),{host:c,port:l}=n_(e),h=l===null?"":`:${l}`;r.config.emulator={url:`${o}//${c}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||r_()}function yd(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function n_(n){let e=yd(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Gh(r.substr(o.length+1))}}else{let[o,c]=r.split(":");return{host:o,port:Gh(c)}}}function Gh(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function r_(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Nr=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return st("not implemented")}_getIdTokenResponse(e){return st("not implemented")}_linkToIdToken(e,t){return st("not implemented")}_getReauthenticationResolver(e){return st("not implemented")}};function i_(n,e){return _(this,null,function*(){return Rt(n,"POST","/v1/accounts:signUp",e)})}function s_(n,e){return _(this,null,function*(){return xr(n,"POST","/v1/accounts:signInWithPassword",Ct(n,e))})}function o_(n,e){return _(this,null,function*(){return xr(n,"POST","/v1/accounts:signInWithEmailLink",Ct(n,e))})}function a_(n,e){return _(this,null,function*(){return xr(n,"POST","/v1/accounts:signInWithEmailLink",Ct(n,e))})}var kr=class n extends Nr{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return va(e,t,"signInWithPassword",s_);case"emailLink":return o_(e,{email:this._email,oobCode:this._password});default:We(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return va(e,r,"signUpPassword",i_);case"emailLink":return a_(e,{idToken:t,email:this._email,oobCode:this._password});default:We(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ca(n,e){return _(this,null,function*(){return xr(n,"POST","/v1/accounts:signInWithIdp",Ct(n,e))})}function c_(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function u_(n){let e=_n(yn(n)).link,t=e?_n(yn(e)).deep_link_id:null,r=_n(yn(n)).deep_link_id;return(r?_n(yn(r)).link:null)||r||t||e||n}var zi=class n{constructor(e){var t,r,i,o,c,l;let h=_n(yn(e)),f=(t=h.apiKey)!==null&&t!==void 0?t:null,v=(r=h.oobCode)!==null&&r!==void 0?r:null,b=c_((i=h.mode)!==null&&i!==void 0?i:null);L(f&&v&&b,"argument-error"),this.apiKey=f,this.operation=b,this.code=v,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=h.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(l=h.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){let t=u_(e);try{return new n(t)}catch{return null}}};var vd=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return kr._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=zi.parseLink(r);return L(i,"argument-error"),kr._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Wi=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ia=class extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function l_(n,e){return _(this,null,function*(){return xr(n,"POST","/v1/accounts:signUp",Ct(n,e))})}var bn=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield An._fromIdTokenResponse(e,r,i),c=$h(r);return new n({user:o,providerId:c,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=$h(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function $h(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ea=class n extends Re{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Id(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ea._fromErrorAndOperation(n,o,e,r):o})}function h_(n,e,t=!1){return _(this,null,function*(){let r=yield Pr(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return bn._forOperation(n,"link",r)})}function d_(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(Fe(r.app))return Promise.reject(at(r));let i="reauthenticate";try{let o=yield Pr(n,Id(r,i,e,n),t);L(o.idToken,r,"internal-error");let c=ka(o.idToken);L(c,r,"internal-error");let{sub:l}=c;return L(n.uid===l,r,"user-mismatch"),bn._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&We(r,"user-mismatch"),o}})}function Ed(n,e,t=!1){return _(this,null,function*(){if(Fe(n.app))return Promise.reject(at(n));let r="signIn",i=yield Id(n,r,e),o=yield bn._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Fa(n,e){return _(this,null,function*(){return Ed(Kt(n),e)})}function wd(n){return _(this,null,function*(){let e=Kt(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function La(n,e,t){return _(this,null,function*(){if(Fe(n.app))return Promise.reject(at(n));let r=Kt(n),c=yield va(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",l_).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&wd(n),h}),l=yield bn._fromIdTokenResponse(r,"signIn",c);return yield r._updateCurrentUser(l.user),l})}function Ua(n,e,t){return Fe(n.app)?Promise.reject(at(n)):Fa(Ae(n),vd.credential(e,t)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&wd(n),r}))}function Ba(n,e,t,r){return Ae(n).onIdTokenChanged(e,t,r)}function qa(n,e,t){return Ae(n).beforeAuthStateChanged(e,t)}function ja(n){return Ae(n).signOut()}var Hi="__sak";var Ki=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hi,"1"),this.storage.removeItem(Hi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var f_=1e3,p_=10,m_=(()=>{class n extends Ki{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pd(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let l=this.storage.getItem(i);!r&&this.localCache[i]===l||this.notifyListeners(i,l)},c=this.storage.getItem(i);Hg()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,p_):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},f_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield _t(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield _t(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield _t(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Td=m_;var g_=(()=>{class n extends Ki{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Ga=g_;function __(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var y_=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:c}=r.data,l=this.handlersMap[o];if(!l?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let h=Array.from(l).map(v=>_(this,null,function*(){return v(r.origin,c)})),f=yield __(h);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Ad(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var wa=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((l,h)=>{let f=Ad("",20);i.port1.start();let v=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(b){let S=b;if(S.data.eventId===f)switch(S.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(S.data.response);break;default:clearTimeout(v),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})})}};function ze(){return window}function v_(n){ze().location.href=n}function bd(){return typeof ze().WorkerGlobalScope<"u"&&typeof ze().importScripts=="function"}function I_(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function E_(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function w_(){return bd()?self:null}var Sd="firebaseLocalStorageDb",T_=1,Qi="firebaseLocalStorage",Cd="fbase_key",Ht=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Xi(n,e){return n.transaction([Qi],e?"readwrite":"readonly").objectStore(Qi)}function A_(){let n=indexedDB.deleteDatabase(Sd);return new Ht(n).toPromise()}function Ta(){let n=indexedDB.open(Sd,T_);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Qi,{keyPath:Cd})}catch(i){t(i)}}),n.addEventListener("success",()=>_(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Qi)?e(r):(r.close(),yield A_(),e(yield Ta()))}))})}function zh(n,e,t){return _(this,null,function*(){let r=Xi(n,!0).put({[Cd]:e,value:t});return new Ht(r).toPromise()})}function b_(n,e){return _(this,null,function*(){let t=Xi(n,!1).get(e),r=yield new Ht(t).toPromise();return r===void 0?null:r.value})}function Wh(n,e){let t=Xi(n,!0).delete(e);return new Ht(t).toPromise()}var S_=800,C_=3,R_=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Ta(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>C_)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return bd()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=y_._getInstance(w_()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield I_(),!this.activeServiceWorker)return;this.sender=new wa(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||E_()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Ta();return yield zh(t,Hi,"1"),yield Wh(t,Hi),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>zh(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>b_(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>Wh(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let c=Xi(o,!1).getAll();return new Ht(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:c}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),S_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Rd=R_;var Iw=_d("rcb"),Ew=new Wt(3e4,6e4);function P_(n,e){return e?ot(e):(L(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Vr=class extends Nr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ca(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ca(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ca(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function D_(n){return Ed(n.auth,new Vr(n),n.bypassAuthState)}function N_(n){let{auth:e,user:t}=n;return L(t,e,"internal-error"),d_(t,new Vr(n),n.bypassAuthState)}function k_(n){return _(this,null,function*(){let{auth:e,user:t}=n;return L(t,e,"internal-error"),h_(t,new Vr(n),n.bypassAuthState)})}var Aa=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:c,type:l}=e;if(c){this.reject(c);return}let h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(h))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D_;case"linkViaPopup":case"linkViaRedirect":return k_;case"reauthViaPopup":case"reauthViaRedirect":return N_;default:We(this.auth,"internal-error")}}resolve(e){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var ww=new Wt(2e3,1e4);var V_="pendingRedirect",Li=new Map,ba=class n extends Aa{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Li.get(this.auth._key());if(!e){try{let r=(yield x_(this.resolver,this.auth))?yield _t(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Li.set(this.auth._key(),e)}return this.bypassAuthState||Li.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return _t(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,_t(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function x_(n,e){return _(this,null,function*(){let t=F_(e),r=M_(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function O_(n,e){Li.set(n._key(),e)}function M_(n){return ot(n._redirectPersistence)}function F_(n){return Fi(V_,n.config.apiKey,n.name)}function L_(n,e,t=!1){return _(this,null,function*(){if(Fe(n.app))return Promise.reject(at(n));let r=Kt(n),i=P_(r,e),c=yield new ba(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,yield r._persistUserIfCurrent(c.user),yield r._setRedirectUser(null,e)),c})}var U_=10*60*1e3,Sa=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B_(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Pd(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(zt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U_&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hh(e))}saveEventToCache(e){this.cachedEventUids.add(Hh(e)),this.lastProcessedEventTime=Date.now()}};function Hh(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Pd({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function B_(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pd(n);default:return!1}}function q_(t){return _(this,arguments,function*(n,e={}){return Rt(n,"GET","/v1/projects",e)})}var j_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,G_=/^https?/;function $_(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield q_(n);for(let t of e)try{if(z_(t))return}catch{}We(n,"unauthorized-domain")})}function z_(n){let e=la(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!G_.test(t))return!1;if(j_.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var W_=new Wt(3e4,6e4);function Kh(){let n=ze().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function H_(n){return new Promise((e,t)=>{var r,i,o;function c(){Kh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kh(),t(zt(n,"network-request-failed"))},timeout:W_.get()})}if(!((i=(r=ze().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=ze().gapi)===null||o===void 0)&&o.load)c();else{let l=_d("iframefcb");return ze()[l]=()=>{gapi.load?c():t(zt(n,"network-request-failed"))},gd(`${Xg()}?onload=${l}`).catch(h=>t(h))}}).catch(e=>{throw Ui=null,e})}var Ui=null;function K_(n){return Ui=Ui||H_(n),Ui}var Q_=new Wt(5e3,15e3),J_="__/auth/iframe",Y_="emulator/auth/iframe",X_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ey(n){let e=n.config;L(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Da(e,Y_):`https://${n.config.authDomain}/${J_}`,r={apiKey:e.apiKey,appName:n.name,v:At},i=Z_.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${wr(r).slice(1)}`}function ty(n){return _(this,null,function*(){let e=yield K_(n),t=ze().gapi;return L(t,n,"internal-error"),e.open({where:document.body,url:ey(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:X_,dontclear:!0},r=>new Promise((i,o)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let c=zt(n,"network-request-failed"),l=ze().setTimeout(()=>{o(c)},Q_.get());function h(){ze().clearTimeout(l),i(r)}r.ping(h).then(h,()=>{o(c)})})))})}var ny={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ry=500,iy=600,sy="_blank",oy="http://localhost",Ji=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ay(n,e,t,r=ry,i=iy){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString(),l="",h=Object.assign(Object.assign({},ny),{width:r.toString(),height:i.toString(),top:o,left:c}),f=ue().toLowerCase();t&&(l=ud(f)?sy:t),ad(f)&&(e=e||oy,h.scrollbars="yes");let v=Object.entries(h).reduce((S,[D,N])=>`${S}${D}=${N},`,"");if(Wg(f)&&l!=="_self")return cy(e||"",l),new Ji(null);let b=window.open(e||"",l,v);L(b,n,"popup-blocked");try{b.focus()}catch{}return new Ji(b)}function cy(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var uy="__/auth/handler",ly="emulator/auth/handler",hy=encodeURIComponent("fac");function Qh(n,e,t,r,i,o){return _(this,null,function*(){L(n.config.authDomain,n,"auth-domain-config-required"),L(n.config.apiKey,n,"invalid-api-key");let c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:At,eventId:i};if(e instanceof Wi){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",vh(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(let[v,b]of Object.entries(o||{}))c[v]=b}if(e instanceof Ia){let v=e.getScopes().filter(b=>b!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);let l=c;for(let v of Object.keys(l))l[v]===void 0&&delete l[v];let h=yield n._getAppCheckToken(),f=h?`#${hy}=${encodeURIComponent(h)}`:"";return`${dy(n)}?${wr(l).slice(1)}${f}`})}function dy({config:n}){return n.emulator?Da(n,ly):`https://${n.authDomain}/${uy}`}var ua="webStorageSupport",Ca=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ga,this._completeRedirectFn=L_,this._overrideRedirectResult=O_}_openPopup(e,t,r,i){return _(this,null,function*(){var o;St((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let c=yield Qh(e,t,r,la(),i);return ay(e,c,Ad())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield Qh(e,t,r,la(),i);return v_(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(St(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield ty(e),r=new Sa(e);return t.register("authEvent",i=>(L(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ua,{type:ua},i=>{var o;let c=(o=i?.[0])===null||o===void 0?void 0:o[ua];c!==void 0&&t(!!c),We(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$_(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pd()||cd()||xa()}},Dd=Ca;var Jh="@firebase/auth",Yh="1.7.8";var Ra=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function fy(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function py(n){Tt(new xe("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:l}=r.options;L(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});let h={apiKey:c,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:md(n)},f=new _a(r,i,o,h);return t_(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Tt(new xe("auth-internal",e=>{let t=Kt(e.getProvider("auth").getImmediate());return(r=>new Ra(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),oe(Jh,Yh,fy(n)),oe(Jh,Yh,"esm2017")}var my=5*60,gy=jo("authIdTokenMaxAge")||my,Xh=null,_y=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>gy)return;let i=t?.token;Xh!==i&&(Xh=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function $a(n=vn()){let e=br(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Oa(n,{popupRedirectResolver:Dd,persistence:[Rd,Td,Ga]}),r=jo("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let c=_y(o.toString());qa(t,c,()=>c(t.currentUser)),Ba(t,l=>c(l))}}let i=Bo("auth");return i&&Ma(t,`http://${i}`),t}function yy(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Jg({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=zt("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",yy().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});py("Browser");var Nd="auth",Ue=class{constructor(e){return e}},Or=class{constructor(){return Sr(Nd)}};var za=new ke("angularfire2.auth-instances");function cv(n,e){let t=Vi(Nd,n,e);return t&&new Ue(t)}function uv(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ue(r)}}var lv={provide:Or,deps:[[new Ve,za]]},hv={provide:Ue,useFactory:cv,deps:[[new Ve,za],it]};function kd(n,...e){return oe("angularfire",Gt.full,"auth"),ln([hv,lv,{provide:za,useFactory:uv(n),multi:!0,deps:[yt,Lt,Tn,$t,[new Ve,En],...e]}])}var Vd=Le(La,!0);var xd=Le($a,!0);var Od=Le(Ua,!0);var Md=Le(ja,!0);var zd=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(K(No),K(Do))},e.\u0275dir=Me({type:e});let n=e;return n})(),dv=(()=>{let e=class e extends zd{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Po(e)))(o||e)}})(),e.\u0275dir=Me({type:e,features:[vt]});let n=e;return n})(),Wd=new ke("");var fv={provide:Wd,useExisting:mr(()=>Dn),multi:!0};function pv(){let n=Oo()?Oo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var mv=new ke(""),Dn=(()=>{let e=class e extends zd{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!pv())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(K(No),K(Do),K(mv,8))},e.\u0275dir=Me({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&je("input",function(l){return o._handleInput(l.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(l){return o._compositionEnd(l.target.value)})},features:[vr([fv]),vt]});let n=e;return n})();function gv(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Ka=new ke(""),Hd=new ke("");function _v(n){return gv(n.value)?{required:!0}:null}function Fd(n){return null}function Kd(n){return n!=null}function Qd(n){return eh(n)?Gl(n):n}function Jd(n){let e={};return n.forEach(t=>{e=t!=null?Se(Se({},e),t):e}),Object.keys(e).length===0?null:e}function Yd(n,e){return e.map(t=>t(n))}function yv(n){return!n.validate}function Xd(n){return n.map(e=>yv(e)?e:t=>e.validate(t))}function vv(n){if(!n)return null;let e=n.filter(Kd);return e.length==0?null:function(t){return Jd(Yd(t,e))}}function Qa(n){return n!=null?vv(Xd(n)):null}function Iv(n){if(!n)return null;let e=n.filter(Kd);return e.length==0?null:function(t){let r=Yd(t,e).map(Qd);return zl(r).pipe($l(Jd))}}function Ja(n){return n!=null?Iv(Xd(n)):null}function Ld(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ev(n){return n._rawValidators}function wv(n){return n._rawAsyncValidators}function Ha(n){return n?Array.isArray(n)?n:[n]:[]}function es(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ud(n,e){let t=Ha(e);return Ha(n).forEach(i=>{es(t,i)||t.push(i)}),t}function Bd(n,e){return Ha(e).filter(t=>!es(n,t))}var ts=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Qa(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ja(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Rn=class extends ts{get formDirective(){return null}get path(){return null}},qr=class extends ts{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ns=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Tv={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},wT=Ne(Se({},Tv),{"[class.ng-submitted]":"isSubmitted"}),os=(()=>{let e=class e extends ns{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(K(qr,2))},e.\u0275dir=Me({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&ko("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[vt]});let n=e;return n})(),as=(()=>{let e=class e extends ns{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(K(Rn,10))},e.\u0275dir=Me({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&ko("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[vt]});let n=e;return n})();var Mr="VALID",Zi="INVALID",Sn="PENDING",Fr="DISABLED",Pn=class{},rs=class extends Pn{constructor(e,t){super(),this.value=e,this.source=t}},Ur=class extends Pn{constructor(e,t){super(),this.pristine=e,this.source=t}},Br=class extends Pn{constructor(e,t){super(),this.touched=e,this.source=t}},Cn=class extends Pn{constructor(e,t){super(),this.status=e,this.source=t}};function Zd(n){return(cs(n)?n.validators:n)||null}function Av(n){return Array.isArray(n)?Qa(n):n||null}function ef(n,e){return(cs(e)?e.asyncValidators:n)||null}function bv(n){return Array.isArray(n)?Ja(n):n||null}function cs(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Sv(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Ti(1e3,"");if(!r[t])throw new Ti(1001,"")}function Cv(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Ti(1002,"")})}var is=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ir(()=>this.statusReactive()),this.statusReactive=yr(void 0),this._pristine=Ir(()=>this.pristineReactive()),this.pristineReactive=yr(!0),this._touched=Ir(()=>this.touchedReactive()),this.touchedReactive=yr(!1),this._events=new Bl,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return It(this.statusReactive)}set status(e){It(()=>this.statusReactive.set(e))}get valid(){return this.status===Mr}get invalid(){return this.status===Zi}get pending(){return this.status==Sn}get disabled(){return this.status===Fr}get enabled(){return this.status!==Fr}get pristine(){return It(this.pristineReactive)}set pristine(e){It(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return It(this.touchedReactive)}set touched(e){It(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Ud(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ud(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Bd(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Bd(e,this._rawAsyncValidators))}hasValidator(e){return es(this._rawValidators,e)}hasAsyncValidator(e){return es(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ne(Se({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Br(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Br(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ne(Se({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ur(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ur(!0,r))}markAsPending(e={}){this.status=Sn;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cn(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ne(Se({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fr,this.errors=null,this._forEachChild(i=>{i.disable(Ne(Se({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rs(this.value,r)),this._events.next(new Cn(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ne(Se({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mr,this._forEachChild(r=>{r.enable(Ne(Se({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ne(Se({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mr||this.status===Sn)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rs(this.value,t)),this._events.next(new Cn(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ne(Se({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fr:Mr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Sn,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Qd(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Cn(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new _r,this.statusChanges=new _r}_calculateStatus(){return this._allControlsDisabled()?Fr:this.errors?Zi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sn)?Sn:this._anyControlsHaveStatus(Zi)?Zi:Mr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ur(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Br(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cs(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Av(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=bv(this._rawAsyncValidators)}},ss=class extends is{constructor(e,t,r){super(Zd(t),ef(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Cv(this,!0,e),Object.keys(e).forEach(r=>{Sv(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ya=new ke("CallSetDisabledState",{providedIn:"root",factory:()=>Xa}),Xa="always";function Rv(n,e){return[...e.path,n]}function tf(n,e,t=Xa){nf(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Dv(n,e),kv(n,e),Nv(n,e),Pv(n,e)}function qd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Pv(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function nf(n,e){let t=Ev(n);e.validator!==null?n.setValidators(Ld(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=wv(n);e.asyncValidator!==null?n.setAsyncValidators(Ld(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();qd(e._rawValidators,i),qd(e._rawAsyncValidators,i)}function Dv(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&rf(n,e)})}function Nv(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&rf(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function rf(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kv(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Vv(n,e){n==null,nf(n,e)}function xv(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Ov(n){return Object.getPrototypeOf(n.constructor)===dv}function Mv(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Fv(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Dn?t=o:Ov(o)?r=o:i=o}),i||r||t||null}var Lv={provide:Rn,useExisting:mr(()=>jr)},Lr=Promise.resolve(),jr=(()=>{let e=class e extends Rn{get submitted(){return It(this.submittedReactive)}constructor(r,i,o){super(),this.callSetDisabledState=o,this._submitted=Ir(()=>this.submittedReactive()),this.submittedReactive=yr(!1),this._directives=new Set,this.ngSubmit=new _r,this.form=new ss({},Qa(r),Ja(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Lr.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),tf(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Lr.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Lr.then(()=>{let i=this._findContainer(r.path),o=new ss({});Vv(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Lr.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Lr.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),Mv(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(K(Ka,10),K(Hd,10),K(Ya,8))},e.\u0275dir=Me({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&je("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vr([Lv]),vt]});let n=e;return n})();function jd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Gd(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Uv=class extends is{constructor(e=null,t,r){super(Zd(t),ef(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cs(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Gd(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jd(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jd(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Gd(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Bv={provide:qr,useExisting:mr(()=>Gr)},$d=Promise.resolve(),Gr=(()=>{let e=class e extends qr{constructor(r,i,o,c,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new Uv,this._registered=!1,this.name="",this.update=new _r,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Fv(this,c)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),xv(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){tf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){$d.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&xo(i);$d.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?Rv(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(K(Rn,9),K(Ka,10),K(Hd,10),K(Wd,10),K(nh,8),K(Ya,8))},e.\u0275dir=Me({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[vr([Bv]),vt,gr]});let n=e;return n})(),us=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Me({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var qv=(()=>{let e=class e{constructor(){this._validator=Fd}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Fd,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Me({type:e,features:[gr]});let n=e;return n})();var jv={provide:Ka,useExisting:mr(()=>$r),multi:!0};var $r=(()=>{let e=class e extends qv{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=xo,this.createValidator=r=>_v}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Po(e)))(o||e)}})(),e.\u0275dir=Me({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&Yl("required",o._enabled?"":null)},inputs:{required:"required"},features:[vr([jv]),vt]});let n=e;return n})();var Gv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ro({type:e}),e.\u0275inj=Co({});let n=e;return n})();var ls=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Ya,useValue:r.callSetDisabledState??Xa}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ro({type:e}),e.\u0275inj=Co({imports:[Gv]});let n=e;return n})();var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},af={};var Za,cf;(function(){var n;function e(E,p){function g(){}g.prototype=p.prototype,E.D=p.prototype,E.prototype=new g,E.prototype.constructor=E,E.C=function(y,I,T){for(var m=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)m[Xe-2]=arguments[Xe];return p.prototype[I].apply(y,m)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,p,g){g||(g=0);var y=Array(16);if(typeof p=="string")for(var I=0;16>I;++I)y[I]=p.charCodeAt(g++)|p.charCodeAt(g++)<<8|p.charCodeAt(g++)<<16|p.charCodeAt(g++)<<24;else for(I=0;16>I;++I)y[I]=p[g++]|p[g++]<<8|p[g++]<<16|p[g++]<<24;p=E.g[0],g=E.g[1],I=E.g[2];var T=E.g[3],m=p+(T^g&(I^T))+y[0]+3614090360&4294967295;p=g+(m<<7&4294967295|m>>>25),m=T+(I^p&(g^I))+y[1]+3905402710&4294967295,T=p+(m<<12&4294967295|m>>>20),m=I+(g^T&(p^g))+y[2]+606105819&4294967295,I=T+(m<<17&4294967295|m>>>15),m=g+(p^I&(T^p))+y[3]+3250441966&4294967295,g=I+(m<<22&4294967295|m>>>10),m=p+(T^g&(I^T))+y[4]+4118548399&4294967295,p=g+(m<<7&4294967295|m>>>25),m=T+(I^p&(g^I))+y[5]+1200080426&4294967295,T=p+(m<<12&4294967295|m>>>20),m=I+(g^T&(p^g))+y[6]+2821735955&4294967295,I=T+(m<<17&4294967295|m>>>15),m=g+(p^I&(T^p))+y[7]+4249261313&4294967295,g=I+(m<<22&4294967295|m>>>10),m=p+(T^g&(I^T))+y[8]+1770035416&4294967295,p=g+(m<<7&4294967295|m>>>25),m=T+(I^p&(g^I))+y[9]+2336552879&4294967295,T=p+(m<<12&4294967295|m>>>20),m=I+(g^T&(p^g))+y[10]+4294925233&4294967295,I=T+(m<<17&4294967295|m>>>15),m=g+(p^I&(T^p))+y[11]+2304563134&4294967295,g=I+(m<<22&4294967295|m>>>10),m=p+(T^g&(I^T))+y[12]+1804603682&4294967295,p=g+(m<<7&4294967295|m>>>25),m=T+(I^p&(g^I))+y[13]+4254626195&4294967295,T=p+(m<<12&4294967295|m>>>20),m=I+(g^T&(p^g))+y[14]+2792965006&4294967295,I=T+(m<<17&4294967295|m>>>15),m=g+(p^I&(T^p))+y[15]+1236535329&4294967295,g=I+(m<<22&4294967295|m>>>10),m=p+(I^T&(g^I))+y[1]+4129170786&4294967295,p=g+(m<<5&4294967295|m>>>27),m=T+(g^I&(p^g))+y[6]+3225465664&4294967295,T=p+(m<<9&4294967295|m>>>23),m=I+(p^g&(T^p))+y[11]+643717713&4294967295,I=T+(m<<14&4294967295|m>>>18),m=g+(T^p&(I^T))+y[0]+3921069994&4294967295,g=I+(m<<20&4294967295|m>>>12),m=p+(I^T&(g^I))+y[5]+3593408605&4294967295,p=g+(m<<5&4294967295|m>>>27),m=T+(g^I&(p^g))+y[10]+38016083&4294967295,T=p+(m<<9&4294967295|m>>>23),m=I+(p^g&(T^p))+y[15]+3634488961&4294967295,I=T+(m<<14&4294967295|m>>>18),m=g+(T^p&(I^T))+y[4]+3889429448&4294967295,g=I+(m<<20&4294967295|m>>>12),m=p+(I^T&(g^I))+y[9]+568446438&4294967295,p=g+(m<<5&4294967295|m>>>27),m=T+(g^I&(p^g))+y[14]+3275163606&4294967295,T=p+(m<<9&4294967295|m>>>23),m=I+(p^g&(T^p))+y[3]+4107603335&4294967295,I=T+(m<<14&4294967295|m>>>18),m=g+(T^p&(I^T))+y[8]+1163531501&4294967295,g=I+(m<<20&4294967295|m>>>12),m=p+(I^T&(g^I))+y[13]+2850285829&4294967295,p=g+(m<<5&4294967295|m>>>27),m=T+(g^I&(p^g))+y[2]+4243563512&4294967295,T=p+(m<<9&4294967295|m>>>23),m=I+(p^g&(T^p))+y[7]+1735328473&4294967295,I=T+(m<<14&4294967295|m>>>18),m=g+(T^p&(I^T))+y[12]+2368359562&4294967295,g=I+(m<<20&4294967295|m>>>12),m=p+(g^I^T)+y[5]+4294588738&4294967295,p=g+(m<<4&4294967295|m>>>28),m=T+(p^g^I)+y[8]+2272392833&4294967295,T=p+(m<<11&4294967295|m>>>21),m=I+(T^p^g)+y[11]+1839030562&4294967295,I=T+(m<<16&4294967295|m>>>16),m=g+(I^T^p)+y[14]+4259657740&4294967295,g=I+(m<<23&4294967295|m>>>9),m=p+(g^I^T)+y[1]+2763975236&4294967295,p=g+(m<<4&4294967295|m>>>28),m=T+(p^g^I)+y[4]+1272893353&4294967295,T=p+(m<<11&4294967295|m>>>21),m=I+(T^p^g)+y[7]+4139469664&4294967295,I=T+(m<<16&4294967295|m>>>16),m=g+(I^T^p)+y[10]+3200236656&4294967295,g=I+(m<<23&4294967295|m>>>9),m=p+(g^I^T)+y[13]+681279174&4294967295,p=g+(m<<4&4294967295|m>>>28),m=T+(p^g^I)+y[0]+3936430074&4294967295,T=p+(m<<11&4294967295|m>>>21),m=I+(T^p^g)+y[3]+3572445317&4294967295,I=T+(m<<16&4294967295|m>>>16),m=g+(I^T^p)+y[6]+76029189&4294967295,g=I+(m<<23&4294967295|m>>>9),m=p+(g^I^T)+y[9]+3654602809&4294967295,p=g+(m<<4&4294967295|m>>>28),m=T+(p^g^I)+y[12]+3873151461&4294967295,T=p+(m<<11&4294967295|m>>>21),m=I+(T^p^g)+y[15]+530742520&4294967295,I=T+(m<<16&4294967295|m>>>16),m=g+(I^T^p)+y[2]+3299628645&4294967295,g=I+(m<<23&4294967295|m>>>9),m=p+(I^(g|~T))+y[0]+4096336452&4294967295,p=g+(m<<6&4294967295|m>>>26),m=T+(g^(p|~I))+y[7]+1126891415&4294967295,T=p+(m<<10&4294967295|m>>>22),m=I+(p^(T|~g))+y[14]+2878612391&4294967295,I=T+(m<<15&4294967295|m>>>17),m=g+(T^(I|~p))+y[5]+4237533241&4294967295,g=I+(m<<21&4294967295|m>>>11),m=p+(I^(g|~T))+y[12]+1700485571&4294967295,p=g+(m<<6&4294967295|m>>>26),m=T+(g^(p|~I))+y[3]+2399980690&4294967295,T=p+(m<<10&4294967295|m>>>22),m=I+(p^(T|~g))+y[10]+4293915773&4294967295,I=T+(m<<15&4294967295|m>>>17),m=g+(T^(I|~p))+y[1]+2240044497&4294967295,g=I+(m<<21&4294967295|m>>>11),m=p+(I^(g|~T))+y[8]+1873313359&4294967295,p=g+(m<<6&4294967295|m>>>26),m=T+(g^(p|~I))+y[15]+4264355552&4294967295,T=p+(m<<10&4294967295|m>>>22),m=I+(p^(T|~g))+y[6]+2734768916&4294967295,I=T+(m<<15&4294967295|m>>>17),m=g+(T^(I|~p))+y[13]+1309151649&4294967295,g=I+(m<<21&4294967295|m>>>11),m=p+(I^(g|~T))+y[4]+4149444226&4294967295,p=g+(m<<6&4294967295|m>>>26),m=T+(g^(p|~I))+y[11]+3174756917&4294967295,T=p+(m<<10&4294967295|m>>>22),m=I+(p^(T|~g))+y[2]+718787259&4294967295,I=T+(m<<15&4294967295|m>>>17),m=g+(T^(I|~p))+y[9]+3951481745&4294967295,E.g[0]=E.g[0]+p&4294967295,E.g[1]=E.g[1]+(I+(m<<21&4294967295|m>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,p){p===void 0&&(p=E.length);for(var g=p-this.blockSize,y=this.B,I=this.h,T=0;T<p;){if(I==0)for(;T<=g;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<p;)if(y[I++]=E.charCodeAt(T++),I==this.blockSize){i(this,y),I=0;break}}else for(;T<p;)if(y[I++]=E[T++],I==this.blockSize){i(this,y),I=0;break}}this.h=I,this.o+=p},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var p=1;p<E.length-8;++p)E[p]=0;var g=8*this.o;for(p=E.length-8;p<E.length;++p)E[p]=g&255,g/=256;for(this.u(E),E=Array(16),p=g=0;4>p;++p)for(var y=0;32>y;y+=8)E[g++]=this.g[p]>>>y&255;return E};function o(E,p){var g=l;return Object.prototype.hasOwnProperty.call(g,E)?g[E]:g[E]=p(E)}function c(E,p){this.h=p;for(var g=[],y=!0,I=E.length-1;0<=I;I--){var T=E[I]|0;y&&T==p||(g[I]=T,y=!1)}this.g=g}var l={};function h(E){return-128<=E&&128>E?o(E,function(p){return new c([p|0],0>p?-1:0)}):new c([E|0],0>E?-1:0)}function f(E){if(isNaN(E)||!isFinite(E))return b;if(0>E)return O(f(-E));for(var p=[],g=1,y=0;E>=g;y++)p[y]=E/g|0,g*=4294967296;return new c(p,0)}function v(E,p){if(E.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(E.charAt(0)=="-")return O(v(E.substring(1),p));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var g=f(Math.pow(p,8)),y=b,I=0;I<E.length;I+=8){var T=Math.min(8,E.length-I),m=parseInt(E.substring(I,I+T),p);8>T?(T=f(Math.pow(p,T)),y=y.j(T).add(f(m))):(y=y.j(g),y=y.add(f(m)))}return y}var b=h(0),S=h(1),D=h(16777216);n=c.prototype,n.m=function(){if(U(this))return-O(this).m();for(var E=0,p=1,g=0;g<this.g.length;g++){var y=this.i(g);E+=(0<=y?y:4294967296+y)*p,p*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N(this))return"0";if(U(this))return"-"+O(this).toString(E);for(var p=f(Math.pow(E,6)),g=this,y="";;){var I=se(g,p).g;g=J(g,I.j(p));var T=((0<g.g.length?g.g[0]:g.h)>>>0).toString(E);if(g=I,N(g))return T+y;for(;6>T.length;)T="0"+T;y=T+y}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function N(E){if(E.h!=0)return!1;for(var p=0;p<E.g.length;p++)if(E.g[p]!=0)return!1;return!0}function U(E){return E.h==-1}n.l=function(E){return E=J(this,E),U(E)?-1:N(E)?0:1};function O(E){for(var p=E.g.length,g=[],y=0;y<p;y++)g[y]=~E.g[y];return new c(g,~E.h).add(S)}n.abs=function(){return U(this)?O(this):this},n.add=function(E){for(var p=Math.max(this.g.length,E.g.length),g=[],y=0,I=0;I<=p;I++){var T=y+(this.i(I)&65535)+(E.i(I)&65535),m=(T>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);y=m>>>16,T&=65535,m&=65535,g[I]=m<<16|T}return new c(g,g[g.length-1]&-2147483648?-1:0)};function J(E,p){return E.add(O(p))}n.j=function(E){if(N(this)||N(E))return b;if(U(this))return U(E)?O(this).j(O(E)):O(O(this).j(E));if(U(E))return O(this.j(O(E)));if(0>this.l(D)&&0>E.l(D))return f(this.m()*E.m());for(var p=this.g.length+E.g.length,g=[],y=0;y<2*p;y++)g[y]=0;for(y=0;y<this.g.length;y++)for(var I=0;I<E.g.length;I++){var T=this.i(y)>>>16,m=this.i(y)&65535,Xe=E.i(I)>>>16,Jn=E.i(I)&65535;g[2*y+2*I]+=m*Jn,H(g,2*y+2*I),g[2*y+2*I+1]+=T*Jn,H(g,2*y+2*I+1),g[2*y+2*I+1]+=m*Xe,H(g,2*y+2*I+1),g[2*y+2*I+2]+=T*Xe,H(g,2*y+2*I+2)}for(y=0;y<p;y++)g[y]=g[2*y+1]<<16|g[2*y];for(y=p;y<2*p;y++)g[y]=0;return new c(g,0)};function H(E,p){for(;(E[p]&65535)!=E[p];)E[p+1]+=E[p]>>>16,E[p]&=65535,p++}function Y(E,p){this.g=E,this.h=p}function se(E,p){if(N(p))throw Error("division by zero");if(N(E))return new Y(b,b);if(U(E))return p=se(O(E),p),new Y(O(p.g),O(p.h));if(U(p))return p=se(E,O(p)),new Y(O(p.g),p.h);if(30<E.g.length){if(U(E)||U(p))throw Error("slowDivide_ only works with positive integers.");for(var g=S,y=p;0>=y.l(E);)g=Be(g),y=Be(y);var I=ce(g,1),T=ce(y,1);for(y=ce(y,2),g=ce(g,2);!N(y);){var m=T.add(y);0>=m.l(E)&&(I=I.add(g),T=m),y=ce(y,1),g=ce(g,1)}return p=J(E,I.j(p)),new Y(I,p)}for(I=b;0<=E.l(p);){for(g=Math.max(1,Math.floor(E.m()/p.m())),y=Math.ceil(Math.log(g)/Math.LN2),y=48>=y?1:Math.pow(2,y-48),T=f(g),m=T.j(p);U(m)||0<m.l(E);)g-=y,T=f(g),m=T.j(p);N(T)&&(T=S),I=I.add(T),E=J(E,m)}return new Y(I,E)}n.A=function(E){return se(this,E).h},n.and=function(E){for(var p=Math.max(this.g.length,E.g.length),g=[],y=0;y<p;y++)g[y]=this.i(y)&E.i(y);return new c(g,this.h&E.h)},n.or=function(E){for(var p=Math.max(this.g.length,E.g.length),g=[],y=0;y<p;y++)g[y]=this.i(y)|E.i(y);return new c(g,this.h|E.h)},n.xor=function(E){for(var p=Math.max(this.g.length,E.g.length),g=[],y=0;y<p;y++)g[y]=this.i(y)^E.i(y);return new c(g,this.h^E.h)};function Be(E){for(var p=E.g.length+1,g=[],y=0;y<p;y++)g[y]=E.i(y)<<1|E.i(y-1)>>>31;return new c(g,E.h)}function ce(E,p){var g=p>>5;p%=32;for(var y=E.g.length-g,I=[],T=0;T<y;T++)I[T]=0<p?E.i(T+g)>>>p|E.i(T+g+1)<<32-p:E.i(T+g);return new c(I,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cf=af.Md5=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=v,Za=af.Integer=c}).apply(typeof of<"u"?of:typeof self<"u"?self:typeof window<"u"?window:{});var hs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ct={};var ec,tc,Nn,nc,zr,ds,rc,ic,sc;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,a,u){return s==Array.prototype||s==Object.prototype||(s[a]=u.value),s};function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof hs=="object"&&hs];for(var a=0;a<s.length;++a){var u=s[a];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var r=t(this);function i(s,a){if(a)e:{var u=r;s=s.split(".");for(var d=0;d<s.length-1;d++){var w=s[d];if(!(w in u))break e;u=u[w]}s=s[s.length-1],d=u[s],a=a(d),a!=d&&a!=null&&e(u,s,{configurable:!0,writable:!0,value:a})}}function o(s,a){s instanceof String&&(s+="");var u=0,d=!1,w={next:function(){if(!d&&u<s.length){var A=u++;return{value:a(A,s[A]),done:!1}}return d=!0,{done:!0,value:void 0}}};return w[Symbol.iterator]=function(){return w},w}i("Array.prototype.values",function(s){return s||function(){return o(this,function(a,u){return u})}});var c=c||{},l=this||self;function h(s){var a=typeof s;return a=a!="object"?a:s?Array.isArray(s)?"array":a:"null",a=="array"||a=="object"&&typeof s.length=="number"}function f(s){var a=typeof s;return a=="object"&&s!=null||a=="function"}function v(s,a,u){return s.call.apply(s.bind,arguments)}function b(s,a,u){if(!s)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var w=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(w,d),s.apply(a,w)}}return function(){return s.apply(a,arguments)}}function S(s,a,u){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,S.apply(null,arguments)}function D(s,a){var u=Array.prototype.slice.call(arguments,1);return function(){var d=u.slice();return d.push.apply(d,arguments),s.apply(this,d)}}function N(s,a){function u(){}u.prototype=a.prototype,s.aa=a.prototype,s.prototype=new u,s.prototype.constructor=s,s.Qb=function(d,w,A){for(var P=Array(arguments.length-2),z=2;z<arguments.length;z++)P[z-2]=arguments[z];return a.prototype[w].apply(d,P)}}function U(s){let a=s.length;if(0<a){let u=Array(a);for(let d=0;d<a;d++)u[d]=s[d];return u}return[]}function O(s,a){for(let u=1;u<arguments.length;u++){let d=arguments[u];if(h(d)){let w=s.length||0,A=d.length||0;s.length=w+A;for(let P=0;P<A;P++)s[w+P]=d[P]}else s.push(d)}}class J{constructor(a,u){this.i=a,this.j=u,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}function H(s){return/^[\s\xa0]*$/.test(s)}function Y(){var s=l.navigator;return s&&(s=s.userAgent)?s:""}function se(s){return se[" "](s),s}se[" "]=function(){};var Be=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function ce(s,a,u){for(let d in s)a.call(u,s[d],d,s)}function E(s,a){for(let u in s)a.call(void 0,s[u],u,s)}function p(s){let a={};for(let u in s)a[u]=s[u];return a}let g="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y(s,a){let u,d;for(let w=1;w<arguments.length;w++){d=arguments[w];for(u in d)s[u]=d[u];for(let A=0;A<g.length;A++)u=g[A],Object.prototype.hasOwnProperty.call(d,u)&&(s[u]=d[u])}}function I(s){var a=1;s=s.split(":");let u=[];for(;0<a&&s.length;)u.push(s.shift()),a--;return s.length&&u.push(s.join(":")),u}function T(s){l.setTimeout(()=>{throw s},0)}function m(){var s=Js;let a=null;return s.g&&(a=s.g,s.g=s.g.next,s.g||(s.h=null),a.next=null),a}class Xe{constructor(){this.h=this.g=null}add(a,u){let d=Jn.get();d.set(a,u),this.h?this.h.next=d:this.g=d,this.h=d}}var Jn=new J(()=>new Np,s=>s.reset());class Np{constructor(){this.next=this.g=this.h=null}set(a,u){this.h=a,this.g=u,this.next=null}reset(){this.next=this.g=this.h=null}}let Yn,Xn=!1,Js=new Xe,Uu=()=>{let s=l.Promise.resolve(void 0);Yn=()=>{s.then(kp)}};var kp=()=>{for(var s;s=m();){try{s.h.call(s.g)}catch(u){T(u)}var a=Jn;a.j(s),100>a.h&&(a.h++,s.next=a.g,a.g=s)}Xn=!1};function ft(){this.s=this.s,this.C=this.C}ft.prototype.s=!1,ft.prototype.ma=function(){this.s||(this.s=!0,this.N())},ft.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(s,a){this.type=s,this.g=this.target=a,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Vp=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var s=!1,a=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let u=()=>{};l.addEventListener("test",u,a),l.removeEventListener("test",u,a)}catch{}return s}();function Zn(s,a){if(pe.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var u=this.type=s.type,d=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=a,a=s.relatedTarget){if(Be){e:{try{se(a.nodeName);var w=!0;break e}catch{}w=!1}w||(a=null)}}else u=="mouseover"?a=s.fromElement:u=="mouseout"&&(a=s.toElement);this.relatedTarget=a,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:xp[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Zn.aa.h.call(this)}}N(Zn,pe);var xp={2:"touch",3:"pen",4:"mouse"};Zn.prototype.h=function(){Zn.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var er="closure_listenable_"+(1e6*Math.random()|0),Op=0;function Mp(s,a,u,d,w){this.listener=s,this.proxy=null,this.src=a,this.type=u,this.capture=!!d,this.ha=w,this.key=++Op,this.da=this.fa=!1}function oi(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function ai(s){this.src=s,this.g={},this.h=0}ai.prototype.add=function(s,a,u,d,w){var A=s.toString();s=this.g[A],s||(s=this.g[A]=[],this.h++);var P=Xs(s,a,d,w);return-1<P?(a=s[P],u||(a.fa=!1)):(a=new Mp(a,this.src,A,!!d,w),a.fa=u,s.push(a)),a};function Ys(s,a){var u=a.type;if(u in s.g){var d=s.g[u],w=Array.prototype.indexOf.call(d,a,void 0),A;(A=0<=w)&&Array.prototype.splice.call(d,w,1),A&&(oi(a),s.g[u].length==0&&(delete s.g[u],s.h--))}}function Xs(s,a,u,d){for(var w=0;w<s.length;++w){var A=s[w];if(!A.da&&A.listener==a&&A.capture==!!u&&A.ha==d)return w}return-1}var Zs="closure_lm_"+(1e6*Math.random()|0),eo={};function Bu(s,a,u,d,w){if(d&&d.once)return ju(s,a,u,d,w);if(Array.isArray(a)){for(var A=0;A<a.length;A++)Bu(s,a[A],u,d,w);return null}return u=io(u),s&&s[er]?s.K(a,u,f(d)?!!d.capture:!!d,w):qu(s,a,u,!1,d,w)}function qu(s,a,u,d,w,A){if(!a)throw Error("Invalid event type");var P=f(w)?!!w.capture:!!w,z=no(s);if(z||(s[Zs]=z=new ai(s)),u=z.add(a,u,d,P,A),u.proxy)return u;if(d=Fp(),u.proxy=d,d.src=s,d.listener=u,s.addEventListener)Vp||(w=P),w===void 0&&(w=!1),s.addEventListener(a.toString(),d,w);else if(s.attachEvent)s.attachEvent($u(a.toString()),d);else if(s.addListener&&s.removeListener)s.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return u}function Fp(){function s(u){return a.call(s.src,s.listener,u)}let a=Lp;return s}function ju(s,a,u,d,w){if(Array.isArray(a)){for(var A=0;A<a.length;A++)ju(s,a[A],u,d,w);return null}return u=io(u),s&&s[er]?s.L(a,u,f(d)?!!d.capture:!!d,w):qu(s,a,u,!0,d,w)}function Gu(s,a,u,d,w){if(Array.isArray(a))for(var A=0;A<a.length;A++)Gu(s,a[A],u,d,w);else d=f(d)?!!d.capture:!!d,u=io(u),s&&s[er]?(s=s.i,a=String(a).toString(),a in s.g&&(A=s.g[a],u=Xs(A,u,d,w),-1<u&&(oi(A[u]),Array.prototype.splice.call(A,u,1),A.length==0&&(delete s.g[a],s.h--)))):s&&(s=no(s))&&(a=s.g[a.toString()],s=-1,a&&(s=Xs(a,u,d,w)),(u=-1<s?a[s]:null)&&to(u))}function to(s){if(typeof s!="number"&&s&&!s.da){var a=s.src;if(a&&a[er])Ys(a.i,s);else{var u=s.type,d=s.proxy;a.removeEventListener?a.removeEventListener(u,d,s.capture):a.detachEvent?a.detachEvent($u(u),d):a.addListener&&a.removeListener&&a.removeListener(d),(u=no(a))?(Ys(u,s),u.h==0&&(u.src=null,a[Zs]=null)):oi(s)}}}function $u(s){return s in eo?eo[s]:eo[s]="on"+s}function Lp(s,a){if(s.da)s=!0;else{a=new Zn(a,this);var u=s.listener,d=s.ha||s.src;s.fa&&to(s),s=u.call(d,a)}return s}function no(s){return s=s[Zs],s instanceof ai?s:null}var ro="__closure_events_fn_"+(1e9*Math.random()>>>0);function io(s){return typeof s=="function"?s:(s[ro]||(s[ro]=function(a){return s.handleEvent(a)}),s[ro])}function me(){ft.call(this),this.i=new ai(this),this.M=this,this.F=null}N(me,ft),me.prototype[er]=!0,me.prototype.removeEventListener=function(s,a,u,d){Gu(this,s,a,u,d)};function we(s,a){var u,d=s.F;if(d)for(u=[];d;d=d.F)u.push(d);if(s=s.M,d=a.type||a,typeof a=="string")a=new pe(a,s);else if(a instanceof pe)a.target=a.target||s;else{var w=a;a=new pe(d,s),y(a,w)}if(w=!0,u)for(var A=u.length-1;0<=A;A--){var P=a.g=u[A];w=ci(P,d,!0,a)&&w}if(P=a.g=s,w=ci(P,d,!0,a)&&w,w=ci(P,d,!1,a)&&w,u)for(A=0;A<u.length;A++)P=a.g=u[A],w=ci(P,d,!1,a)&&w}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var s=this.i,a;for(a in s.g){for(var u=s.g[a],d=0;d<u.length;d++)oi(u[d]);delete s.g[a],s.h--}}this.F=null},me.prototype.K=function(s,a,u,d){return this.i.add(String(s),a,!1,u,d)},me.prototype.L=function(s,a,u,d){return this.i.add(String(s),a,!0,u,d)};function ci(s,a,u,d){if(a=s.i.g[String(a)],!a)return!0;a=a.concat();for(var w=!0,A=0;A<a.length;++A){var P=a[A];if(P&&!P.da&&P.capture==u){var z=P.listener,de=P.ha||P.src;P.fa&&Ys(s.i,P),w=z.call(de,d)!==!1&&w}}return w&&!d.defaultPrevented}function zu(s,a,u){if(typeof s=="function")u&&(s=S(s,u));else if(s&&typeof s.handleEvent=="function")s=S(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(a)?-1:l.setTimeout(s,a||0)}function Wu(s){s.g=zu(()=>{s.g=null,s.i&&(s.i=!1,Wu(s))},s.l);let a=s.h;s.h=null,s.m.apply(null,a)}class Up extends ft{constructor(a,u){super(),this.m=a,this.l=u,this.h=null,this.i=!1,this.g=null}j(a){this.h=arguments,this.g?this.i=!0:Wu(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tr(s){ft.call(this),this.h=s,this.g={}}N(tr,ft);var Hu=[];function Ku(s){ce(s.g,function(a,u){this.g.hasOwnProperty(u)&&to(a)},s),s.g={}}tr.prototype.N=function(){tr.aa.N.call(this),Ku(this)},tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var so=l.JSON.stringify,Bp=l.JSON.parse,qp=class{stringify(s){return l.JSON.stringify(s,void 0)}parse(s){return l.JSON.parse(s,void 0)}};function oo(){}oo.prototype.h=null;function Qu(s){return s.h||(s.h=s.i())}function Ju(){}var nr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ao(){pe.call(this,"d")}N(ao,pe);function co(){pe.call(this,"c")}N(co,pe);var xt={},Yu=null;function ui(){return Yu=Yu||new me}xt.La="serverreachability";function Xu(s){pe.call(this,xt.La,s)}N(Xu,pe);function rr(s){let a=ui();we(a,new Xu(a))}xt.STAT_EVENT="statevent";function Zu(s,a){pe.call(this,xt.STAT_EVENT,s),this.stat=a}N(Zu,pe);function Te(s){let a=ui();we(a,new Zu(a,s))}xt.Ma="timingevent";function el(s,a){pe.call(this,xt.Ma,s),this.size=a}N(el,pe);function ir(s,a){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){s()},a)}function sr(){this.g=!0}sr.prototype.xa=function(){this.g=!1};function jp(s,a,u,d,w,A){s.info(function(){if(s.g)if(A)for(var P="",z=A.split("&"),de=0;de<z.length;de++){var $=z[de].split("=");if(1<$.length){var ge=$[0];$=$[1];var _e=ge.split("_");P=2<=_e.length&&_e[1]=="type"?P+(ge+"="+$+"&"):P+(ge+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+d+") [attempt "+w+"]: "+a+`
`+u+`
`+P})}function Gp(s,a,u,d,w,A,P){s.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+w+"]: "+a+`
`+u+`
`+A+" "+P})}function on(s,a,u,d){s.info(function(){return"XMLHTTP TEXT ("+a+"): "+zp(s,u)+(d?" "+d:"")})}function $p(s,a){s.info(function(){return"TIMEOUT: "+a})}sr.prototype.info=function(){};function zp(s,a){if(!s.g)return a;if(!a)return null;try{var u=JSON.parse(a);if(u){for(s=0;s<u.length;s++)if(Array.isArray(u[s])){var d=u[s];if(!(2>d.length)){var w=d[1];if(Array.isArray(w)&&!(1>w.length)){var A=w[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<w.length;P++)w[P]=""}}}}return so(u)}catch{return a}}var li={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},uo;function hi(){}N(hi,oo),hi.prototype.g=function(){return new XMLHttpRequest},hi.prototype.i=function(){return{}},uo=new hi;function pt(s,a,u,d){this.j=s,this.i=a,this.l=u,this.R=d||1,this.U=new tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nl}function nl(){this.i=null,this.g="",this.h=!1}var rl={},lo={};function ho(s,a,u){s.L=1,s.v=mi(Ze(a)),s.m=u,s.P=!0,il(s,null)}function il(s,a){s.F=Date.now(),di(s),s.A=Ze(s.v);var u=s.A,d=s.R;Array.isArray(d)||(d=[String(d)]),yl(u.i,"t",d),s.C=0,u=s.j.J,s.h=new nl,s.g=Ml(s.j,u?a:null,!s.m),0<s.O&&(s.M=new Up(S(s.Y,s,s.g),s.O)),a=s.U,u=s.g,d=s.ca;var w="readystatechange";Array.isArray(w)||(w&&(Hu[0]=w.toString()),w=Hu);for(var A=0;A<w.length;A++){var P=Bu(u,w[A],d||a.handleEvent,!1,a.h||a);if(!P)break;a.g[P.key]=P}a=s.H?p(s.H):{},s.m?(s.u||(s.u="POST"),a["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,a)):(s.u="GET",s.g.ea(s.A,s.u,null,a)),rr(),jp(s.i,s.u,s.A,s.l,s.R,s.m)}pt.prototype.ca=function(s){s=s.target;let a=this.M;a&&et(s)==3?a.j():this.Y(s)},pt.prototype.Y=function(s){try{if(s==this.g)e:{let _e=et(this.g);var a=this.g.Ba();let un=this.g.Z();if(!(3>_e)&&(_e!=3||this.g&&(this.h.h||this.g.oa()||bl(this.g)))){this.J||_e!=4||a==7||(a==8||0>=un?rr(3):rr(2)),fo(this);var u=this.g.Z();this.X=u;t:if(sl(this)){var d=bl(this.g);s="";var w=d.length,A=et(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ot(this),or(this);var P="";break t}this.h.i=new l.TextDecoder}for(a=0;a<w;a++)this.h.h=!0,s+=this.h.i.decode(d[a],{stream:!(A&&a==w-1)});d.length=0,this.h.g+=s,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=u==200,Gp(this.i,this.u,this.A,this.l,this.R,_e,u),this.o){if(this.T&&!this.K){t:{if(this.g){var z,de=this.g;if((z=de.g?de.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(z)){var $=z;break t}}$=null}if(u=$)on(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,po(this,u);else{this.o=!1,this.s=3,Te(12),Ot(this),or(this);break e}}if(this.P){u=!0;let Oe;for(;!this.J&&this.C<P.length;)if(Oe=Wp(this,P),Oe==lo){_e==4&&(this.s=4,Te(14),u=!1),on(this.i,this.l,null,"[Incomplete Response]");break}else if(Oe==rl){this.s=4,Te(15),on(this.i,this.l,P,"[Invalid Chunk]"),u=!1;break}else on(this.i,this.l,Oe,null),po(this,Oe);if(sl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||P.length!=0||this.h.h||(this.s=1,Te(16),u=!1),this.o=this.o&&u,!u)on(this.i,this.l,P,"[Invalid Chunked Response]"),Ot(this),or(this);else if(0<P.length&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.ba&&!ge.M&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Io(ge),ge.M=!0,Te(11))}}else on(this.i,this.l,P,null),po(this,P);_e==4&&Ot(this),this.o&&!this.J&&(_e==4?kl(this.j,this):(this.o=!1,di(this)))}else um(this.g),u==400&&0<P.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ot(this),or(this)}}}catch{}finally{}};function sl(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function Wp(s,a){var u=s.C,d=a.indexOf(`
`,u);return d==-1?lo:(u=Number(a.substring(u,d)),isNaN(u)?rl:(d+=1,d+u>a.length?lo:(a=a.slice(d,d+u),s.C=d+u,a)))}pt.prototype.cancel=function(){this.J=!0,Ot(this)};function di(s){s.S=Date.now()+s.I,ol(s,s.I)}function ol(s,a){if(s.B!=null)throw Error("WatchDog timer not null");s.B=ir(S(s.ba,s),a)}function fo(s){s.B&&(l.clearTimeout(s.B),s.B=null)}pt.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?($p(this.i,this.A),this.L!=2&&(rr(),Te(17)),Ot(this),this.s=2,or(this)):ol(this,this.S-s)};function or(s){s.j.G==0||s.J||kl(s.j,s)}function Ot(s){fo(s);var a=s.M;a&&typeof a.ma=="function"&&a.ma(),s.M=null,Ku(s.U),s.g&&(a=s.g,s.g=null,a.abort(),a.ma())}function po(s,a){try{var u=s.j;if(u.G!=0&&(u.g==s||mo(u.h,s))){if(!s.K&&mo(u.h,s)&&u.G==3){try{var d=u.Da.g.parse(a)}catch{d=null}if(Array.isArray(d)&&d.length==3){var w=d;if(w[0]==0){e:if(!u.u){if(u.g)if(u.g.F+3e3<s.F)Ii(u),yi(u);else break e;vo(u),Te(18)}}else u.za=w[1],0<u.za-u.T&&37500>w[2]&&u.F&&u.v==0&&!u.C&&(u.C=ir(S(u.Za,u),6e3));if(1>=ul(u.h)&&u.ca){try{u.ca()}catch{}u.ca=void 0}}else Ft(u,11)}else if((s.K||u.g==s)&&Ii(u),!H(a))for(w=u.Da.g.parse(a),a=0;a<w.length;a++){let $=w[a];if(u.T=$[0],$=$[1],u.G==2)if($[0]=="c"){u.K=$[1],u.ia=$[2];let ge=$[3];ge!=null&&(u.la=ge,u.j.info("VER="+u.la));let _e=$[4];_e!=null&&(u.Aa=_e,u.j.info("SVER="+u.Aa));let un=$[5];un!=null&&typeof un=="number"&&0<un&&(d=1.5*un,u.L=d,u.j.info("backChannelRequestTimeoutMs_="+d)),d=u;let Oe=s.g;if(Oe){let wi=Oe.g?Oe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wi){var A=d.h;A.g||wi.indexOf("spdy")==-1&&wi.indexOf("quic")==-1&&wi.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(go(A,A.h),A.h=null))}if(d.D){let Eo=Oe.g?Oe.g.getResponseHeader("X-HTTP-Session-Id"):null;Eo&&(d.ya=Eo,X(d.I,d.D,Eo))}}u.G=3,u.l&&u.l.ua(),u.ba&&(u.R=Date.now()-s.F,u.j.info("Handshake RTT: "+u.R+"ms")),d=u;var P=s;if(d.qa=Ol(d,d.J?d.ia:null,d.W),P.K){ll(d.h,P);var z=P,de=d.L;de&&(z.I=de),z.B&&(fo(z),di(z)),d.g=P}else Dl(d);0<u.i.length&&vi(u)}else $[0]!="stop"&&$[0]!="close"||Ft(u,7);else u.G==3&&($[0]=="stop"||$[0]=="close"?$[0]=="stop"?Ft(u,7):yo(u):$[0]!="noop"&&u.l&&u.l.ta($),u.v=0)}}rr(4)}catch{}}var Hp=class{constructor(s,a){this.g=s,this.map=a}};function al(s){this.l=s||10,l.PerformanceNavigationTiming?(s=l.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cl(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function ul(s){return s.h?1:s.g?s.g.size:0}function mo(s,a){return s.h?s.h==a:s.g?s.g.has(a):!1}function go(s,a){s.g?s.g.add(a):s.h=a}function ll(s,a){s.h&&s.h==a?s.h=null:s.g&&s.g.has(a)&&s.g.delete(a)}al.prototype.cancel=function(){if(this.i=hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function hl(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let a=s.i;for(let u of s.g.values())a=a.concat(u.D);return a}return U(s.i)}function Kp(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(h(s)){for(var a=[],u=s.length,d=0;d<u;d++)a.push(s[d]);return a}a=[],u=0;for(d in s)a[u++]=s[d];return a}function Qp(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(h(s)||typeof s=="string"){var a=[];s=s.length;for(var u=0;u<s;u++)a.push(u);return a}a=[],u=0;for(let d in s)a[u++]=d;return a}}}function dl(s,a){if(s.forEach&&typeof s.forEach=="function")s.forEach(a,void 0);else if(h(s)||typeof s=="string")Array.prototype.forEach.call(s,a,void 0);else for(var u=Qp(s),d=Kp(s),w=d.length,A=0;A<w;A++)a.call(void 0,d[A],u&&u[A],s)}var fl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jp(s,a){if(s){s=s.split("&");for(var u=0;u<s.length;u++){var d=s[u].indexOf("="),w=null;if(0<=d){var A=s[u].substring(0,d);w=s[u].substring(d+1)}else A=s[u];a(A,w?decodeURIComponent(w.replace(/\+/g," ")):"")}}}function Mt(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof Mt){this.h=s.h,fi(this,s.j),this.o=s.o,this.g=s.g,pi(this,s.s),this.l=s.l;var a=s.i,u=new ur;u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),pl(this,u),this.m=s.m}else s&&(a=String(s).match(fl))?(this.h=!1,fi(this,a[1]||"",!0),this.o=ar(a[2]||""),this.g=ar(a[3]||"",!0),pi(this,a[4]),this.l=ar(a[5]||"",!0),pl(this,a[6]||"",!0),this.m=ar(a[7]||"")):(this.h=!1,this.i=new ur(null,this.h))}Mt.prototype.toString=function(){var s=[],a=this.j;a&&s.push(cr(a,ml,!0),":");var u=this.g;return(u||a=="file")&&(s.push("//"),(a=this.o)&&s.push(cr(a,ml,!0),"@"),s.push(encodeURIComponent(String(u)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u=this.s,u!=null&&s.push(":",String(u))),(u=this.l)&&(this.g&&u.charAt(0)!="/"&&s.push("/"),s.push(cr(u,u.charAt(0)=="/"?Zp:Xp,!0))),(u=this.i.toString())&&s.push("?",u),(u=this.m)&&s.push("#",cr(u,tm)),s.join("")};function Ze(s){return new Mt(s)}function fi(s,a,u){s.j=u?ar(a,!0):a,s.j&&(s.j=s.j.replace(/:$/,""))}function pi(s,a){if(a){if(a=Number(a),isNaN(a)||0>a)throw Error("Bad port number "+a);s.s=a}else s.s=null}function pl(s,a,u){a instanceof ur?(s.i=a,nm(s.i,s.h)):(u||(a=cr(a,em)),s.i=new ur(a,s.h))}function X(s,a,u){s.i.set(a,u)}function mi(s){return X(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function ar(s,a){return s?a?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function cr(s,a,u){return typeof s=="string"?(s=encodeURI(s).replace(a,Yp),u&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function Yp(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var ml=/[#\/\?@]/g,Xp=/[#\?:]/g,Zp=/[#\?]/g,em=/[#\?@]/g,tm=/#/g;function ur(s,a){this.h=this.g=null,this.i=s||null,this.j=!!a}function mt(s){s.g||(s.g=new Map,s.h=0,s.i&&Jp(s.i,function(a,u){s.add(decodeURIComponent(a.replace(/\+/g," ")),u)}))}n=ur.prototype,n.add=function(s,a){mt(this),this.i=null,s=an(this,s);var u=this.g.get(s);return u||this.g.set(s,u=[]),u.push(a),this.h+=1,this};function gl(s,a){mt(s),a=an(s,a),s.g.has(a)&&(s.i=null,s.h-=s.g.get(a).length,s.g.delete(a))}function _l(s,a){return mt(s),a=an(s,a),s.g.has(a)}n.forEach=function(s,a){mt(this),this.g.forEach(function(u,d){u.forEach(function(w){s.call(a,w,d,this)},this)},this)},n.na=function(){mt(this);let s=Array.from(this.g.values()),a=Array.from(this.g.keys()),u=[];for(let d=0;d<a.length;d++){let w=s[d];for(let A=0;A<w.length;A++)u.push(a[d])}return u},n.V=function(s){mt(this);let a=[];if(typeof s=="string")_l(this,s)&&(a=a.concat(this.g.get(an(this,s))));else{s=Array.from(this.g.values());for(let u=0;u<s.length;u++)a=a.concat(s[u])}return a},n.set=function(s,a){return mt(this),this.i=null,s=an(this,s),_l(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[a]),this.h+=1,this},n.get=function(s,a){return s?(s=this.V(s),0<s.length?String(s[0]):a):a};function yl(s,a,u){gl(s,a),0<u.length&&(s.i=null,s.g.set(an(s,a),U(u)),s.h+=u.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],a=Array.from(this.g.keys());for(var u=0;u<a.length;u++){var d=a[u];let A=encodeURIComponent(String(d)),P=this.V(d);for(d=0;d<P.length;d++){var w=A;P[d]!==""&&(w+="="+encodeURIComponent(String(P[d]))),s.push(w)}}return this.i=s.join("&")};function an(s,a){return a=String(a),s.j&&(a=a.toLowerCase()),a}function nm(s,a){a&&!s.j&&(mt(s),s.i=null,s.g.forEach(function(u,d){var w=d.toLowerCase();d!=w&&(gl(this,d),yl(this,w,u))},s)),s.j=a}function rm(s,a){let u=new sr;if(l.Image){let d=new Image;d.onload=D(gt,u,"TestLoadImage: loaded",!0,a,d),d.onerror=D(gt,u,"TestLoadImage: error",!1,a,d),d.onabort=D(gt,u,"TestLoadImage: abort",!1,a,d),d.ontimeout=D(gt,u,"TestLoadImage: timeout",!1,a,d),l.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=s}else a(!1)}function im(s,a){let u=new sr,d=new AbortController,w=setTimeout(()=>{d.abort(),gt(u,"TestPingServer: timeout",!1,a)},1e4);fetch(s,{signal:d.signal}).then(A=>{clearTimeout(w),A.ok?gt(u,"TestPingServer: ok",!0,a):gt(u,"TestPingServer: server error",!1,a)}).catch(()=>{clearTimeout(w),gt(u,"TestPingServer: error",!1,a)})}function gt(s,a,u,d,w){try{w&&(w.onload=null,w.onerror=null,w.onabort=null,w.ontimeout=null),d(u)}catch{}}function sm(){this.g=new qp}function om(s,a,u){let d=u||"";try{dl(s,function(w,A){let P=w;f(w)&&(P=so(w)),a.push(d+A+"="+encodeURIComponent(P))})}catch(w){throw a.push(d+"type="+encodeURIComponent("_badmap")),w}}function lr(s){this.l=s.Ub||null,this.j=s.eb||!1}N(lr,oo),lr.prototype.g=function(){return new gi(this.l,this.j)},lr.prototype.i=function(s){return function(){return s}}({});function gi(s,a){me.call(this),this.D=s,this.o=a,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(gi,me),n=gi.prototype,n.open=function(s,a){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=a,this.readyState=1,dr(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let a={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(a.body=s),(this.D||l).fetch(new Request(this.A,a)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hr(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,dr(this)),this.g&&(this.readyState=3,dr(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vl(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function vl(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var a=s.value?s.value:new Uint8Array(0);(a=this.v.decode(a,{stream:!s.done}))&&(this.response=this.responseText+=a)}s.done?hr(this):dr(this),this.readyState==3&&vl(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,hr(this))},n.Qa=function(s){this.g&&(this.response=s,hr(this))},n.ga=function(){this.g&&hr(this)};function hr(s){s.readyState=4,s.l=null,s.j=null,s.v=null,dr(s)}n.setRequestHeader=function(s,a){this.u.append(s,a)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],a=this.h.entries();for(var u=a.next();!u.done;)u=u.value,s.push(u[0]+": "+u[1]),u=a.next();return s.join(`\r
`)};function dr(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function Il(s){let a="";return ce(s,function(u,d){a+=d,a+=":",a+=u,a+=`\r
`}),a}function _o(s,a,u){e:{for(d in u){var d=!1;break e}d=!0}d||(u=Il(u),typeof s=="string"?u!=null&&encodeURIComponent(String(u)):X(s,a,u))}function Z(s){me.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Z,me);var am=/^https?$/i,cm=["POST","PUT"];n=Z.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,a,u,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);a=a?a.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():uo.g(),this.v=this.o?Qu(this.o):Qu(uo),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(a,String(s),!0),this.B=!1}catch(A){El(this,A);return}if(s=u||"",u=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var w in d)u.set(w,d[w]);else if(typeof d.keys=="function"&&typeof d.get=="function")for(let A of d.keys())u.set(A,d.get(A));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(u.keys()).find(A=>A.toLowerCase()=="content-type"),w=l.FormData&&s instanceof l.FormData,!(0<=Array.prototype.indexOf.call(cm,a,void 0))||d||w||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of u)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Al(this),this.u=!0,this.g.send(s),this.u=!1}catch(A){El(this,A)}};function El(s,a){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=a,s.m=5,wl(s),_i(s)}function wl(s){s.A||(s.A=!0,we(s,"complete"),we(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,we(this,"complete"),we(this,"abort"),_i(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_i(this,!0)),Z.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Tl(this):this.bb())},n.bb=function(){Tl(this)};function Tl(s){if(s.h&&typeof c<"u"&&(!s.v[1]||et(s)!=4||s.Z()!=2)){if(s.u&&et(s)==4)zu(s.Ea,0,s);else if(we(s,"readystatechange"),et(s)==4){s.h=!1;try{let P=s.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break e;default:a=!1}var u;if(!(u=a)){var d;if(d=P===0){var w=String(s.D).match(fl)[1]||null;!w&&l.self&&l.self.location&&(w=l.self.location.protocol.slice(0,-1)),d=!am.test(w?w.toLowerCase():"")}u=d}if(u)we(s,"complete"),we(s,"success");else{s.m=6;try{var A=2<et(s)?s.g.statusText:""}catch{A=""}s.l=A+" ["+s.Z()+"]",wl(s)}}finally{_i(s)}}}}function _i(s,a){if(s.g){Al(s);let u=s.g,d=s.v[0]?()=>{}:null;s.g=null,s.v=null,a||we(s,"ready");try{u.onreadystatechange=d}catch{}}}function Al(s){s.I&&(l.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function et(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<et(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var a=this.g.responseText;return s&&a.indexOf(s)==0&&(a=a.substring(s.length)),Bp(a)}};function bl(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function um(s){let a={};s=(s.g&&2<=et(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let d=0;d<s.length;d++){if(H(s[d]))continue;var u=I(s[d]);let w=u[0];if(u=u[1],typeof u!="string")continue;u=u.trim();let A=a[w]||[];a[w]=A,A.push(u)}E(a,function(d){return d.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fr(s,a,u){return u&&u.internalChannelParams&&u.internalChannelParams[s]||a}function Sl(s){this.Aa=0,this.i=[],this.j=new sr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fr("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fr("baseRetryDelayMs",5e3,s),this.cb=fr("retryDelaySeedMs",1e4,s),this.Wa=fr("forwardChannelMaxRetries",2,s),this.wa=fr("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new al(s&&s.concurrentRequestLimit),this.Da=new sm,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Sl.prototype,n.la=8,n.G=1,n.connect=function(s,a,u,d){Te(0),this.W=s,this.H=a||{},u&&d!==void 0&&(this.H.OSID=u,this.H.OAID=d),this.F=this.X,this.I=Ol(this,null,this.W),vi(this)};function yo(s){if(Cl(s),s.G==3){var a=s.U++,u=Ze(s.I);if(X(u,"SID",s.K),X(u,"RID",a),X(u,"TYPE","terminate"),pr(s,u),a=new pt(s,s.j,a),a.L=2,a.v=mi(Ze(u)),u=!1,l.navigator&&l.navigator.sendBeacon)try{u=l.navigator.sendBeacon(a.v.toString(),"")}catch{}!u&&l.Image&&(new Image().src=a.v,u=!0),u||(a.g=Ml(a.j,null),a.g.ea(a.v)),a.F=Date.now(),di(a)}xl(s)}function yi(s){s.g&&(Io(s),s.g.cancel(),s.g=null)}function Cl(s){yi(s),s.u&&(l.clearTimeout(s.u),s.u=null),Ii(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&l.clearTimeout(s.s),s.s=null)}function vi(s){if(!cl(s.h)&&!s.s){s.s=!0;var a=s.Ga;Yn||Uu(),Xn||(Yn(),Xn=!0),Js.add(a,s),s.B=0}}function lm(s,a){return ul(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=a.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=ir(S(s.Ga,s,a),Vl(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let w=new pt(this,this.j,s),A=this.o;if(this.S&&(A?(A=p(A),y(A,this.S)):A=this.S),this.m!==null||this.O||(w.H=A,A=null),this.P)e:{for(var a=0,u=0;u<this.i.length;u++){t:{var d=this.i[u];if("__data__"in d.map&&(d=d.map.__data__,typeof d=="string")){d=d.length;break t}d=void 0}if(d===void 0)break;if(a+=d,4096<a){a=u;break e}if(a===4096||u===this.i.length-1){a=u+1;break e}}a=1e3}else a=1e3;a=Pl(this,w,a),u=Ze(this.I),X(u,"RID",s),X(u,"CVER",22),this.D&&X(u,"X-HTTP-Session-Id",this.D),pr(this,u),A&&(this.O?a="headers="+encodeURIComponent(String(Il(A)))+"&"+a:this.m&&_o(u,this.m,A)),go(this.h,w),this.Ua&&X(u,"TYPE","init"),this.P?(X(u,"$req",a),X(u,"SID","null"),w.T=!0,ho(w,u,null)):ho(w,u,a),this.G=2}}else this.G==3&&(s?Rl(this,s):this.i.length==0||cl(this.h)||Rl(this))};function Rl(s,a){var u;a?u=a.l:u=s.U++;let d=Ze(s.I);X(d,"SID",s.K),X(d,"RID",u),X(d,"AID",s.T),pr(s,d),s.m&&s.o&&_o(d,s.m,s.o),u=new pt(s,s.j,u,s.B+1),s.m===null&&(u.H=s.o),a&&(s.i=a.D.concat(s.i)),a=Pl(s,u,1e3),u.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),go(s.h,u),ho(u,d,a)}function pr(s,a){s.H&&ce(s.H,function(u,d){X(a,d,u)}),s.l&&dl({},function(u,d){X(a,d,u)})}function Pl(s,a,u){u=Math.min(s.i.length,u);var d=s.l?S(s.l.Na,s.l,s):null;e:{var w=s.i;let A=-1;for(;;){let P=["count="+u];A==-1?0<u?(A=w[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let z=!0;for(let de=0;de<u;de++){let $=w[de].g,ge=w[de].map;if($-=A,0>$)A=Math.max(0,w[de].g-100),z=!1;else try{om(ge,P,"req"+$+"_")}catch{d&&d(ge)}}if(z){d=P.join("&");break e}}}return s=s.i.splice(0,u),a.D=s,d}function Dl(s){if(!s.g&&!s.u){s.Y=1;var a=s.Fa;Yn||Uu(),Xn||(Yn(),Xn=!0),Js.add(a,s),s.v=0}}function vo(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=ir(S(s.Fa,s),Vl(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,Nl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=ir(S(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),yi(this),Nl(this))};function Io(s){s.A!=null&&(l.clearTimeout(s.A),s.A=null)}function Nl(s){s.g=new pt(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var a=Ze(s.qa);X(a,"RID","rpc"),X(a,"SID",s.K),X(a,"AID",s.T),X(a,"CI",s.F?"0":"1"),!s.F&&s.ja&&X(a,"TO",s.ja),X(a,"TYPE","xmlhttp"),pr(s,a),s.m&&s.o&&_o(a,s.m,s.o),s.L&&(s.g.I=s.L);var u=s.g;s=s.ia,u.L=1,u.v=mi(Ze(a)),u.m=null,u.P=!0,il(u,s)}n.Za=function(){this.C!=null&&(this.C=null,yi(this),vo(this),Te(19))};function Ii(s){s.C!=null&&(l.clearTimeout(s.C),s.C=null)}function kl(s,a){var u=null;if(s.g==a){Ii(s),Io(s),s.g=null;var d=2}else if(mo(s.h,a))u=a.D,ll(s.h,a),d=1;else return;if(s.G!=0){if(a.o)if(d==1){u=a.m?a.m.length:0,a=Date.now()-a.F;var w=s.B;d=ui(),we(d,new el(d,u)),vi(s)}else Dl(s);else if(w=a.s,w==3||w==0&&0<a.X||!(d==1&&lm(s,a)||d==2&&vo(s)))switch(u&&0<u.length&&(a=s.h,a.i=a.i.concat(u)),w){case 1:Ft(s,5);break;case 4:Ft(s,10);break;case 3:Ft(s,6);break;default:Ft(s,2)}}}function Vl(s,a){let u=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(u*=2),u*a}function Ft(s,a){if(s.j.info("Error code "+a),a==2){var u=S(s.fb,s),d=s.Xa;let w=!d;d=new Mt(d||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||fi(d,"https"),mi(d),w?rm(d.toString(),u):im(d.toString(),u)}else Te(2);s.G=0,s.l&&s.l.sa(a),xl(s),Cl(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))};function xl(s){if(s.G=0,s.ka=[],s.l){let a=hl(s.h);(a.length!=0||s.i.length!=0)&&(O(s.ka,a),O(s.ka,s.i),s.h.i.length=0,U(s.i),s.i.length=0),s.l.ra()}}function Ol(s,a,u){var d=u instanceof Mt?Ze(u):new Mt(u);if(d.g!="")a&&(d.g=a+"."+d.g),pi(d,d.s);else{var w=l.location;d=w.protocol,a=a?a+"."+w.hostname:w.hostname,w=+w.port;var A=new Mt(null);d&&fi(A,d),a&&(A.g=a),w&&pi(A,w),u&&(A.l=u),d=A}return u=s.D,a=s.ya,u&&a&&X(d,u,a),X(d,"VER",s.la),pr(s,d),d}function Ml(s,a,u){if(a&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return a=s.Ca&&!s.pa?new Z(new lr({eb:u})):new Z(s.pa),a.Ha(s.J),a}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fl(){}n=Fl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ei(){}Ei.prototype.g=function(s,a){return new Ce(s,a)};function Ce(s,a){me.call(this),this.g=new Sl(a),this.l=s,this.h=a&&a.messageUrlParams||null,s=a&&a.messageHeaders||null,a&&a.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=a&&a.initMessageHeaders||null,a&&a.messageContentType&&(s?s["X-WebChannel-Content-Type"]=a.messageContentType:s={"X-WebChannel-Content-Type":a.messageContentType}),a&&a.va&&(s?s["X-WebChannel-Client-Profile"]=a.va:s={"X-WebChannel-Client-Profile":a.va}),this.g.S=s,(s=a&&a.Sb)&&!H(s)&&(this.g.m=s),this.v=a&&a.supportsCrossDomainXhr||!1,this.u=a&&a.sendRawJson||!1,(a=a&&a.httpSessionIdParam)&&!H(a)&&(this.g.D=a,s=this.h,s!==null&&a in s&&(s=this.h,a in s&&delete s[a])),this.j=new cn(this)}N(Ce,me),Ce.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ce.prototype.close=function(){yo(this.g)},Ce.prototype.o=function(s){var a=this.g;if(typeof s=="string"){var u={};u.__data__=s,s=u}else this.u&&(u={},u.__data__=so(s),s=u);a.i.push(new Hp(a.Ya++,s)),a.G==3&&vi(a)},Ce.prototype.N=function(){this.g.l=null,delete this.j,yo(this.g),delete this.g,Ce.aa.N.call(this)};function Ll(s){ao.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var a=s.__sm__;if(a){e:{for(let u in a){s=u;break e}s=void 0}(this.i=s)&&(s=this.i,a=a!==null&&s in a?a[s]:void 0),this.data=a}else this.data=s}N(Ll,ao);function Ul(){co.call(this),this.status=1}N(Ul,co);function cn(s){this.g=s}N(cn,Fl),cn.prototype.ua=function(){we(this.g,"a")},cn.prototype.ta=function(s){we(this.g,new Ll(s))},cn.prototype.sa=function(s){we(this.g,new Ul)},cn.prototype.ra=function(){we(this.g,"b")},Ei.prototype.createWebChannel=Ei.prototype.g,Ce.prototype.send=Ce.prototype.o,Ce.prototype.open=Ce.prototype.m,Ce.prototype.close=Ce.prototype.close,sc=ct.createWebChannelTransport=function(){return new Ei},ic=ct.getStatEventTarget=function(){return ui()},rc=ct.Event=xt,ds=ct.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},li.NO_ERROR=0,li.TIMEOUT=8,li.HTTP_ERROR=6,zr=ct.ErrorCode=li,tl.COMPLETE="complete",nc=ct.EventType=tl,Ju.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",me.prototype.listen=me.prototype.K,Nn=ct.WebChannel=Ju,tc=ct.FetchXmlHttpFactory=lr,Z.prototype.listenOnce=Z.prototype.L,Z.prototype.getLastError=Z.prototype.Ka,Z.prototype.getLastErrorCode=Z.prototype.Ba,Z.prototype.getStatus=Z.prototype.Z,Z.prototype.getResponseJson=Z.prototype.Oa,Z.prototype.getResponseText=Z.prototype.oa,Z.prototype.send=Z.prototype.ea,Z.prototype.setWithCredentials=Z.prototype.Ha,ec=ct.XhrIo=Z}).apply(typeof hs<"u"?hs:typeof self<"u"?self:typeof window<"u"?window:{});var uf="@firebase/firestore";var le=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};le.UNAUTHENTICATED=new le(null),le.GOOGLE_CREDENTIALS=new le("google-credentials-uid"),le.FIRST_PARTY=new le("first-party-uid"),le.MOCK_USER=new le("mock-user");var Qn="10.13.1";var Xt=new Et("@firebase/firestore");function Wr(){return Xt.logLevel}function k(n,...e){if(Xt.logLevel<=q.DEBUG){let t=e.map(Cu);Xt.debug(`Firestore (${Qn}): ${n}`,...t)}}function Zt(n,...e){if(Xt.logLevel<=q.ERROR){let t=e.map(Cu);Xt.error(`Firestore (${Qn}): ${n}`,...t)}}function ys(n,...e){if(Xt.logLevel<=q.WARN){let t=e.map(Cu);Xt.warn(`Firestore (${Qn}): ${n}`,...t)}}function Cu(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function j(n="Unexpected state"){let e=`FIRESTORE (${Qn}) INTERNAL ASSERTION FAILED: `+n;throw Zt(e),new Error(e)}function ae(n,e){n||j()}function Q(n,e){return n}var C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},M=class extends Re{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ut=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var vs=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},uc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(le.UNAUTHENTICATED))}shutdown(){}},lc=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},hc=class{constructor(e){this.t=e,this.currentUser=le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve(),o=new ut;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ut,e.enqueueRetryable(()=>i(this.currentUser))};let c=()=>{let h=o;e.enqueueRetryable(()=>_(this,null,function*(){yield h.promise,yield i(this.currentUser)}))},l=h=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(h=>l(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?l(h):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ut)}},0),c()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string"),new vs(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string"),new le(e)}},dc=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},fc=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new dc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(le.FIRST_PARTY))}shutdown(){}invalidateToken(){}},pc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mc=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let c=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ae(typeof t.token=="string"),this.R=t.token,new pc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function $v(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Is=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=$v(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function W(n,e){return n<e?-1:n>e?1:0}function On(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ee=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new M(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ee(0,0))}static max(){return new n(new Ee(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Es=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&j(),r===void 0?r=e.length-t:r>e.length-t&&j(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),c=t.get(i);if(o<c)return-1;if(o>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ie=class n extends Es{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new M(C.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},zv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pe=class n extends Es{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return zv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new M(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},c=!1;for(;i<e.length;){let l=e[i];if(l==="\\"){if(i+1===e.length)throw new M(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new M(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else l==="`"?(c=!c,i++):l!=="."||c?(r+=l,i++):(o(),i++)}if(o(),c)throw new M(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var B=class n{constructor(e){this.path=e}static fromPath(e){return new n(ie.fromString(e))}static fromName(e){return new n(ie.fromString(e).popFirst(5))}static empty(){return new n(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ie(e.slice()))}};var gc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};gc.UNKNOWN_ID=-1;function Wv(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ee(t+1,0):new Ee(t,r));return new en(i,B.empty(),e)}function Hv(n){return new en(n.readTime,n.key,-1)}var en=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),B.empty(),-1)}static max(){return new n(ee.max(),B.empty(),-1)}};function Kv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:W(n.largestBatchId,e.largestBatchId))}var Qv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_c=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Nf(n){return _(this,null,function*(){if(n.code!==C.FAILED_PRECONDITION||n.message!==Qv)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,c=!1;e.forEach(l=>{++i,l.next(()=>{++o,c&&o===i&&t()},h=>r(h))}),c=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,c=new Array(o),l=0;for(let h=0;h<o;h++){let f=h;t(e[f]).next(v=>{c[f]=v,++l,l===o&&r(c)},v=>i(v))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Jv(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bs(n){return n.name==="IndexedDbTransactionError"}var Yv=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ru(n){return n==null}function Xr(n){return n===0&&1/n==-1/0}function Xv(n){return typeof n=="number"&&Number.isInteger(n)&&!Xr(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Zv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],MT=[...Zv,"documentOverlays"],eI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tI=eI,nI=[...tI,"indexConfiguration","indexState","indexEntries"];var FT=[...nI,"globals"];function lf(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ni(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kf(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var De=class n{constructor(e,t){this.comparator=e,this.root=t||Je.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vn(this.root,e,this.comparator,!0)}},Vn=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Je=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw j();let e=this.left.check();if(e!==this.right.check())throw j();return e+(this.isRed()?0:1)}};Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw j()}get value(){throw j()}get color(){throw j()}get left(){throw j()}get right(){throw j()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Je(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var be=class n{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ws(this.data.getIterator())}getIteratorFrom(e){return new ws(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ws=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qe=class n{constructor(e){this.fields=e,e.sort(Pe.comparator)}static empty(){return new n([])}unionWith(e){let t=new be(Pe.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return On(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var yc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ht=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new yc("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return W(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ht.EMPTY_BYTE_STRING=new ht("");var rI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dt(n){if(ae(!!n),typeof n=="string"){let e=0,t=rI.exec(n);if(ae(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:re(n.seconds),nanos:re(n.nanos)}}function re(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Mn(n){return typeof n=="string"?ht.fromBase64String(n):ht.fromUint8Array(n)}function Pu(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Vf(n){let e=n.mapValue.fields.__previous_value__;return Pu(e)?Vf(e):e}function Ts(n){let e=Dt(n.mapValue.fields.__local_write_time__.timestampValue);return new Ee(e.seconds,e.nanos)}var vc=class{constructor(e,t,r,i,o,c,l,h,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=l,this.longPollingOptions=h,this.useFetchStreams=f}},Ic=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var fs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pu(n)?4:Of(n)?9007199254740991:xf(n)?10:11:j()}function Ye(n,e){if(n===e)return!0;let t=Fn(n);if(t!==Fn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ts(n).isEqual(Ts(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let c=Dt(i.timestampValue),l=Dt(o.timestampValue);return c.seconds===l.seconds&&c.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Mn(i.bytesValue).isEqual(Mn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return re(i.geoPointValue.latitude)===re(o.geoPointValue.latitude)&&re(i.geoPointValue.longitude)===re(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return re(i.integerValue)===re(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let c=re(i.doubleValue),l=re(o.doubleValue);return c===l?Xr(c)===Xr(l):isNaN(c)&&isNaN(l)}return!1}(n,e);case 9:return On(n.arrayValue.values||[],e.arrayValue.values||[],Ye);case 10:case 11:return function(i,o){let c=i.mapValue.fields||{},l=o.mapValue.fields||{};if(lf(c)!==lf(l))return!1;for(let h in c)if(c.hasOwnProperty(h)&&(l[h]===void 0||!Ye(c[h],l[h])))return!1;return!0}(n,e);default:return j()}}function Zr(n,e){return(n.values||[]).find(t=>Ye(t,e))!==void 0}function Ln(n,e){if(n===e)return 0;let t=Fn(n),r=Fn(e);if(t!==r)return W(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return W(n.booleanValue,e.booleanValue);case 2:return function(o,c){let l=re(o.integerValue||o.doubleValue),h=re(c.integerValue||c.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return hf(n.timestampValue,e.timestampValue);case 4:return hf(Ts(n),Ts(e));case 5:return W(n.stringValue,e.stringValue);case 6:return function(o,c){let l=Mn(o),h=Mn(c);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){let l=o.split("/"),h=c.split("/");for(let f=0;f<l.length&&f<h.length;f++){let v=W(l[f],h[f]);if(v!==0)return v}return W(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){let l=W(re(o.latitude),re(c.latitude));return l!==0?l:W(re(o.longitude),re(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return df(n.arrayValue,e.arrayValue);case 10:return function(o,c){var l,h,f,v;let b=o.fields||{},S=c.fields||{},D=(l=b.value)===null||l===void 0?void 0:l.arrayValue,N=(h=S.value)===null||h===void 0?void 0:h.arrayValue,U=W(((f=D?.values)===null||f===void 0?void 0:f.length)||0,((v=N?.values)===null||v===void 0?void 0:v.length)||0);return U!==0?U:df(D,N)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===fs.mapValue&&c===fs.mapValue)return 0;if(o===fs.mapValue)return 1;if(c===fs.mapValue)return-1;let l=o.fields||{},h=Object.keys(l),f=c.fields||{},v=Object.keys(f);h.sort(),v.sort();for(let b=0;b<h.length&&b<v.length;++b){let S=W(h[b],v[b]);if(S!==0)return S;let D=Ln(l[h[b]],f[v[b]]);if(D!==0)return D}return W(h.length,v.length)}(n.mapValue,e.mapValue);default:throw j()}}function hf(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return W(n,e);let t=Dt(n),r=Dt(e),i=W(t.seconds,r.seconds);return i!==0?i:W(t.nanos,r.nanos)}function df(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ln(t[i],r[i]);if(o)return o}return W(t.length,r.length)}function Un(n){return Ec(n)}function Ec(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Dt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Mn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return B.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Ec(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let c of r)o?o=!1:i+=",",i+=`${c}:${Ec(t.fields[c])}`;return i+"}"}(n.mapValue):j()}function wc(n){return!!n&&"integerValue"in n}function Du(n){return!!n&&"arrayValue"in n}function gs(n){return!!n&&"mapValue"in n}function xf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Kr(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ni(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Kr(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kr(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Of(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ke=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kr(t)}setAll(e){let t=Pe.emptyPath(),r={},i=[];e.forEach((c,l)=>{if(!t.isImmediateParentOf(l)){let h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=l.popLast()}c?r[l.lastSegment()]=Kr(c):i.push(l.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());gs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ye(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gs(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ni(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Kr(this.value))}};function Mf(n){let e=[];return ni(n.fields,(t,r)=>{let i=new Pe([t]);if(gs(r)){let o=Mf(r.mapValue).fields;if(o.length===0)e.push(i);else for(let c of o)e.push(i.child(c))}else e.push(i)}),new Qe(e)}var Bn=class n{constructor(e,t,r,i,o,c,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=l}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),Ke.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),Ke.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),Ke.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ke.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ke.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var qn=class{constructor(e,t){this.position=e,this.inclusive=t}};function ff(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],c=n.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(c.referenceValue),t.key):r=Ln(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function pf(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ye(n.position[t],e.position[t]))return!1;return!0}var jn=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function iI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var As=class{},he=class n extends As{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ac(e,t,r):t==="array-contains"?new Cc(e,r):t==="in"?new Rc(e,r):t==="not-in"?new Pc(e,r):t==="array-contains-any"?new Dc(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new bc(e,r):new Sc(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ln(t,this.value)):t!==null&&Fn(this.value)===Fn(t)&&this.matchesComparison(Ln(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Nt=class n extends As{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ff(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ff(n){return n.op==="and"}function Lf(n){return sI(n)&&Ff(n)}function sI(n){for(let e of n.filters)if(e instanceof Nt)return!1;return!0}function Tc(n){if(n instanceof he)return n.field.canonicalString()+n.op.toString()+Un(n.value);if(Lf(n))return n.filters.map(e=>Tc(e)).join(",");{let e=n.filters.map(t=>Tc(t)).join(",");return`${n.op}(${e})`}}function Uf(n,e){return n instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&Ye(r.value,i.value)}(n,e):n instanceof Nt?function(r,i){return i instanceof Nt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,l)=>o&&Uf(c,i.filters[l]),!0):!1}(n,e):void j()}function Bf(n){return n instanceof he?function(t){return`${t.field.canonicalString()} ${t.op} ${Un(t.value)}`}(n):n instanceof Nt?function(t){return t.op.toString()+" {"+t.getFilters().map(Bf).join(" ,")+"}"}(n):"Filter"}var Ac=class extends he{constructor(e,t,r){super(e,t,r),this.key=B.fromName(r.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},bc=class extends he{constructor(e,t){super(e,"in",t),this.keys=qf("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Sc=class extends he{constructor(e,t){super(e,"not-in",t),this.keys=qf("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function qf(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>B.fromName(r.referenceValue))}var Cc=class extends he{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Du(t)&&Zr(t.arrayValue,this.value)}},Rc=class extends he{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Zr(this.value.arrayValue,t)}},Pc=class extends he{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Zr(this.value.arrayValue,t)}},Dc=class extends he{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Du(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zr(this.value.arrayValue,r))}};var Nc=class{constructor(e,t=null,r=[],i=[],o=null,c=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=l,this.ue=null}};function mf(n,e=null,t=[],r=[],i=null,o=null,c=null){return new Nc(n,e,t,r,i,o,c)}function Nu(n){let e=Q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Tc(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ru(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Un(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Un(r)).join(",")),e.ue=t}return e.ue}function ku(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Uf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pf(n.startAt,e.startAt)&&pf(n.endAt,e.endAt)}var Gn=class{constructor(e,t=null,r=[],i=[],o=null,c="F",l=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=l,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function oI(n,e,t,r,i,o,c,l){return new Gn(n,e,t,r,i,o,c,l)}function aI(n){return new Gn(n)}function gf(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function cI(n){return n.collectionGroup!==null}function Qr(n){let e=Q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let l=new be(Pe.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new jn(o,r))}),t.has(Pe.keyField().canonicalString())||e.ce.push(new jn(Pe.keyField(),r))}return e.ce}function Jt(n){let e=Q(n);return e.le||(e.le=uI(e,Qr(n))),e.le}function uI(n,e){if(n.limitType==="F")return mf(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new jn(i.field,o)});let t=n.endAt?new qn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qn(n.startAt.position,n.startAt.inclusive):null;return mf(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function kc(n,e,t){return new Gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jf(n,e){return ku(Jt(n),Jt(e))&&n.limitType===e.limitType}function Gf(n){return`${Nu(Jt(n))}|lt:${n.limitType}`}function Hr(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Bf(i)).join(", ")}]`),Ru(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Un(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Un(i)).join(",")),`Target(${r})`}(Jt(n))}; limitType=${n.limitType})`}function Vu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Qr(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(c,l,h){let f=ff(c,l,h);return c.inclusive?f<=0:f<0}(r.startAt,Qr(r),i)||r.endAt&&!function(c,l,h){let f=ff(c,l,h);return c.inclusive?f>=0:f>0}(r.endAt,Qr(r),i))}(n,e)}function lI(n){return(e,t)=>{let r=!1;for(let i of Qr(n)){let o=hI(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function hI(n,e,t){let r=n.field.isKeyField()?B.comparator(e.key,t.key):function(o,c,l){let h=c.data.field(o),f=l.data.field(o);return h!==null&&f!==null?Ln(h,f):j()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return j()}}var kt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ni(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return kf(this.inner)}size(){return this.innerSize}};var dI=new De(B.comparator);function bs(){return dI}var $f=new De(B.comparator);function ps(...n){let e=$f;for(let t of n)e=e.insert(t.key,t);return e}function zf(n){let e=$f;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qt(){return Jr()}function Wf(){return Jr()}function Jr(){return new kt(n=>n.toString(),(n,e)=>n.isEqual(e))}var fI=new De(B.comparator),pI=new be(B.comparator);function Ie(...n){let e=pI;for(let t of n)e=e.add(t);return e}var mI=new be(W);function gI(){return mI}function xu(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xr(e)?"-0":e}}function Hf(n){return{integerValue:""+n}}function _I(n,e){return Xv(e)?Hf(e):xu(n,e)}var $n=class{constructor(){this._=void 0}};function yI(n,e,t){return n instanceof zn?function(i,o){let c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Pu(o)&&(o=Vf(o)),o&&(c.fields.__previous_value__=o),{mapValue:c}}(t,e):n instanceof tn?Qf(n,e):n instanceof nn?Jf(n,e):function(i,o){let c=Kf(i,o),l=_f(c)+_f(i.Pe);return wc(c)&&wc(i.Pe)?Hf(l):xu(i.serializer,l)}(n,e)}function vI(n,e,t){return n instanceof tn?Qf(n,e):n instanceof nn?Jf(n,e):t}function Kf(n,e){return n instanceof Wn?function(r){return wc(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var zn=class extends $n{},tn=class extends $n{constructor(e){super(),this.elements=e}};function Qf(n,e){let t=Yf(e);for(let r of n.elements)t.some(i=>Ye(i,r))||t.push(r);return{arrayValue:{values:t}}}var nn=class extends $n{constructor(e){super(),this.elements=e}};function Jf(n,e){let t=Yf(e);for(let r of n.elements)t=t.filter(i=>!Ye(i,r));return{arrayValue:{values:t}}}var Wn=class extends $n{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function _f(n){return re(n.integerValue||n.doubleValue)}function Yf(n){return Du(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function II(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof tn&&i instanceof tn||r instanceof nn&&i instanceof nn?On(r.elements,i.elements,Ye):r instanceof Wn&&i instanceof Wn?Ye(r.Pe,i.Pe):r instanceof zn&&i instanceof zn}(n.transform,e.transform)}var Vc=class{constructor(e,t){this.version=e,this.transformResults=t}},Yt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _s(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Hn=class{};function Xf(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ss(n.key,Yt.none()):new rn(n.key,n.data,Yt.none());{let t=n.data,r=Ke.empty(),i=new be(Pe.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new dt(n.key,r,new Qe(i.toArray()),Yt.none())}}function EI(n,e,t){n instanceof rn?function(i,o,c){let l=i.value.clone(),h=vf(i.fieldTransforms,o,c.transformResults);l.setAll(h),o.convertToFoundDocument(c.version,l).setHasCommittedMutations()}(n,e,t):n instanceof dt?function(i,o,c){if(!_s(i.precondition,o))return void o.convertToUnknownDocument(c.version);let l=vf(i.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(Zf(i)),h.setAll(l),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Yr(n,e,t,r){return n instanceof rn?function(o,c,l,h){if(!_s(o.precondition,c))return l;let f=o.value.clone(),v=If(o.fieldTransforms,h,c);return f.setAll(v),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof dt?function(o,c,l,h){if(!_s(o.precondition,c))return l;let f=If(o.fieldTransforms,h,c),v=c.data;return v.setAll(Zf(o)),v.setAll(f),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(b=>b.field))}(n,e,t,r):function(o,c,l){return _s(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):l}(n,e,t)}function wI(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Kf(r.transform,i||null);o!=null&&(t===null&&(t=Ke.empty()),t.set(r.field,o))}return t||null}function yf(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&On(r,i,(o,c)=>II(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var rn=class extends Hn{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},dt=class extends Hn{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Zf(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function vf(n,e,t){let r=new Map;ae(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],c=o.transform,l=e.data.field(o.field);r.set(o.field,vI(c,l,t[i]))}return r}function If(n,e,t){let r=new Map;for(let i of n){let o=i.transform,c=t.data.field(i.field);r.set(i.field,yI(o,c,e))}return r}var Ss=class extends Hn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},xc=class extends Hn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Oc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&EI(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yr(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Yr(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Wf();return this.mutations.forEach(i=>{let o=e.get(i.key),c=o.overlayedDocument,l=this.applyToLocalView(c,o.mutatedFields);l=t.has(i.key)?null:l;let h=Xf(c,l);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ie())}isEqual(e){return this.batchId===e.batchId&&On(this.mutations,e.mutations,(t,r)=>yf(t,r))&&On(this.baseMutations,e.baseMutations,(t,r)=>yf(t,r))}},Mc=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ae(e.mutations.length===r.length);let i=function(){return fI}(),o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new n(e,t,r,i)}};var Fc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var te,G;function TI(n){switch(n){default:return j();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function AI(n){if(n===void 0)return Zt("GRPC error has no .code"),C.UNKNOWN;switch(n){case te.OK:return C.OK;case te.CANCELLED:return C.CANCELLED;case te.UNKNOWN:return C.UNKNOWN;case te.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case te.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case te.INTERNAL:return C.INTERNAL;case te.UNAVAILABLE:return C.UNAVAILABLE;case te.UNAUTHENTICATED:return C.UNAUTHENTICATED;case te.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case te.NOT_FOUND:return C.NOT_FOUND;case te.ALREADY_EXISTS:return C.ALREADY_EXISTS;case te.PERMISSION_DENIED:return C.PERMISSION_DENIED;case te.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case te.ABORTED:return C.ABORTED;case te.OUT_OF_RANGE:return C.OUT_OF_RANGE;case te.UNIMPLEMENTED:return C.UNIMPLEMENTED;case te.DATA_LOSS:return C.DATA_LOSS;default:return j()}}(G=te||(te={}))[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";var UT=new Za([4294967295,4294967295],0);var Lc=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Uc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SI(n,e){return Uc(n,e.toTimestamp())}function xn(n){return ae(!!n),ee.fromTimestamp(function(t){let r=Dt(t);return new Ee(r.seconds,r.nanos)}(n))}function ep(n,e){return Bc(n,e).canonicalString()}function Bc(n,e){let t=function(i){return new ie(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function CI(n){let e=ie.fromString(n);return ae(OI(e)),e}function qc(n,e){return ep(n.databaseId,e.path)}function RI(n){let e=CI(n);return e.length===4?ie.emptyPath():DI(e)}function PI(n){return new ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DI(n){return ae(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Ef(n,e,t){return{name:qc(n,e),fields:t.value.mapValue.fields}}function NI(n,e){let t;if(e instanceof rn)t={update:Ef(n,e.key,e.value)};else if(e instanceof Ss)t={delete:qc(n,e.key)};else if(e instanceof dt)t={update:Ef(n,e.key,e.data),updateMask:xI(e.fieldMask)};else{if(!(e instanceof xc))return j();t={verify:qc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){let l=c.transform;if(l instanceof zn)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof tn)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof nn)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wn)return{fieldPath:c.field.canonicalString(),increment:l.Pe};throw j()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:SI(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:j()}(n,e.precondition)),t}function kI(n,e){return n&&n.length>0?(ae(e!==void 0),n.map(t=>function(i,o){let c=i.updateTime?xn(i.updateTime):xn(o);return c.isEqual(ee.min())&&(c=xn(o)),new Vc(c,i.transformResults||[])}(t,e))):[]}function VI(n){let e=RI(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ae(r===1);let v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let o=[];t.where&&(o=function(b){let S=tp(b);return S instanceof Nt&&Lf(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=function(b){return b.map(S=>function(N){return new jn(kn(N.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(S))}(t.orderBy));let l=null;t.limit&&(l=function(b){let S;return S=typeof b=="object"?b.value:b,Ru(S)?null:S}(t.limit));let h=null;t.startAt&&(h=function(b){let S=!!b.before,D=b.values||[];return new qn(D,S)}(t.startAt));let f=null;return t.endAt&&(f=function(b){let S=!b.before,D=b.values||[];return new qn(D,S)}(t.endAt)),oI(e,i,c,o,l,"F",h,f)}function tp(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=kn(t.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=kn(t.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=kn(t.unaryFilter.field);return he.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let c=kn(t.unaryFilter.field);return he.create(c,"!=",{nullValue:"NULL_VALUE"});default:return j()}}(n):n.fieldFilter!==void 0?function(t){return he.create(kn(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Nt.create(t.compositeFilter.filters.map(r=>tp(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return j()}}(t.compositeFilter.op))}(n):j()}function kn(n){return Pe.fromServerFormat(n.fieldPath)}function xI(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function OI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var jc=class{constructor(e){this.ct=e}};function MI(n){let e=VI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kc(e,e.limit,"L"):e}var Cs=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(re(e.integerValue));else if("doubleValue"in e){let r=re(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Xr(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Dt(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Mn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Of(e)?this.dt(t,Number.MAX_SAFE_INTEGER):xf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):j()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let c="value",l=((i=(r=o[c].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(re(l)),this.Vt(c,t),this.Tt(o[c],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),B.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Cs.vt=new Cs;var Gc=class{constructor(){this.un=new $c}addToCollectionParentIndex(e,t){return this.un.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(en.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(en.min())}updateCollectionGroup(e,t,r){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},$c=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new be(ie.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new be(ie.comparator)).toArray()}};var BT=new Uint8Array(0);var He=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};He.DEFAULT_COLLECTION_PERCENTILE=10,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,He.DEFAULT=new He(41943040,He.DEFAULT_COLLECTION_PERCENTILE,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),He.DISABLED=new He(-1,0,0);var ei=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var zc=class{constructor(){this.changes=new kt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?R.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Wc=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Hc=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Yr(r.mutation,i,Qe.empty(),Ee.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ie()){let i=Qt();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=ps();return o.forEach((l,h)=>{c=c.insert(l,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){let r=Qt();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,l)=>{t.set(c,l)})})}computeViews(e,t,r,i){let o=bs(),c=Jr(),l=function(){return Jr()}();return t.forEach((h,f)=>{let v=r.get(f.key);i.has(f.key)&&(v===void 0||v.mutation instanceof dt)?o=o.insert(f.key,f):v!==void 0?(c.set(f.key,v.mutation.getFieldMask()),Yr(v.mutation,f,v.mutation.getFieldMask(),Ee.now())):c.set(f.key,Qe.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,v)=>c.set(f,v)),t.forEach((f,v)=>{var b;return l.set(f,new Wc(v,(b=c.get(f))!==null&&b!==void 0?b:null))}),l))}recalculateAndSaveOverlays(e,t){let r=Jr(),i=new De((c,l)=>c-l),o=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(let l of c)l.keys().forEach(h=>{let f=t.get(h);if(f===null)return;let v=r.get(h)||Qe.empty();v=l.applyToLocalView(f,v),r.set(h,v);let b=(i.get(l.batchId)||Ie()).add(h);i=i.insert(l.batchId,b)})}).next(()=>{let c=[],l=i.getReverseIterator();for(;l.hasNext();){let h=l.getNext(),f=h.key,v=h.value,b=Wf();v.forEach(S=>{if(!o.has(S)){let D=Xf(t.get(S),r.get(S));D!==null&&b.set(S,D),o=o.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,b))}return R.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(c){return B.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):R.resolve(Qt()),l=-1,h=o;return c.next(f=>R.forEach(f,(v,b)=>(l<b.largestBatchId&&(l=b.largestBatchId),o.get(v)?R.resolve():this.remoteDocumentCache.getEntry(e,v).next(S=>{h=h.insert(v,S)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Ie())).next(v=>({batchId:l,changes:zf(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(r=>{let i=ps();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,c=ps();return this.indexManager.getCollectionParents(e,o).next(l=>R.forEach(l,h=>{let f=function(b,S){return new Gn(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(v=>{v.forEach((b,S)=>{c=c.insert(b,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(c=>{o.forEach((h,f)=>{let v=f.getKey();c.get(v)===null&&(c=c.insert(v,Bn.newInvalidDocument(v)))});let l=ps();return c.forEach((h,f)=>{let v=o.get(h);v!==void 0&&Yr(v.mutation,f,Qe.empty(),Ee.now()),Vu(t,f)&&(l=l.insert(h,f))}),l})}};var Kc=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return R.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:xn(i.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:MI(i.bundledQuery),readTime:xn(i.readTime)}}(t)),R.resolve()}};var Qc=class{constructor(){this.overlays=new De(B.comparator),this.Ir=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Qt();return R.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),R.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,t,r){let i=Qt(),o=t.length+1,c=new B(t.child("")),l=this.overlays.getIteratorFrom(c);for(;l.hasNext();){let h=l.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new De((f,v)=>f-v),c=this.overlays.getIterator();for(;c.hasNext();){let f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let v=o.get(f.largestBatchId);v===null&&(v=Qt(),o=o.insert(f.largestBatchId,v)),v.set(f.getKey(),f)}}let l=Qt(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,v)=>l.set(f,v)),!(l.size()>=i)););return R.resolve(l)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let c=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Fc(t,r));let o=this.Ir.get(t);o===void 0&&(o=Ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Jc=class{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var ti=class{constructor(){this.Tr=new be(ne.Er),this.dr=new be(ne.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ne(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ne(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new B(new ie([])),r=new ne(t,e),i=new ne(t,e+1),o=[];return this.dr.forEachInRange([r,i],c=>{this.Vr(c),o.push(c.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new B(new ie([])),r=new ne(t,e),i=new ne(t,e+1),o=Ie();return this.dr.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){let t=new ne(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ne=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return B.comparator(e.key,t.key)||W(e.wr,t.wr)}static Ar(e,t){return W(e.wr,t.wr)||B.comparator(e.key,t.key)}};var Yc=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new be(ne.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let c=new Oc(o,t,r,i);this.mutationQueue.push(c);for(let l of i)this.br=this.br.add(new ne(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return R.resolve(c)}lookupMutationBatch(e,t){return R.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ne(t,0),i=new ne(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],c=>{let l=this.Dr(c.wr);o.push(l)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new be(W);return t.forEach(i=>{let o=new ne(i,0),c=new ne(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,c],l=>{r=r.add(l.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let c=new ne(new B(o),0),l=new be(W);return this.br.forEachWhile(h=>{let f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(h.wr)),!0)},c),R.resolve(this.Cr(l))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ae(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(t.mutations,i=>{let o=new ne(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ne(t,0),i=this.br.firstAfterOrEqual(r);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Xc=class{constructor(e){this.Mr=e,this.docs=function(){return new De(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return R.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let r=bs();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Bn.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=bs(),c=t.path,l=new B(c.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){let{key:f,value:{document:v}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||Kv(Hv(v),r)<=0||(i.has(v.key)||Vu(t,v))&&(o=o.insert(v.key,v.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,t,r,i){j()}Or(e,t){return R.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Zc(this)}getSize(e){return R.resolve(this.size)}},Zc=class extends zc{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var eu=class{constructor(e){this.persistence=e,this.Nr=new kt(t=>Nu(t),ku),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ti,this.targetCount=0,this.kr=ei.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),R.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ei(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Kn(t),R.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((c,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.Nr.delete(c),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return R.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),R.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return R.resolve(r)}containsKey(e,t){return R.resolve(this.Br.containsKey(t))}};var tu=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Yv(0),this.Kr=!1,this.Kr=!0,this.$r=new Jc,this.referenceDelegate=e(this),this.Ur=new eu(this),this.indexManager=new Gc,this.remoteDocumentCache=function(i){return new Xc(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new jc(t),this.Gr=new Kc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Yc(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new nu(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},nu=class extends _c{constructor(e){super(),this.currentSequenceNumber=e}},ru=class n{constructor(e){this.persistence=e,this.Jr=new ti,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw j()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),R.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=B.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return R.or([()=>R.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var iu=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Ie(),i=Ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var su=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ou=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _h()?8:Jv(ue())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;let c=new su;return this.Xi(e,t,c).next(l=>{if(o.result=l,this.zi)return this.es(e,t,c,l.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Wr()<=q.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Hr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(Wr()<=q.DEBUG&&k("QueryEngine","Query:",Hr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Wr()<=q.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Hr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jt(t))):R.resolve())}Yi(e,t){if(gf(t))return R.resolve(null);let r=Jt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=kc(t,null,"F"),r=Jt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let c=Ie(...o);return this.Ji.getDocuments(e,c).next(l=>this.indexManager.getMinOffset(e,r).next(h=>{let f=this.ts(t,l);return this.ns(t,f,c,h.readTime)?this.Yi(e,kc(t,null,"F")):this.rs(e,f,t,h)}))})))}Zi(e,t,r,i){return gf(t)||i.isEqual(ee.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let c=this.ts(t,o);return this.ns(t,c,r,i)?R.resolve(null):(Wr()<=q.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hr(t)),this.rs(e,c,t,Wv(i,-1)).next(l=>l))})}ts(e,t){let r=new be(lI(e));return t.forEach((i,o)=>{Vu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Wr()<=q.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Hr(t)),this.Ji.getDocumentsMatchingQuery(e,t,en.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}};var au=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new De(W),this._s=new kt(o=>Nu(o),ku),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hc(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function FI(n,e,t,r){return new au(n,e,t,r)}function np(n,e){return _(this,null,function*(){let t=Q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let c=[],l=[],h=Ie();for(let f of i){c.push(f.batchId);for(let v of f.mutations)h=h.add(v.key)}for(let f of o){l.push(f.batchId);for(let v of f.mutations)h=h.add(v.key)}return t.localDocuments.getDocuments(r,h).next(f=>({hs:f,removedBatchIds:c,addedBatchIds:l}))})})})}function LI(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(l,h,f,v){let b=f.batch,S=b.keys(),D=R.resolve();return S.forEach(N=>{D=D.next(()=>v.getEntry(h,N)).next(U=>{let O=f.docVersions.get(N);ae(O!==null),U.version.compareTo(O)<0&&(b.applyToRemoteDocument(U,f),U.isValidDocument()&&(U.setReadTime(f.commitVersion),v.addEntry(U)))})}),D.next(()=>l.mutationQueue.removeMutationBatch(h,b))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Ie();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(h=h.add(l.batch.mutations[f].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function UI(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function BI(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}var Rs=class{constructor(){this.activeTargetIds=gI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var cu=class{constructor(){this.so=new Rs,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Rs,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var uu=class{_o(e){}shutdown(){}};var Ps=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ms=null;function oc(){return ms===null?ms=function(){return 268435456+Math.round(2147483648*Math.random())}():ms++,"0x"+ms.toString(16)}var qI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var lu=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ve="WebChannelConnection",hu=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,c){let l=oc(),h=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${l}:`,h,i);let f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,c),this.No(t,h,f,i).then(v=>(k("RestConnection",`Received RPC '${t}' ${l}: `,v),v),v=>{throw ys("RestConnection",`RPC '${t}' ${l} failed with error: `,v,"url: ",h,"request:",i),v})}Lo(t,r,i,o,c,l){return this.Mo(t,r,i,o,c)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qn}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,c)=>t[c]=o),i&&i.headers.forEach((o,c)=>t[c]=o)}xo(t,r){let i=qI[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=oc();return new Promise((c,l)=>{let h=new ec;h.setWithCredentials(!0),h.listenOnce(nc.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case zr.NO_ERROR:let v=h.getResponseJson();k(ve,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),c(v);break;case zr.TIMEOUT:k(ve,`RPC '${e}' ${o} timed out`),l(new M(C.DEADLINE_EXCEEDED,"Request time out"));break;case zr.HTTP_ERROR:let b=h.getStatus();if(k(ve,`RPC '${e}' ${o} failed with status:`,b,"response text:",h.getResponseText()),b>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);let D=S?.error;if(D&&D.status&&D.message){let N=function(O){let J=O.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(J)>=0?J:C.UNKNOWN}(D.status);l(new M(N,D.message))}else l(new M(C.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new M(C.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{k(ve,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(i);k(ve,`RPC '${e}' ${o} sending request:`,i),h.send(t,"POST",f,r,15)})}Bo(e,t,r){let i=oc(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=sc(),l=ic(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.xmlHttpFactory=new tc({})),this.Oo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;let v=o.join("");k(ve,`Creating RPC '${e}' stream ${i}: ${v}`,h);let b=c.createWebChannel(v,h),S=!1,D=!1,N=new lu({Io:O=>{D?k(ve,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(S||(k(ve,`Opening RPC '${e}' stream ${i} transport.`),b.open(),S=!0),k(ve,`RPC '${e}' stream ${i} sending:`,O),b.send(O))},To:()=>b.close()}),U=(O,J,H)=>{O.listen(J,Y=>{try{H(Y)}catch(se){setTimeout(()=>{throw se},0)}})};return U(b,Nn.EventType.OPEN,()=>{D||(k(ve,`RPC '${e}' stream ${i} transport opened.`),N.yo())}),U(b,Nn.EventType.CLOSE,()=>{D||(D=!0,k(ve,`RPC '${e}' stream ${i} transport closed`),N.So())}),U(b,Nn.EventType.ERROR,O=>{D||(D=!0,ys(ve,`RPC '${e}' stream ${i} transport errored:`,O),N.So(new M(C.UNAVAILABLE,"The operation could not be completed")))}),U(b,Nn.EventType.MESSAGE,O=>{var J;if(!D){let H=O.data[0];ae(!!H);let Y=H,se=Y.error||((J=Y[0])===null||J===void 0?void 0:J.error);if(se){k(ve,`RPC '${e}' stream ${i} received error:`,se);let Be=se.status,ce=function(g){let y=te[g];if(y!==void 0)return AI(y)}(Be),E=se.message;ce===void 0&&(ce=C.INTERNAL,E="Unknown error status: "+Be+" with message "+se.message),D=!0,N.So(new M(ce,E)),b.close()}else k(ve,`RPC '${e}' stream ${i} received:`,H),N.bo(H)}}),U(l,rc.STAT_EVENT,O=>{O.stat===ds.PROXY?k(ve,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===ds.NOPROXY&&k(ve,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}};function ac(){return typeof document<"u"?document:null}function qs(n){return new Lc(n,!0)}var Ds=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var du=class{constructor(e,t,r,i,o,c,l,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=l,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ds(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===C.RESOURCE_EXHAUSTED?(Zt(t.toString()),Zt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new M(C.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var fu=class extends du{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ae(!!e.streamToken),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=kI(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=PI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>NI(this.serializer,r))};this.a_(t)}};var pu=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new M(C.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Mo(e,Bc(t,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new M(C.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,l])=>this.connection.Lo(e,Bc(t,r),i,c,l,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new M(C.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},mu=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zt(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var gu=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(c=>{r.enqueueAndForget(()=>_(this,null,function*(){ii(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(h){return _(this,null,function*(){let f=Q(h);f.L_.add(4),yield ri(f),f.q_.set("Unknown"),f.L_.delete(4),yield js(f)})}(this))}))}),this.q_=new mu(r,i)}};function js(n){return _(this,null,function*(){if(ii(n))for(let e of n.B_)yield e(!0)})}function ri(n){return _(this,null,function*(){for(let e of n.B_)yield e(!1)})}function ii(n){return Q(n).L_.size===0}function rp(n,e,t){return _(this,null,function*(){if(!Bs(e))throw e;n.L_.add(1),yield ri(n),n.q_.set("Offline"),t||(t=()=>UI(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield js(n)}))})}function ip(n,e){return e().catch(t=>rp(n,t,e))}function Gs(n){return _(this,null,function*(){let e=Q(n),t=Vt(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;jI(e);)try{let i=yield BI(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,GI(e,i)}catch(i){yield rp(e,i)}sp(e)&&op(e)})}function jI(n){return ii(n)&&n.O_.length<10}function GI(n,e){n.O_.push(e);let t=Vt(n);t.r_()&&t.V_&&t.m_(e.mutations)}function sp(n){return ii(n)&&!Vt(n).n_()&&n.O_.length>0}function op(n){Vt(n).start()}function $I(n){return _(this,null,function*(){Vt(n).p_()})}function zI(n){return _(this,null,function*(){let e=Vt(n);for(let t of n.O_)e.m_(t.mutations)})}function WI(n,e,t){return _(this,null,function*(){let r=n.O_.shift(),i=Mc.from(r,e,t);yield ip(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Gs(n)})}function HI(n,e){return _(this,null,function*(){e&&Vt(n).V_&&(yield function(r,i){return _(this,null,function*(){if(function(c){return TI(c)&&c!==C.ABORTED}(i.code)){let o=r.O_.shift();Vt(r).s_(),yield ip(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Gs(r)}})}(n,e)),sp(n)&&op(n)})}function wf(n,e){return _(this,null,function*(){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=ii(t);t.L_.add(3),yield ri(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield js(t)})}function KI(n,e){return _(this,null,function*(){let t=Q(n);e?(t.L_.delete(2),yield js(t)):e||(t.L_.add(2),yield ri(t),t.q_.set("Unknown"))})}function Vt(n){return n.U_||(n.U_=function(t,r,i){let o=Q(t);return o.w_(),new fu(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$I.bind(null,n),mo:HI.bind(null,n),f_:zI.bind(null,n),g_:WI.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.U_.s_(),yield Gs(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var _u=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ut,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let c=Date.now()+r,l=new n(e,t,c,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ap(n,e){if(Zt("AsyncQueue",`${e}: ${n}`),Bs(n))return new M(C.UNAVAILABLE,`${e}: ${n}`);throw n}var yu=class{constructor(){this.queries=Tf(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Q(t),o=i.queries;i.queries=Tf(),o.forEach((c,l)=>{for(let h of l.j_)h.onError(r)})})(this,new M(C.ABORTED,"Firestore shutting down"))}};function Tf(){return new kt(n=>Gf(n),jf)}function QI(n){n.Y_.forEach(e=>{e.next()})}var Af,bf;(bf=Af||(Af={})).ea="default",bf.Cache="cache";var vu=class{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new kt(l=>Gf(l),jf),this.Ma=new Map,this.xa=new Set,this.Oa=new De(B.comparator),this.Na=new Map,this.La=new ti,this.Ba={},this.ka=new Map,this.qa=ei.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function JI(n,e,t){return _(this,null,function*(){let r=eE(n);try{let i=yield function(c,l){let h=Q(c),f=Ee.now(),v=l.reduce((D,N)=>D.add(N.key),Ie()),b,S;return h.persistence.runTransaction("Locally write mutations","readwrite",D=>{let N=bs(),U=Ie();return h.cs.getEntries(D,v).next(O=>{N=O,N.forEach((J,H)=>{H.isValidDocument()||(U=U.add(J))})}).next(()=>h.localDocuments.getOverlayedDocuments(D,N)).next(O=>{b=O;let J=[];for(let H of l){let Y=wI(H,b.get(H.key).overlayedDocument);Y!=null&&J.push(new dt(H.key,Y,Mf(Y.value.mapValue),Yt.exists(!0)))}return h.mutationQueue.addMutationBatch(D,f,J,l)}).next(O=>{S=O;let J=O.applyToLocalDocumentSet(b,U);return h.documentOverlayCache.saveOverlays(D,O.batchId,J)})}).then(()=>({batchId:S.batchId,changes:zf(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,l,h){let f=c.Ba[c.currentUser.toKey()];f||(f=new De(W)),f=f.insert(l,h),c.Ba[c.currentUser.toKey()]=f}(r,i.batchId,t),yield $s(r,i.changes),yield Gs(r.remoteStore)}catch(i){let o=ap(i,"Failed to persist write");t.reject(o)}})}function Sf(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,c)=>{let l=c.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(c,l){let h=Q(c);h.onlineState=l;let f=!1;h.queries.forEach((v,b)=>{for(let S of b.j_)S.Z_(l)&&(f=!0)}),f&&QI(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function YI(n,e){return _(this,null,function*(){let t=Q(n),r=e.batch.batchId;try{let i=yield LI(t.localStore,e);up(t,r,null),cp(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield $s(t,i)}catch(i){yield Nf(i)}})}function XI(n,e,t){return _(this,null,function*(){let r=Q(n);try{let i=yield function(c,l){let h=Q(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let v;return h.mutationQueue.lookupMutationBatch(f,l).next(b=>(ae(b!==null),v=b.keys(),h.mutationQueue.removeMutationBatch(f,b))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,v,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,v)).next(()=>h.localDocuments.getDocuments(f,v))})}(r.localStore,e);up(r,e,t),cp(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield $s(r,i)}catch(i){yield Nf(i)}})}function cp(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function up(n,e,t){let r=Q(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function $s(n,e,t){return _(this,null,function*(){let r=Q(n),i=[],o=[],c=[];r.Fa.isEmpty()||(r.Fa.forEach((l,h)=>{c.push(r.Ka(h,e,t).then(f=>{var v;if((f||t)&&r.isPrimaryClient){let b=f?!f.fromCache:(v=t?.targetChanges.get(h.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(h.targetId,b?"current":"not-current")}if(f){i.push(f);let b=iu.Wi(h.targetId,f);o.push(b)}}))}),yield Promise.all(c),r.Ca.d_(i),yield function(h,f){return _(this,null,function*(){let v=Q(h);try{yield v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>R.forEach(f,S=>R.forEach(S.$i,D=>v.persistence.referenceDelegate.addReference(b,S.targetId,D)).next(()=>R.forEach(S.Ui,D=>v.persistence.referenceDelegate.removeReference(b,S.targetId,D)))))}catch(b){if(!Bs(b))throw b;k("LocalStore","Failed to update sequence numbers: "+b)}for(let b of f){let S=b.targetId;if(!b.fromCache){let D=v.os.get(S),N=D.snapshotVersion,U=D.withLastLimboFreeSnapshotVersion(N);v.os=v.os.insert(S,U)}}})}(r.localStore,o))})}function ZI(n,e){return _(this,null,function*(){let t=Q(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield np(t.localStore,e);t.currentUser=e,function(o,c){o.ka.forEach(l=>{l.forEach(h=>{h.reject(new M(C.CANCELLED,c))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $s(t,r.hs)}})}function eE(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XI.bind(null,e),e}var Ns=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=qs(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return FI(this.persistence,new ou,e.initialUser,this.serializer)}createPersistence(e){return new tu(ru.Zr,this.serializer)}createSharedClientState(e){return new cu}terminate(){return _(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Iu=class{initialize(e,t){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZI.bind(null,this.syncEngine),yield KI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new yu}()}createDatastore(e){let t=qs(e.databaseInfo.databaseId),r=function(o){return new hu(o)}(e.databaseInfo);return function(o,c,l,h){return new pu(o,c,l,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,c,l){return new gu(r,i,o,c,l)}(this.localStore,this.datastore,e.asyncQueue,t=>Sf(this.syncEngine,t,0),function(){return Ps.D()?new Ps:new uu}())}createSyncEngine(e,t){return function(i,o,c,l,h,f,v){let b=new vu(i,o,c,l,h,f);return v&&(b.Qa=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return _(this,null,function*(){var e,t;yield function(i){return _(this,null,function*(){let o=Q(i);k("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield ri(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var Eu=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=le.UNAUTHENTICATED,this.clientId=Is.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>_(this,null,function*(){k("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(k("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ut;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ap(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function cc(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield np(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Cf(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield nE(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>wf(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>wf(e.remoteStore,i)),n._onlineComponents=e})}function tE(n){return n.name==="FirebaseError"?n.code===C.FAILED_PRECONDITION||n.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function nE(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield cc(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!tE(t))throw t;ys("Error using user provided cache. Falling back to memory cache: "+t),yield cc(n,new Ns)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield cc(n,new Ns);return n._offlineComponents})}function rE(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield Cf(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield Cf(n,new Iu))),n._onlineComponents})}function iE(n){return rE(n).then(e=>e.syncEngine)}function lp(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Rf=new Map;function hp(n,e,t){if(!t)throw new M(C.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sE(n,e,t,r){if(e===!0&&r===!0)throw new M(C.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Pf(n){if(!B.isDocumentKey(n))throw new M(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Df(n){if(B.isDocumentKey(n))throw new M(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ou(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":j()}function dp(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new M(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ou(n);throw new M(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var ks=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new M(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lp((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new M(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new M(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new M(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Kn=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ks({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new M(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ks(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uc;switch(r.type){case"firstParty":return new fc(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Rf.get(t);r&&(k("ComponentProvider","Removing Datastore"),Rf.delete(t),r.terminate())}(this),Promise.resolve()}};function fp(n,e,t,r={}){var i;let o=(n=dp(n,Kn))._getSettings(),c=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==c&&ys("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:c,ssl:!1})),r.mockUserToken){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=le.MOCK_USER;else{l=dh(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new M(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new le(f)}n._authCredentials=new lc(new vs(l,h))}}var wu=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},lt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Pt=class n extends wu{constructor(e,t,r){super(e,t,aI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new B(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function pp(n,e,...t){if(n=Ae(n),hp("collection","path",e),n instanceof Kn){let r=ie.fromString(e,...t);return Df(r),new Pt(n,null,r)}{if(!(n instanceof lt||n instanceof Pt))throw new M(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ie.fromString(e,...t));return Df(r),new Pt(n.firestore,null,r)}}function mp(n,e,...t){if(n=Ae(n),arguments.length===1&&(e=Is.newId()),hp("doc","path",e),n instanceof Kn){let r=ie.fromString(e,...t);return Pf(r),new lt(n,null,new B(r))}{if(!(n instanceof lt||n instanceof Pt))throw new M(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ie.fromString(e,...t));return Pf(r),new lt(n.firestore,n instanceof Pt?n.converter:null,new B(r))}}var Tu=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Ds(this,"async_queue_retry"),this.Eu=()=>{let t=ac();t&&k("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=ac();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=ac();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new ut;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return _(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Bs(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(c){let l=c.message||"";return c.stack&&(l=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),l}(r);throw Zt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=_u.createAndSchedule(this,e,t,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&j()}verifyOperationInProgress(){}mu(){return _(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};var Vs=class extends Kn{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new Tu}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||_p(this),this._firestoreClient.terminate()}};function gp(n,e){let t=typeof n=="object"?n:vn(),r=typeof n=="string"?n:e||"(default)",i=br(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=hh("firestore");o&&fp(i,...o)}return i}function oE(n){return n._firestoreClient||_p(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function _p(n){var e,t,r;let i=n._freezeSettings(),o=function(l,h,f,v){return new vc(l,h,f,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,lp(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Eu(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var xs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ht.fromBase64String(e))}catch(t){throw new M(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Os=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new M(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ms=class{constructor(e){this._methodName=e}};var Fs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return W(this._lat,e._lat)||W(this._long,e._long)}};var Ls=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var aE=/^__.*__$/,Au=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new dt(e,this.data,this.fieldMask,t,this.fieldTransforms):new rn(e,this.data,t,this.fieldTransforms)}};function yp(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}var bu=class n{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Us(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(yp(this.wu)&&aE.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Su=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||qs(e)}Nu(e,t,r,i=!1){return new bu({wu:e,methodName:t,Ou:r,path:Pe.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function cE(n){let e=n._freezeSettings(),t=qs(n._databaseId);return new Su(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uE(n,e,t,r,i,o={}){let c=n.Nu(o.merge||o.mergeFields?2:0,e,t,i);wp("Data must be an object, but it was:",c,r);let l=Ip(r,c),h,f;if(o.merge)h=new Qe(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){let v=[];for(let b of o.mergeFields){let S=lE(e,b,t);if(!c.contains(S))throw new M(C.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);fE(v,S)||v.push(S)}h=new Qe(v),f=c.fieldTransforms.filter(b=>h.covers(b.field))}else h=null,f=c.fieldTransforms;return new Au(new Ke(l),h,f)}function vp(n,e){if(Ep(n=Ae(n)))return wp("Unsupported field value:",e,n),Ip(n,e);if(n instanceof Ms)return function(r,i){if(!yp(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],c=0;for(let l of r){let h=vp(l,i.Fu(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ae(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _I(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ee.fromDate(r);return{timestampValue:Uc(i.serializer,o)}}if(r instanceof Ee){let o=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uc(i.serializer,o)}}if(r instanceof Fs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xs)return{bytesValue:bI(i.serializer,r._byteString)};if(r instanceof lt){let o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.Mu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ep(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ls)return function(c,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(h=>{if(typeof h!="number")throw l.Mu("VectorValues must only contain numeric values.");return xu(l.serializer,h)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Ou(r)}`)}(n,e)}function Ip(n,e){let t={};return kf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ni(n,(r,i)=>{let o=vp(i,e.bu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Ep(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ee||n instanceof Fs||n instanceof xs||n instanceof lt||n instanceof Ms||n instanceof Ls)}function wp(n,e,t){if(!Ep(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Ou(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function lE(n,e,t){if((e=Ae(e))instanceof Os)return e._internalPath;if(typeof e=="string")return dE(n,e);throw Us("Field path arguments must be of type string or ",n,!1,void 0,t)}var hE=new RegExp("[~\\*/\\[\\]]");function dE(n,e,t){if(e.search(hE)>=0)throw Us(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Os(...e.split("."))._internalPath}catch{throw Us(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Us(n,e,t,r,i){let o=r&&!r.isEmpty(),c=i!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new M(C.INVALID_ARGUMENT,l+n+h)}function fE(n,e){return n.some(t=>t.isEqual(e))}function pE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}function Tp(n,e){let t=dp(n.firestore,Vs),r=mp(n),i=pE(n.converter,e);return mE(t,[uE(cE(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Yt.exists(!1))]).then(()=>r)}function mE(n,e){return function(r,i){let o=new ut;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return JI(yield iE(r),i,o)})),o.promise}(oE(n),e)}(function(e,t=!0){(function(i){Qn=i})(At),Tt(new xe("firestore",(r,{instanceIdentifier:i,options:o})=>{let c=r.getProvider("app").getImmediate(),l=new Vs(new hc(r.getProvider("auth-internal")),new mc(r.getProvider("app-check-internal")),function(f,v){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new M(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ic(f.options.projectId,v)}(c,i),c);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),oe(uf,"4.7.1",e),oe(uf,"4.7.1","esm2017")})();var sn=class{constructor(e){return e}},Ap="firestore",Mu=class{constructor(){return Sr(Ap)}};var Fu=new ke("angularfire2.firestore-instances");function gE(n,e){let t=Vi(Ap,n,e);return t&&new sn(t)}function _E(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new sn(r)}}var yE={provide:Mu,deps:[[new Ve,Fu]]},vE={provide:sn,useFactory:gE,deps:[[new Ve,Fu],it]};function bp(n,...e){return oe("angularfire",Gt.full,"fst"),ln([vE,yE,{provide:Fu,useFactory:_E(n),multi:!0,deps:[yt,Lt,Tn,$t,[new Ve,Or],[new Ve,En],...e]}])}var Sp=Le(Tp,!0);var Cp=Le(pp,!0);var Rp=Le(gp,!0);function EE(n,e){if(n&1&&(V(0,"div",9),F(1),x()),n&2){let t=Ut();ye(),dn(" ",t.msjError," ")}}var zs=class n{constructor(e,t,r){this.auth=e;this.router=t;this.firestore=r}email;password;usuarioLogueado;msjError="";accesoRapido(){this.password="test@test.com",this.email="test@test.com"}login(){Od(this.auth,this.email,this.password).then(e=>{let t=Cp(this.firestore,"logs");Sp(t,{fechaInicio:new Date,usuario:this.email}),this.router.navigate(["/home"]),localStorage.setItem("username",this.email)}).catch(e=>this.msjError="Datos Invalidos")}static \u0275fac=function(t){return new(t||n)(K(Ue),K(Ai),K(sn))};static \u0275cmp=qe({type:n,selectors:[["app-login"]],standalone:!0,features:[Ge],decls:16,vars:3,consts:[[1,"form-signin"],[1,"h3","mb-3","font-weight-normal"],["for","inputEmail",1,"sr-only"],["type","email","id","inputEmail","name","email","placeholder","Email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","inputPassword",1,"sr-only"],["type","password","id","inputPassword","name","password","placeholder","Password","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"btn","btn-lg","btn-secondary","btn-block",3,"click"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"]],template:function(t,r){t&1&&(V(0,"form",0)(1,"h1",1),F(2,"Inicia sesion"),x(),V(3,"label",2),F(4,"Email"),x(),V(5,"input",3),mn("ngModelChange",function(o){return pn(r.email,o)||(r.email=o),o}),x(),fe(6,"br"),V(7,"label",4),F(8,"Password"),x(),V(9,"input",5),mn("ngModelChange",function(o){return pn(r.password,o)||(r.password=o),o}),x(),V(10,"button",6),je("click",function(){return r.login()}),F(11,"Ingresar"),x(),V(12,"button",7),je("click",function(){return r.accesoRapido()}),F(13,"Acceso Rapido"),x(),hn(14,EE,2,1,"div",8),fe(15,"br"),x()),t&2&&(ye(5),fn("ngModel",r.email),ye(4),fn("ngModel",r.password),ye(5),tt("ngIf",r.msjError))},dependencies:[ls,us,Dn,os,as,$r,Gr,jr,gn],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding-top:40px;padding-bottom:40px}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:40px 40px 40px 38%;background-color:#f0f0f0}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}form[_ngcontent-%COMP%]{border:1px solid #ccc;box-shadow:0 10px 25px #0000001a;padding:20px;margin-bottom:20px}.alert-danger[_ngcontent-%COMP%]{margin:20px 20px 0;text-align:center}"]})};var si=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-home"]],standalone:!0,features:[Ge],decls:37,vars:0,consts:[[1,"contenedor-card"],[1,"card",2,"width","18rem"],["src","assets/ahorcado.jfif","alt","...",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["routerLink","../juegos/ahorcado",1,"btn","btn-primary"],["src","assets/pokemon.jfif","alt","...",1,"card-img-top"],["routerLink","../juegos/preguntados",1,"btn","btn-primary"],["src","assets/cartas.jfif","alt","...",1,"card-img-top"],["routerLink","../juegos/mayoromenor",1,"btn","btn-primary"],["src","...","alt","...",1,"card-img-top"],[1,"btn","btn-primary"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1),fe(2,"img",2),V(3,"div",3)(4,"h5",4),F(5,"AHORCADO"),x(),V(6,"p",5),F(7,"Ahorcado es un cl\xE1sico juego de adivinanza en el que los jugadores intentan descubrir una palabra secreta letra por letra. El objetivo es adivinar la palabra antes de que se complete el dibujo de un ahorcado, que se dibuja progresivamente con cada intento fallido."),x(),V(8,"a",6),F(9,"Jugar"),x()()(),V(10,"div",1),fe(11,"img",7),V(12,"div",3)(13,"h5",4),F(14,"PREGUNTADOS"),x(),V(15,"p",5),F(16,"Preguntados es un juego de trivia en el que los jugadores deben acertar la mayor cantidad de respuestas sobre POKEMON "),x(),V(17,"a",8),F(18,"Jugar"),x()()(),V(19,"div",1),fe(20,"img",9),V(21,"div",3)(22,"h5",4),F(23,"MAYOR O MENOR"),x(),V(24,"p",5),F(25,"Mayor o Menor es un sencillo y emocionante juego de cartas en el que los jugadores deben adivinar si la siguiente carta ser\xE1 mayor o menor que la carta actual."),x(),V(26,"a",10),F(27,"Jugar"),x()()(),V(28,"div",1),fe(29,"img",11),V(30,"div",3)(31,"h5",4),F(32,"Juego???"),x(),V(33,"p",5),F(34,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ratione, vitae illum mollitia sunt eum nulla molestias a dolorum, magnam quia ipsa. Eaque minus, laborum at soluta ab dolore fugiat repellendus?"),x(),V(35,"a",12),F(36,"Jugar"),x()()()())},dependencies:[Si,bi],styles:[".contenedor-card[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;padding:20px}.card[_ngcontent-%COMP%]{border:2px solid #007bff;border-radius:10px;overflow:hidden;box-shadow:0 4px 8px #0003}.card-img-top[_ngcontent-%COMP%]{height:180px;object-fit:cover}.card-body[_ngcontent-%COMP%]{padding:15px}.card-title[_ngcontent-%COMP%]{color:#007bff;font-weight:700}.card-text[_ngcontent-%COMP%]{color:#333}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#00408d}"]})};var Hs=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-quien-soy"]],standalone:!0,features:[Ge],decls:31,vars:0,consts:[[1,"centered-container"],[1,"component-container"],[1,"quien-soy-container"],[1,"personal-info"],["src","assets/yo.jpeg","alt","Mi Imagen",1,"profile-image"],[1,"details"],[1,"game-explanation"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),F(4,"Qui\xE9n Soy"),x(),V(5,"div",3),fe(6,"img",4),V(7,"div",5)(8,"h2"),F(9,"Datos Personales"),x(),V(10,"p")(11,"strong"),F(12,"Nombre:"),x(),F(13," Facundo Careri"),x(),V(14,"p")(15,"strong"),F(16,"Edad:"),x(),F(17," 24 a\xF1os"),x(),V(18,"p")(19,"strong"),F(20,"Curso:"),x(),F(21," LAB IV A341"),x(),V(22,"p")(23,"strong"),F(24,"Email:"),x(),F(25," facucareri@gmail.com"),x()()(),V(26,"div",6)(27,"h2"),F(28,"Explicaci\xF3n del Juego"),x(),V(29,"p"),F(30,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptate excepturi expedita fuga illo nulla voluptates reiciendis aliquam iure perferendis quis commodi, cum, debitis laborum corrupti ratione magnam quia ad cumque."),x()()()()())},styles:[".quien-soy-container[_ngcontent-%COMP%]{padding:20px;font-family:Arial,sans-serif;border:2px solid #000;border-radius:8px;box-shadow:0 4px 8px #0003}.centered-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#fff}.component-container[_ngcontent-%COMP%]{max-width:800px;width:100%}.component-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#007bff;margin-bottom:20px;border-bottom:2px solid #000;padding-bottom:10px}.details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .game-explanation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#007bff;border-bottom:2px solid #007bff;padding-bottom:5px;margin-bottom:20px}.profile-image[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;border:2px solid #000;margin-right:20px}.personal-info[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px;border:2px solid #000;border-radius:8px;padding:10px;background-color:#fff}.component-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333;margin:10px 0}.game-explanation[_ngcontent-%COMP%]{border:2px solid #000;border-radius:8px;padding:10px;background-color:#fff}"]})};function wE(n,e){if(n&1&&(V(0,"div",8),F(1),x()),n&2){let t=Ut();ye(),dn(" ",t.msjError," ")}}var Ks=class n{constructor(e,t){this.auth=e;this.router=t}nombre;email;password;admin;usuarioLogueado;msjError="";registro(){Vd(this.auth,this.email,this.password).then(e=>{e.user.email!==null&&(this.usuarioLogueado=e.user.email,this.router.navigate(["/home"]))}).catch(e=>{switch(console.log(e.code),e.code){case"auth/invalid-email":this.msjError="Email invalido";break;case"auth/email-already-in-use":this.msjError="El email ya esta en uso";break;case"auth/weak-password":this.msjError="La contrase\xF1a es muy debil";break;default:this.msjError=e.code;break}})}static \u0275fac=function(t){return new(t||n)(K(Ue),K(Ai))};static \u0275cmp=qe({type:n,selectors:[["app-registro"]],standalone:!0,features:[Ge],decls:15,vars:3,consts:[[1,"form-signin"],[1,"h3","mb-3","font-weight-normal"],["for","inputEmail",1,"sr-only"],["type","email","id","inputEmail","name","email","placeholder","Email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","inputPassword",1,"sr-only"],["type","password","id","inputPassword","name","password","placeholder","Password","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger",4,"ngIf"],[1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"alert","alert-danger"]],template:function(t,r){t&1&&(V(0,"form",0)(1,"h1",1),F(2,"Registro"),x(),V(3,"label",2),F(4,"Email"),x(),V(5,"input",3),mn("ngModelChange",function(o){return pn(r.email,o)||(r.email=o),o}),x(),fe(6,"br"),V(7,"label",4),F(8,"Password"),x(),V(9,"input",5),mn("ngModelChange",function(o){return pn(r.password,o)||(r.password=o),o}),x(),fe(10,"br"),hn(11,wE,2,1,"div",6),fe(12,"br"),V(13,"button",7),je("click",function(){return r.registro()}),F(14,"Registrar"),x()()),t&2&&(ye(5),fn("ngModel",r.email),ye(4),fn("ngModel",r.password),ye(2),tt("ngIf",r.msjError))},dependencies:[ls,us,Dn,os,as,$r,Gr,jr,gn],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding-top:40px;padding-bottom:40px}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:40px 40px 40px 38%;background-color:#f0f0f0}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}form[_ngcontent-%COMP%]{border:1px solid #ccc;box-shadow:0 10px 25px #0000001a;padding:20px;margin-bottom:20px}.alert-danger[_ngcontent-%COMP%]{text-align:center}"]})};var Pp=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"login",component:zs},{path:"home",component:si},{path:"quienSoy",component:Hs},{path:"registrar",component:Ks},{path:"juegos",loadChildren:()=>import("./chunk-K63FKJS7.js").then(n=>n.JuegosModule)},{path:"**",pathMatch:"full",component:si}];var Dp={providers:[th({eventCoalescing:!0}),oh(Pp),Oh(()=>Mh({projectId:"saladejuegos-2a39c",appId:"1:733122896022:web:52aca9a6ffcbc8751b22b7",storageBucket:"saladejuegos-2a39c.appspot.com",apiKey:"AIzaSyA3HIXqwVEPT3LZfePaID4dAb5J4T9vM4g",authDomain:"saladejuegos-2a39c.firebaseapp.com",messagingSenderId:"733122896022"})),kd(()=>xd()),bp(()=>Rp())]};function TE(n,e){if(n&1&&(V(0,"p"),F(1),x()),n&2){let t=Ut();ye(),dn(" Bienvenido ",t.auth.currentUser.email,"!")}}function AE(n,e){n&1&&(V(0,"a",15),F(1,"Login"),x())}function bE(n,e){n&1&&(V(0,"a",16),F(1,"Registrar"),x())}function SE(n,e){if(n&1){let t=Xl();V(0,"a",17),je("click",function(){Kl(t);let i=Ut();return Ql(i.logOut())}),F(1,"Log Out"),x()}}var Qs=class n{constructor(e){this.auth=e}title="salaDeJuegos";logOut(){Md(this.auth),console.log(this.auth),localStorage.removeItem("username")}ngOnChanges(e){console.log("Hola",this.auth.currentUser)}static \u0275fac=function(t){return new(t||n)(K(Ue))};static \u0275cmp=qe({type:n,selectors:[["app-root"]],standalone:!0,features:[gr,Ge],decls:20,vars:4,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary"],[1,"container-fluid"],[1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page","routerLink","home",1,"nav-link","active"],["routerLink","quienSoy",1,"nav-link"],[1,"session-container"],[4,"ngIf"],["class","btn btn-primary","routerLink","login",4,"ngIf"],["class","btn btn-primary","routerLink","registrar",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["routerLink","login",1,"btn","btn-primary"],["routerLink","registrar",1,"btn","btn-primary"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){t&1&&(V(0,"nav",0)(1,"div",1)(2,"a",2),F(3,"Sala De Juegos"),x(),V(4,"button",3),fe(5,"span",4),x(),V(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),F(10,"Home"),x()(),V(11,"li",7)(12,"a",9),F(13,"Quien Soy?"),x()()()(),V(14,"div",10),hn(15,TE,2,1,"p",11)(16,AE,2,0,"a",12)(17,bE,2,0,"a",13)(18,SE,2,0,"a",14),x()()(),fe(19,"router-outlet")),t&2&&(ye(15),tt("ngIf",r.auth.currentUser),ye(),tt("ngIf",!r.auth.currentUser),ye(),tt("ngIf",!r.auth.currentUser),ye(),tt("ngIf",r.auth.currentUser))},dependencies:[sh,rh,gn,Si,bi,ah],styles:[".navbar[_ngcontent-%COMP%]{background-color:#007bff;border-bottom:2px solid #000}.navbar-brand[_ngcontent-%COMP%]{color:#fff;font-weight:700}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fff;margin-right:15px}.navbar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{border-bottom:2px solid #fff}.login-btn[_ngcontent-%COMP%]{margin-left:1}.session-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly;color:#fff;text-align:center}.session-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem}"]})};ih(Qs,Dp).catch(n=>console.error(n));
