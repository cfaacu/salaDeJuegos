import{$ as Hd,A as _t,B as Ke,C as we,D as F,E as B,F as xe,G as di,H as vt,I as Qe,J as z,K as Ud,L as Mn,M as Ln,N as Fn,O as Un,P as ut,Q as _s,R as Bd,S as qd,T as jd,U as zo,V as $d,W as Bn,X as fi,Y as zd,Z as Gd,_ as Wd,a as Nd,aa as Go,b as Od,ba as Kd,c as ky,ca as Wo,d as xy,da as pi,e as Nn,ea as mi,f as b,fa as Ho,g as ys,ga as Ko,h as Vd,ha as gi,i as Md,ia as Qo,j as Kc,ja as Jo,k as Qc,ka as yi,l as Jc,la as Qd,m as ws,n as Ld,o as On,p as ui,q as wt,r as at,s as ct,t as li,u as _r,v as vr,w as hi,x as Vn,y as Fd,z as ae}from"./chunk-QJR4VPVA.js";var Mg=ky((Gt,Td)=>{"use strict";(function(n,e){typeof Gt=="object"&&typeof Td<"u"?Td.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=e())})(Gt,function(){"use strict";function n(c,u,f){if(typeof c=="function"?c===u:c.has(u))return arguments.length<3?u:f;throw new TypeError("Private element is not present on this object")}function e(c,u){if(u.has(c))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(c,u){return c.get(n(c,u))}function r(c,u,f){e(c,u),u.set(c,f)}function i(c,u,f){return c.set(n(c,u),f),f}let o=100,a={},h=()=>{a.previousActiveElement instanceof HTMLElement?(a.previousActiveElement.focus(),a.previousActiveElement=null):document.body&&document.body.focus()},p=c=>new Promise(u=>{if(!c)return u();let f=window.scrollX,w=window.scrollY;a.restoreFocusTimeout=setTimeout(()=>{h(),u()},o),window.scrollTo(f,w)}),m="swal2-",y=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((c,u)=>(c[u]=m+u,c),{}),D=["success","warning","info","question","error"].reduce((c,u)=>(c[u]=m+u,c),{}),L="SweetAlert2:",j=c=>c.charAt(0).toUpperCase()+c.slice(1),O=c=>{console.warn(`${L} ${typeof c=="object"?c.join(" "):c}`)},K=c=>{console.error(`${L} ${c}`)},Y=[],Z=c=>{Y.includes(c)||(Y.push(c),O(c))},le=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Z(`"${c}" is deprecated and will be removed in the next major release.${u?` Use "${u}" instead.`:""}`)},be=c=>typeof c=="function"?c():c,se=c=>c&&typeof c.toPromise=="function",C=c=>se(c)?c.toPromise():Promise.resolve(c),v=c=>c&&Promise.resolve(c)===c,I=()=>document.body.querySelector(`.${y.container}`),T=c=>{let u=I();return u?u.querySelector(c):null},A=c=>T(`.${c}`),S=()=>A(y.popup),E=()=>A(y.icon),ht=()=>A(y["icon-content"]),fn=()=>A(y.title),Hi=()=>A(y["html-container"]),pn=()=>A(y.image),Ht=()=>A(y["progress-steps"]),mn=()=>A(y["validation-message"]),tt=()=>T(`.${y.actions} .${y.confirm}`),gn=()=>T(`.${y.actions} .${y.cancel}`),ze=()=>T(`.${y.actions} .${y.deny}`),Ne=()=>A(y["input-label"]),yn=()=>T(`.${y.loader}`),dt=()=>A(y.actions),oo=()=>A(y.footer),St=()=>A(y["timer-progress-bar"]),Ki=()=>A(y.close),Pc=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,wn=()=>{let c=S();if(!c)return[];let u=c.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),f=Array.from(u).sort((U,X)=>{let ce=parseInt(U.getAttribute("tabindex")||"0"),ye=parseInt(X.getAttribute("tabindex")||"0");return ce>ye?1:ce<ye?-1:0}),w=c.querySelectorAll(Pc),R=Array.from(w).filter(U=>U.getAttribute("tabindex")!=="-1");return[...new Set(f.concat(R))].filter(U=>Ue(U))},_n=()=>nt(document.body,y.shown)&&!nt(document.body,y["toast-shown"])&&!nt(document.body,y["no-backdrop"]),vn=()=>{let c=S();return c?nt(c,y.toast):!1},Qi=()=>{let c=S();return c?c.hasAttribute("data-loading"):!1},Fe=(c,u)=>{if(c.textContent="",u){let w=new DOMParser().parseFromString(u,"text/html"),R=w.querySelector("head");R&&Array.from(R.childNodes).forEach(X=>{c.appendChild(X)});let U=w.querySelector("body");U&&Array.from(U.childNodes).forEach(X=>{X instanceof HTMLVideoElement||X instanceof HTMLAudioElement?c.appendChild(X.cloneNode(!0)):c.appendChild(X)})}},nt=(c,u)=>{if(!u)return!1;let f=u.split(/\s+/);for(let w=0;w<f.length;w++)if(!c.classList.contains(f[w]))return!1;return!0},ao=(c,u)=>{Array.from(c.classList).forEach(f=>{!Object.values(y).includes(f)&&!Object.values(D).includes(f)&&!Object.values(u.showClass||{}).includes(f)&&c.classList.remove(f)})},Ge=(c,u,f)=>{if(ao(c,u),!u.customClass)return;let w=u.customClass[f];if(w){if(typeof w!="string"&&!w.forEach){O(`Invalid type of customClass.${f}! Expected string or iterable object, got "${typeof w}"`);return}ee(c,w)}},jr=(c,u)=>{if(!u)return null;switch(u){case"select":case"textarea":case"file":return c.querySelector(`.${y.popup} > .${y[u]}`);case"checkbox":return c.querySelector(`.${y.popup} > .${y.checkbox} input`);case"radio":return c.querySelector(`.${y.popup} > .${y.radio} input:checked`)||c.querySelector(`.${y.popup} > .${y.radio} input:first-child`);case"range":return c.querySelector(`.${y.popup} > .${y.range} input`);default:return c.querySelector(`.${y.popup} > .${y.input}`)}},Ji=c=>{if(c.focus(),c.type!=="file"){let u=c.value;c.value="",c.value=u}},Yi=(c,u,f)=>{!c||!u||(typeof u=="string"&&(u=u.split(/\s+/).filter(Boolean)),u.forEach(w=>{Array.isArray(c)?c.forEach(R=>{f?R.classList.add(w):R.classList.remove(w)}):f?c.classList.add(w):c.classList.remove(w)}))},ee=(c,u)=>{Yi(c,u,!0)},rt=(c,u)=>{Yi(c,u,!1)},Ct=(c,u)=>{let f=Array.from(c.children);for(let w=0;w<f.length;w++){let R=f[w];if(R instanceof HTMLElement&&nt(R,u))return R}},ft=(c,u,f)=>{f===`${parseInt(f)}`&&(f=parseInt(f)),f||parseInt(f)===0?c.style.setProperty(u,typeof f=="number"?`${f}px`:f):c.style.removeProperty(u)},ve=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";c&&(c.style.display=u)},Te=c=>{c&&(c.style.display="none")},Ae=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";c&&new MutationObserver(()=>{Pt(c,c.innerHTML,u)}).observe(c,{childList:!0,subtree:!0})},Oe=(c,u,f,w)=>{let R=c.querySelector(u);R&&R.style.setProperty(f,w)},Pt=function(c,u){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";u?ve(c,f):Te(c)},Ue=c=>!!(c&&(c.offsetWidth||c.offsetHeight||c.getClientRects().length)),co=()=>!Ue(tt())&&!Ue(ze())&&!Ue(gn()),uo=c=>c.scrollHeight>c.clientHeight,In=c=>{let u=window.getComputedStyle(c),f=parseFloat(u.getPropertyValue("animation-duration")||"0"),w=parseFloat(u.getPropertyValue("transition-duration")||"0");return f>0||w>0},$r=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=St();f&&Ue(f)&&(u&&(f.style.transition="none",f.style.width="100%"),setTimeout(()=>{f.style.transition=`width ${c/1e3}s linear`,f.style.width="0%"},10))},lo=()=>{let c=St();if(!c)return;let u=parseInt(window.getComputedStyle(c).width);c.style.removeProperty("transition"),c.style.width="100%";let f=parseInt(window.getComputedStyle(c).width),w=u/f*100;c.style.width=`${w}%`},zr=()=>typeof window>"u"||typeof document>"u",Rc=`
 <div aria-labelledby="${y.title}" aria-describedby="${y["html-container"]}" class="${y.popup}" tabindex="-1">
   <button type="button" class="${y.close}"></button>
   <ul class="${y["progress-steps"]}"></ul>
   <div class="${y.icon}"></div>
   <img class="${y.image}" />
   <h2 class="${y.title}" id="${y.title}"></h2>
   <div class="${y["html-container"]}" id="${y["html-container"]}"></div>
   <input class="${y.input}" id="${y.input}" />
   <input type="file" class="${y.file}" />
   <div class="${y.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${y.select}" id="${y.select}"></select>
   <div class="${y.radio}"></div>
   <label class="${y.checkbox}">
     <input type="checkbox" id="${y.checkbox}" />
     <span class="${y.label}"></span>
   </label>
   <textarea class="${y.textarea}" id="${y.textarea}"></textarea>
   <div class="${y["validation-message"]}" id="${y["validation-message"]}"></div>
   <div class="${y.actions}">
     <div class="${y.loader}"></div>
     <button type="button" class="${y.confirm}"></button>
     <button type="button" class="${y.deny}"></button>
     <button type="button" class="${y.cancel}"></button>
   </div>
   <div class="${y.footer}"></div>
   <div class="${y["timer-progress-bar-container"]}">
     <div class="${y["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),kc=()=>{let c=I();return c?(c.remove(),rt([document.documentElement,document.body],[y["no-backdrop"],y["toast-shown"],y["has-column"]]),!0):!1},pt=()=>{a.currentInstance.resetValidationMessage()},ho=()=>{let c=S(),u=Ct(c,y.input),f=Ct(c,y.file),w=c.querySelector(`.${y.range} input`),R=c.querySelector(`.${y.range} output`),U=Ct(c,y.select),X=c.querySelector(`.${y.checkbox} input`),ce=Ct(c,y.textarea);u.oninput=pt,f.onchange=pt,U.onchange=pt,X.onchange=pt,ce.oninput=pt,w.oninput=()=>{pt(),R.value=w.value},w.onchange=()=>{pt(),R.value=w.value}},fo=c=>typeof c=="string"?document.querySelector(c):c,rr=c=>{let u=S();u.setAttribute("role",c.toast?"alert":"dialog"),u.setAttribute("aria-live",c.toast?"polite":"assertive"),c.toast||u.setAttribute("aria-modal","true")},Xi=c=>{window.getComputedStyle(c).direction==="rtl"&&ee(I(),y.rtl)},Zi=c=>{let u=kc();if(zr()){K("SweetAlert2 requires document to initialize");return}let f=document.createElement("div");f.className=y.container,u&&ee(f,y["no-transition"]),Fe(f,Rc);let w=fo(c.target);w.appendChild(f),rr(c),Xi(w),ho()},mt=(c,u)=>{c instanceof HTMLElement?u.appendChild(c):typeof c=="object"?po(c,u):c&&Fe(u,c)},po=(c,u)=>{c.jquery?Gr(u,c):Fe(u,c.toString())},Gr=(c,u)=>{if(c.textContent="",0 in u)for(let f=0;f in u;f++)c.appendChild(u[f].cloneNode(!0));else c.appendChild(u.cloneNode(!0))},Rt=(()=>{if(zr())return!1;let c=document.createElement("div");return typeof c.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof c.style.animation<"u"?"animationend":!1})(),ir=(c,u)=>{let f=dt(),w=yn();!f||!w||(!u.showConfirmButton&&!u.showDenyButton&&!u.showCancelButton?Te(f):ve(f),Ge(f,u,"actions"),mo(f,w,u),Fe(w,u.loaderHtml||""),Ge(w,u,"loader"))};function mo(c,u,f){let w=tt(),R=ze(),U=gn();!w||!R||!U||(Wr(w,"confirm",f),Wr(R,"deny",f),Wr(U,"cancel",f),Be(w,R,U,f),f.reverseButtons&&(f.toast?(c.insertBefore(U,w),c.insertBefore(R,w)):(c.insertBefore(U,u),c.insertBefore(R,u),c.insertBefore(w,u))))}function Be(c,u,f,w){if(!w.buttonsStyling){rt([c,u,f],y.styled);return}ee([c,u,f],y.styled),w.confirmButtonColor&&(c.style.backgroundColor=w.confirmButtonColor,ee(c,y["default-outline"])),w.denyButtonColor&&(u.style.backgroundColor=w.denyButtonColor,ee(u,y["default-outline"])),w.cancelButtonColor&&(f.style.backgroundColor=w.cancelButtonColor,ee(f,y["default-outline"]))}function Wr(c,u,f){let w=j(u);Pt(c,f[`show${w}Button`],"inline-block"),Fe(c,f[`${u}ButtonText`]||""),c.setAttribute("aria-label",f[`${u}ButtonAriaLabel`]||""),c.className=y[u],Ge(c,f,`${u}Button`)}let sr=(c,u)=>{let f=Ki();f&&(Fe(f,u.closeButtonHtml||""),Ge(f,u,"closeButton"),Pt(f,u.showCloseButton),f.setAttribute("aria-label",u.closeButtonAriaLabel||""))},or=(c,u)=>{let f=I();f&&(xc(f,u.backdrop),Dc(f,u.position),En(f,u.grow),Ge(f,u,"container"))};function xc(c,u){typeof u=="string"?c.style.background=u:u||ee([document.documentElement,document.body],y["no-backdrop"])}function Dc(c,u){u&&(u in y?ee(c,y[u]):(O('The "position" parameter is not valid, defaulting to "center"'),ee(c,y.center)))}function En(c,u){u&&ee(c,y[`grow-${u}`])}var he={innerParams:new WeakMap,domCache:new WeakMap};let Nc=["input","file","range","select","radio","checkbox","textarea"],Hr=(c,u)=>{let f=S();if(!f)return;let w=he.innerParams.get(c),R=!w||u.input!==w.input;Nc.forEach(U=>{let X=Ct(f,y[U]);X&&(Kr(U,u.inputAttributes),X.className=y[U],R&&Te(X))}),u.input&&(R&&go(u),kt(u))},go=c=>{if(!c.input)return;if(!pe[c.input]){K(`Unexpected type of input! Expected ${Object.keys(pe).join(" | ")}, got "${c.input}"`);return}let u=Jr(c.input);if(!u)return;let f=pe[c.input](u,c);ve(u),c.inputAutoFocus&&setTimeout(()=>{Ji(f)})},es=c=>{for(let u=0;u<c.attributes.length;u++){let f=c.attributes[u].name;["id","type","value","style"].includes(f)||c.removeAttribute(f)}},Kr=(c,u)=>{let f=S();if(!f)return;let w=jr(f,c);if(w){es(w);for(let R in u)w.setAttribute(R,u[R])}},kt=c=>{if(!c.input)return;let u=Jr(c.input);u&&Ge(u,c,"input")},Qr=(c,u)=>{!c.placeholder&&u.inputPlaceholder&&(c.placeholder=u.inputPlaceholder)},bn=(c,u,f)=>{if(f.inputLabel){let w=document.createElement("label"),R=y["input-label"];w.setAttribute("for",c.id),w.className=R,typeof f.customClass=="object"&&ee(w,f.customClass.inputLabel),w.innerText=f.inputLabel,u.insertAdjacentElement("beforebegin",w)}},Jr=c=>{let u=S();if(u)return Ct(u,y[c]||y.input)},Tn=(c,u)=>{["string","number"].includes(typeof u)?c.value=`${u}`:v(u)||O(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof u}"`)},pe={};pe.text=pe.email=pe.password=pe.number=pe.tel=pe.url=pe.search=pe.date=pe["datetime-local"]=pe.time=pe.week=pe.month=(c,u)=>(Tn(c,u.inputValue),bn(c,c,u),Qr(c,u),c.type=u.input,c),pe.file=(c,u)=>(bn(c,c,u),Qr(c,u),c),pe.range=(c,u)=>{let f=c.querySelector("input"),w=c.querySelector("output");return Tn(f,u.inputValue),f.type=u.input,Tn(w,u.inputValue),bn(f,c,u),c},pe.select=(c,u)=>{if(c.textContent="",u.inputPlaceholder){let f=document.createElement("option");Fe(f,u.inputPlaceholder),f.value="",f.disabled=!0,f.selected=!0,c.appendChild(f)}return bn(c,c,u),c},pe.radio=c=>(c.textContent="",c),pe.checkbox=(c,u)=>{let f=jr(S(),"checkbox");f.value="1",f.checked=!!u.inputValue;let w=c.querySelector("span");return Fe(w,u.inputPlaceholder||u.inputLabel),f},pe.textarea=(c,u)=>{Tn(c,u.inputValue),Qr(c,u),bn(c,c,u);let f=w=>parseInt(window.getComputedStyle(w).marginLeft)+parseInt(window.getComputedStyle(w).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let w=parseInt(window.getComputedStyle(S()).width),R=()=>{if(!document.body.contains(c))return;let U=c.offsetWidth+f(c);U>w?S().style.width=`${U}px`:ft(S(),"width",u.width)};new MutationObserver(R).observe(c,{attributes:!0,attributeFilter:["style"]})}}),c};let yo=(c,u)=>{let f=Hi();f&&(Ae(f),Ge(f,u,"htmlContainer"),u.html?(mt(u.html,f),ve(f,"block")):u.text?(f.textContent=u.text,ve(f,"block")):Te(f),Hr(c,u))},Oc=(c,u)=>{let f=oo();f&&(Ae(f),Pt(f,u.footer,"block"),u.footer&&mt(u.footer,f),Ge(f,u,"footer"))},Yr=(c,u)=>{let f=he.innerParams.get(c),w=E();if(w){if(f&&u.icon===f.icon){Xr(w,u),ts(w,u);return}if(!u.icon&&!u.iconHtml){Te(w);return}if(u.icon&&Object.keys(D).indexOf(u.icon)===-1){K(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${u.icon}"`),Te(w);return}ve(w),Xr(w,u),ts(w,u),ee(w,u.showClass&&u.showClass.icon)}},ts=(c,u)=>{for(let[f,w]of Object.entries(D))u.icon!==f&&rt(c,w);ee(c,u.icon&&D[u.icon]),Vc(c,u),ns(),Ge(c,u,"icon")},ns=()=>{let c=S();if(!c)return;let u=window.getComputedStyle(c).getPropertyValue("background-color"),f=c.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let w=0;w<f.length;w++)f[w].style.backgroundColor=u},ar=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Kt=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Xr=(c,u)=>{if(!u.icon&&!u.iconHtml)return;let f=c.innerHTML,w="";u.iconHtml?w=rs(u.iconHtml):u.icon==="success"?(w=ar,f=f.replace(/ style=".*?"/g,"")):u.icon==="error"?w=Kt:u.icon&&(w=rs({question:"?",warning:"!",info:"i"}[u.icon])),f.trim()!==w.trim()&&Fe(c,w)},Vc=(c,u)=>{if(u.iconColor){c.style.color=u.iconColor,c.style.borderColor=u.iconColor;for(let f of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Oe(c,f,"background-color",u.iconColor);Oe(c,".swal2-success-ring","border-color",u.iconColor)}},rs=c=>`<div class="${y["icon-content"]}">${c}</div>`,wo=(c,u)=>{let f=pn();if(f){if(!u.imageUrl){Te(f);return}ve(f,""),f.setAttribute("src",u.imageUrl),f.setAttribute("alt",u.imageAlt||""),ft(f,"width",u.imageWidth),ft(f,"height",u.imageHeight),f.className=y.image,Ge(f,u,"image")}},_o=(c,u)=>{let f=I(),w=S();if(!(!f||!w)){if(u.toast){ft(f,"width",u.width),w.style.width="100%";let R=yn();R&&w.insertBefore(R,E())}else ft(w,"width",u.width);ft(w,"padding",u.padding),u.color&&(w.style.color=u.color),u.background&&(w.style.background=u.background),Te(mn()),is(w,u)}},is=(c,u)=>{let f=u.showClass||{};c.className=`${y.popup} ${Ue(c)?f.popup:""}`,u.toast?(ee([document.documentElement,document.body],y["toast-shown"]),ee(c,y.toast)):ee(c,y.modal),Ge(c,u,"popup"),typeof u.customClass=="string"&&ee(c,u.customClass),u.icon&&ee(c,y[`icon-${u.icon}`])},ss=(c,u)=>{let f=Ht();if(!f)return;let{progressSteps:w,currentProgressStep:R}=u;if(!w||w.length===0||R===void 0){Te(f);return}ve(f),f.textContent="",R>=w.length&&O("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),w.forEach((U,X)=>{let ce=vo(U);if(f.appendChild(ce),X===R&&ee(ce,y["active-progress-step"]),X!==w.length-1){let ye=Io(u);f.appendChild(ye)}})},vo=c=>{let u=document.createElement("li");return ee(u,y["progress-step"]),Fe(u,c),u},Io=c=>{let u=document.createElement("li");return ee(u,y["progress-step-line"]),c.progressStepsDistance&&ft(u,"width",c.progressStepsDistance),u},Mc=(c,u)=>{let f=fn();f&&(Ae(f),Pt(f,u.title||u.titleText,"block"),u.title&&mt(u.title,f),u.titleText&&(f.innerText=u.titleText),Ge(f,u,"title"))},Eo=(c,u)=>{_o(c,u),or(c,u),ss(c,u),Yr(c,u),wo(c,u),Mc(c,u),sr(c,u),yo(c,u),ir(c,u),Oc(c,u);let f=S();typeof u.didRender=="function"&&f&&u.didRender(f),a.eventEmitter.emit("didRender",f)},bo=()=>Ue(S()),os=()=>{var c;return(c=tt())===null||c===void 0?void 0:c.click()},Lc=()=>{var c;return(c=ze())===null||c===void 0?void 0:c.click()},Qt=()=>{var c;return(c=gn())===null||c===void 0?void 0:c.click()},We=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),cr=c=>{c.keydownTarget&&c.keydownHandlerAdded&&(c.keydownTarget.removeEventListener("keydown",c.keydownHandler,{capture:c.keydownListenerCapture}),c.keydownHandlerAdded=!1)},Zr=(c,u,f)=>{cr(c),u.toast||(c.keydownHandler=w=>ur(u,w,f),c.keydownTarget=u.keydownListenerCapture?window:S(),c.keydownListenerCapture=u.keydownListenerCapture,c.keydownTarget.addEventListener("keydown",c.keydownHandler,{capture:c.keydownListenerCapture}),c.keydownHandlerAdded=!0)},ei=(c,u)=>{var f;let w=wn();if(w.length){c=c+u,c===w.length?c=0:c===-1&&(c=w.length-1),w[c].focus();return}(f=S())===null||f===void 0||f.focus()},de=["ArrowRight","ArrowDown"],ti=["ArrowLeft","ArrowUp"],ur=(c,u,f)=>{c&&(u.isComposing||u.keyCode===229||(c.stopKeydownPropagation&&u.stopPropagation(),u.key==="Enter"?lr(u,c):u.key==="Tab"?Fc(u):[...de,...ti].includes(u.key)?To(u.key):u.key==="Escape"&&Uc(u,c,f)))},lr=(c,u)=>{if(!be(u.allowEnterKey))return;let f=jr(S(),u.input);if(c.target&&f&&c.target instanceof HTMLElement&&c.target.outerHTML===f.outerHTML){if(["textarea","file"].includes(u.input))return;os(),c.preventDefault()}},Fc=c=>{let u=c.target,f=wn(),w=-1;for(let R=0;R<f.length;R++)if(u===f[R]){w=R;break}c.shiftKey?ei(w,-1):ei(w,1),c.stopPropagation(),c.preventDefault()},To=c=>{let u=dt(),f=tt(),w=ze(),R=gn();if(!u||!f||!w||!R)return;let U=[f,w,R];if(document.activeElement instanceof HTMLElement&&!U.includes(document.activeElement))return;let X=de.includes(c)?"nextElementSibling":"previousElementSibling",ce=document.activeElement;if(ce){for(let ye=0;ye<u.children.length;ye++){if(ce=ce[X],!ce)return;if(ce instanceof HTMLButtonElement&&Ue(ce))break}ce instanceof HTMLButtonElement&&ce.focus()}},Uc=(c,u,f)=>{be(u.allowEscapeKey)&&(c.preventDefault(),f(We.esc))};var An={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let Bc=()=>{let c=I();Array.from(document.body.children).forEach(f=>{f.contains(c)||(f.hasAttribute("aria-hidden")&&f.setAttribute("data-previous-aria-hidden",f.getAttribute("aria-hidden")||""),f.setAttribute("aria-hidden","true"))})},Ao=()=>{Array.from(document.body.children).forEach(u=>{u.hasAttribute("data-previous-aria-hidden")?(u.setAttribute("aria-hidden",u.getAttribute("data-previous-aria-hidden")||""),u.removeAttribute("data-previous-aria-hidden")):u.removeAttribute("aria-hidden")})},Sn=typeof window<"u"&&!!window.GestureEvent,xt=()=>{if(Sn&&!nt(document.body,y.iosfix)){let c=document.body.scrollTop;document.body.style.top=`${c*-1}px`,ee(document.body,y.iosfix),So()}},So=()=>{let c=I();if(!c)return;let u;c.ontouchstart=f=>{u=Co(f)},c.ontouchmove=f=>{u&&(f.preventDefault(),f.stopPropagation())}},Co=c=>{let u=c.target,f=I(),w=Hi();return!f||!w||Po(c)||Cn(c)?!1:u===f||!uo(f)&&u instanceof HTMLElement&&u.tagName!=="INPUT"&&u.tagName!=="TEXTAREA"&&!(uo(w)&&w.contains(u))},Po=c=>c.touches&&c.touches.length&&c.touches[0].touchType==="stylus",Cn=c=>c.touches&&c.touches.length>1,qc=()=>{if(nt(document.body,y.iosfix)){let c=parseInt(document.body.style.top,10);rt(document.body,y.iosfix),document.body.style.top="",document.body.scrollTop=c*-1}},jc=()=>{let c=document.createElement("div");c.className=y["scrollbar-measure"],document.body.appendChild(c);let u=c.getBoundingClientRect().width-c.clientWidth;return document.body.removeChild(c),u},Pn=null,Dt=c=>{Pn===null&&(document.body.scrollHeight>window.innerHeight||c==="scroll")&&(Pn=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Pn+jc()}px`)},$c=()=>{Pn!==null&&(document.body.style.paddingRight=`${Pn}px`,Pn=null)};function Ro(c,u,f,w){vn()?Do(c,w):(p(f).then(()=>Do(c,w)),cr(a)),Sn?(u.setAttribute("style","display:none !important"),u.removeAttribute("class"),u.innerHTML=""):u.remove(),_n()&&($c(),qc(),Ao()),hr()}function hr(){rt([document.documentElement,document.body],[y.shown,y["height-auto"],y["no-backdrop"],y["toast-shown"]])}function it(c){c=xo(c);let u=An.swalPromiseResolve.get(this),f=ko(this);this.isAwaitingPromise?c.isDismissed||(gt(this),u(c)):f&&u(c)}let ko=c=>{let u=S();if(!u)return!1;let f=he.innerParams.get(c);if(!f||nt(u,f.hideClass.popup))return!1;rt(u,f.showClass.popup),ee(u,f.hideClass.popup);let w=I();return rt(w,f.showClass.backdrop),ee(w,f.hideClass.backdrop),as(c,u,f),!0};function Rn(c){let u=An.swalPromiseReject.get(this);gt(this),u&&u(c)}let gt=c=>{c.isAwaitingPromise&&(delete c.isAwaitingPromise,he.innerParams.get(c)||c._destroy())},xo=c=>typeof c>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},c),as=(c,u,f)=>{let w=I(),R=Rt&&In(u);typeof f.willClose=="function"&&f.willClose(u),a.eventEmitter.emit("willClose",u),R?me(c,u,w,f.returnFocus,f.didClose):Ro(c,w,f.returnFocus,f.didClose)},me=(c,u,f,w,R)=>{Rt&&(a.swalCloseEventFinishedCallback=Ro.bind(null,c,f,w,R),u.addEventListener(Rt,function(U){U.target===u&&(a.swalCloseEventFinishedCallback(),delete a.swalCloseEventFinishedCallback)}))},Do=(c,u)=>{setTimeout(()=>{typeof u=="function"&&u.bind(c.params)(),a.eventEmitter.emit("didClose"),c._destroy&&c._destroy()})},kn=c=>{let u=S();if(u||new $o,u=S(),!u)return;let f=yn();vn()?Te(E()):No(u,c),ve(f),u.setAttribute("data-loading","true"),u.setAttribute("aria-busy","true"),u.focus()},No=(c,u)=>{let f=dt(),w=yn();!f||!w||(!u&&Ue(tt())&&(u=tt()),ve(f),u&&(Te(u),w.setAttribute("data-button-to-replace",u.className),f.insertBefore(w,u)),ee([c,f],y.loading))},Oo=(c,u)=>{u.input==="select"||u.input==="radio"?Lo(c,u):["text","email","number","tel","textarea"].some(f=>f===u.input)&&(se(u.inputValue)||v(u.inputValue))&&(kn(tt()),zc(c,u))},Vo=(c,u)=>{let f=c.getInput();if(!f)return null;switch(u.input){case"checkbox":return ni(f);case"radio":return Mo(f);case"file":return yt(f);default:return u.inputAutoTrim?f.value.trim():f.value}},ni=c=>c.checked?1:0,Mo=c=>c.checked?c.value:null,yt=c=>c.files&&c.files.length?c.getAttribute("multiple")!==null?c.files:c.files[0]:null,Lo=(c,u)=>{let f=S();if(!f)return;let w=R=>{u.input==="select"?dr(f,xn(R),u):u.input==="radio"&&Fo(f,xn(R),u)};se(u.inputOptions)||v(u.inputOptions)?(kn(tt()),C(u.inputOptions).then(R=>{c.hideLoading(),w(R)})):typeof u.inputOptions=="object"?w(u.inputOptions):K(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof u.inputOptions}`)},zc=(c,u)=>{let f=c.getInput();f&&(Te(f),C(u.inputValue).then(w=>{f.value=u.input==="number"?`${parseFloat(w)||0}`:`${w}`,ve(f),f.focus(),c.hideLoading()}).catch(w=>{K(`Error in inputValue promise: ${w}`),f.value="",ve(f),f.focus(),c.hideLoading()}))};function dr(c,u,f){let w=Ct(c,y.select);if(!w)return;let R=(U,X,ce)=>{let ye=document.createElement("option");ye.value=ce,Fe(ye,X),ye.selected=fr(ce,f.inputValue),U.appendChild(ye)};u.forEach(U=>{let X=U[0],ce=U[1];if(Array.isArray(ce)){let ye=document.createElement("optgroup");ye.label=X,ye.disabled=!1,w.appendChild(ye),ce.forEach(ci=>R(ye,ci[1],ci[0]))}else R(w,ce,X)}),w.focus()}function Fo(c,u,f){let w=Ct(c,y.radio);if(!w)return;u.forEach(U=>{let X=U[0],ce=U[1],ye=document.createElement("input"),ci=document.createElement("label");ye.type="radio",ye.name=y.radio,ye.value=X,fr(X,f.inputValue)&&(ye.checked=!0);let Hc=document.createElement("span");Fe(Hc,ce),Hc.className=y.label,ci.appendChild(ye),ci.appendChild(Hc),w.appendChild(ci)});let R=w.querySelectorAll("input");R.length&&R[0].focus()}let xn=c=>{let u=[];return c instanceof Map?c.forEach((f,w)=>{let R=f;typeof R=="object"&&(R=xn(R)),u.push([w,R])}):Object.keys(c).forEach(f=>{let w=c[f];typeof w=="object"&&(w=xn(w)),u.push([f,w])}),u},fr=(c,u)=>!!u&&u.toString()===c.toString(),Uo=c=>{let u=he.innerParams.get(c);c.disableButtons(),u.input?cs(c,"confirm"):mr(c,!0)},ri=c=>{let u=he.innerParams.get(c);c.disableButtons(),u.returnInputValueOnDeny?cs(c,"deny"):ii(c,!1)},Gc=(c,u)=>{c.disableButtons(),u(We.cancel)},cs=(c,u)=>{let f=he.innerParams.get(c);if(!f.input){K(`The "input" parameter is needed to be set when using returnInputValueOn${j(u)}`);return}let w=c.getInput(),R=Vo(c,f);f.inputValidator?pr(c,R,u):w&&!w.checkValidity()?(c.enableButtons(),c.showValidationMessage(f.validationMessage||w.validationMessage)):u==="deny"?ii(c,R):mr(c,R)},pr=(c,u,f)=>{let w=he.innerParams.get(c);c.disableInput(),Promise.resolve().then(()=>C(w.inputValidator(u,w.validationMessage))).then(U=>{c.enableButtons(),c.enableInput(),U?c.showValidationMessage(U):f==="deny"?ii(c,u):mr(c,u)})},ii=(c,u)=>{let f=he.innerParams.get(c||void 0);f.showLoaderOnDeny&&kn(ze()),f.preDeny?(c.isAwaitingPromise=!0,Promise.resolve().then(()=>C(f.preDeny(u,f.validationMessage))).then(R=>{R===!1?(c.hideLoading(),gt(c)):c.close({isDenied:!0,value:typeof R>"u"?u:R})}).catch(R=>si(c||void 0,R))):c.close({isDenied:!0,value:u})},us=(c,u)=>{c.close({isConfirmed:!0,value:u})},si=(c,u)=>{c.rejectPromise(u)},mr=(c,u)=>{let f=he.innerParams.get(c||void 0);f.showLoaderOnConfirm&&kn(),f.preConfirm?(c.resetValidationMessage(),c.isAwaitingPromise=!0,Promise.resolve().then(()=>C(f.preConfirm(u,f.validationMessage))).then(R=>{Ue(mn())||R===!1?(c.hideLoading(),gt(c)):us(c,typeof R>"u"?u:R)}).catch(R=>si(c||void 0,R))):us(c,u)};function gr(){let c=he.innerParams.get(this);if(!c)return;let u=he.domCache.get(this);Te(u.loader),vn()?c.icon&&ve(E()):oi(u),rt([u.popup,u.actions],y.loading),u.popup.removeAttribute("aria-busy"),u.popup.removeAttribute("data-loading"),u.confirmButton.disabled=!1,u.denyButton.disabled=!1,u.cancelButton.disabled=!1}let oi=c=>{let u=c.popup.getElementsByClassName(c.loader.getAttribute("data-button-to-replace"));u.length?ve(u[0],"inline-block"):co()&&Te(c.actions)};function ls(){let c=he.innerParams.get(this),u=he.domCache.get(this);return u?jr(u.popup,c.input):null}function hs(c,u,f){let w=he.domCache.get(c);u.forEach(R=>{w[R].disabled=f})}function Nt(c,u){let f=S();if(!(!f||!c))if(c.type==="radio"){let w=f.querySelectorAll(`[name="${y.radio}"]`);for(let R=0;R<w.length;R++)w[R].disabled=u}else c.disabled=u}function ds(){hs(this,["confirmButton","denyButton","cancelButton"],!1)}function fs(){hs(this,["confirmButton","denyButton","cancelButton"],!0)}function ps(){Nt(this.getInput(),!1)}function ms(){Nt(this.getInput(),!0)}function yr(c){let u=he.domCache.get(this),f=he.innerParams.get(this);Fe(u.validationMessage,c),u.validationMessage.className=y["validation-message"],f.customClass&&f.customClass.validationMessage&&ee(u.validationMessage,f.customClass.validationMessage),ve(u.validationMessage);let w=this.getInput();w&&(w.setAttribute("aria-invalid","true"),w.setAttribute("aria-describedby",y["validation-message"]),Ji(w),ee(w,y.inputerror))}function He(){let c=he.domCache.get(this);c.validationMessage&&Te(c.validationMessage);let u=this.getInput();u&&(u.removeAttribute("aria-invalid"),u.removeAttribute("aria-describedby"),rt(u,y.inputerror))}let Jt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Bo=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Dn={allowEnterKey:void 0},s=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],l=c=>Object.prototype.hasOwnProperty.call(Jt,c),d=c=>Bo.indexOf(c)!==-1,g=c=>Dn[c],P=c=>{l(c)||O(`Unknown parameter "${c}"`)},x=c=>{s.includes(c)&&O(`The parameter "${c}" is incompatible with toasts`)},M=c=>{let u=g(c);u&&le(c,u)},ue=c=>{c.backdrop===!1&&c.allowOutsideClick&&O('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(let u in c)P(u),c.toast&&x(u),M(u)};function Se(c){let u=S(),f=he.innerParams.get(this);if(!u||nt(u,f.hideClass.popup)){O("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let w=re(c),R=Object.assign({},f,w);Eo(this,R),he.innerParams.set(this,R),Object.defineProperties(this,{params:{value:Object.assign({},this.params,c),writable:!1,enumerable:!0}})}let re=c=>{let u={};return Object.keys(c).forEach(f=>{d(f)?u[f]=c[f]:O(`Invalid parameter to update: ${f}`)}),u};function ke(){let c=he.domCache.get(this),u=he.innerParams.get(this);if(!u){Yt(this);return}c.popup&&a.swalCloseEventFinishedCallback&&(a.swalCloseEventFinishedCallback(),delete a.swalCloseEventFinishedCallback),typeof u.didDestroy=="function"&&u.didDestroy(),a.eventEmitter.emit("didDestroy"),Ve(this)}let Ve=c=>{Yt(c),delete c.params,delete a.keydownHandler,delete a.keydownTarget,delete a.currentInstance},Yt=c=>{c.isAwaitingPromise?(Ze(he,c),c.isAwaitingPromise=!0):(Ze(An,c),Ze(he,c),delete c.isAwaitingPromise,delete c.disableButtons,delete c.enableButtons,delete c.getInput,delete c.disableInput,delete c.enableInput,delete c.hideLoading,delete c.disableLoading,delete c.showValidationMessage,delete c.resetValidationMessage,delete c.close,delete c.closePopup,delete c.closeModal,delete c.closeToast,delete c.rejectPromise,delete c.update,delete c._destroy)},Ze=(c,u)=>{for(let f in c)c[f].delete(u)};var ai=Object.freeze({__proto__:null,_destroy:ke,close:it,closeModal:it,closePopup:it,closeToast:it,disableButtons:fs,disableInput:ms,disableLoading:gr,enableButtons:ds,enableInput:ps,getInput:ls,handleAwaitingPromise:gt,hideLoading:gr,rejectPromise:Rn,resetValidationMessage:He,showValidationMessage:yr,update:Se});let gs=(c,u,f)=>{c.toast?jg(c,u,f):(zg(u),Gg(u),Wg(c,u,f))},jg=(c,u,f)=>{u.popup.onclick=()=>{c&&($g(c)||c.timer||c.input)||f(We.close)}},$g=c=>!!(c.showConfirmButton||c.showDenyButton||c.showCancelButton||c.showCloseButton),qo=!1,zg=c=>{c.popup.onmousedown=()=>{c.container.onmouseup=function(u){c.container.onmouseup=()=>{},u.target===c.container&&(qo=!0)}}},Gg=c=>{c.container.onmousedown=u=>{u.target===c.container&&u.preventDefault(),c.popup.onmouseup=function(f){c.popup.onmouseup=()=>{},(f.target===c.popup||f.target instanceof HTMLElement&&c.popup.contains(f.target))&&(qo=!0)}}},Wg=(c,u,f)=>{u.container.onclick=w=>{if(qo){qo=!1;return}w.target===u.container&&be(c.allowOutsideClick)&&f(We.backdrop)}},Hg=c=>typeof c=="object"&&c.jquery,Ad=c=>c instanceof Element||Hg(c),Kg=c=>{let u={};return typeof c[0]=="object"&&!Ad(c[0])?Object.assign(u,c[0]):["title","html","icon"].forEach((f,w)=>{let R=c[w];typeof R=="string"||Ad(R)?u[f]=R:R!==void 0&&K(`Unexpected type of ${f}! Expected "string" or "Element", got ${typeof R}`)}),u};function Qg(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];return new this(...u)}function Jg(c){class u extends this{_main(w,R){return super._main(w,Object.assign({},c,R))}}return u}let Yg=()=>a.timeout&&a.timeout.getTimerLeft(),Sd=()=>{if(a.timeout)return lo(),a.timeout.stop()},Cd=()=>{if(a.timeout){let c=a.timeout.start();return $r(c),c}},Xg=()=>{let c=a.timeout;return c&&(c.running?Sd():Cd())},Zg=c=>{if(a.timeout){let u=a.timeout.increase(c);return $r(u,!0),u}},ey=()=>!!(a.timeout&&a.timeout.isRunning()),Pd=!1,Wc={};function ty(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Wc[c]=this,Pd||(document.body.addEventListener("click",ny),Pd=!0)}let ny=c=>{for(let u=c.target;u&&u!==document;u=u.parentNode)for(let f in Wc){let w=u.getAttribute(f);if(w){Wc[f].fire({template:w});return}}};class ry{constructor(){this.events={}}_getHandlersByEventName(u){return typeof this.events[u]>"u"&&(this.events[u]=[]),this.events[u]}on(u,f){let w=this._getHandlersByEventName(u);w.includes(f)||w.push(f)}once(u,f){var w=this;let R=function(){w.removeListener(u,R);for(var U=arguments.length,X=new Array(U),ce=0;ce<U;ce++)X[ce]=arguments[ce];f.apply(w,X)};this.on(u,R)}emit(u){for(var f=arguments.length,w=new Array(f>1?f-1:0),R=1;R<f;R++)w[R-1]=arguments[R];this._getHandlersByEventName(u).forEach(U=>{try{U.apply(this,w)}catch(X){console.error(X)}})}removeListener(u,f){let w=this._getHandlersByEventName(u),R=w.indexOf(f);R>-1&&w.splice(R,1)}removeAllListeners(u){this.events[u]!==void 0&&(this.events[u].length=0)}reset(){this.events={}}}a.eventEmitter=new ry;var iy=Object.freeze({__proto__:null,argsToParams:Kg,bindClickHandler:ty,clickCancel:Qt,clickConfirm:os,clickDeny:Lc,enableLoading:kn,fire:Qg,getActions:dt,getCancelButton:gn,getCloseButton:Ki,getConfirmButton:tt,getContainer:I,getDenyButton:ze,getFocusableElements:wn,getFooter:oo,getHtmlContainer:Hi,getIcon:E,getIconContent:ht,getImage:pn,getInputLabel:Ne,getLoader:yn,getPopup:S,getProgressSteps:Ht,getTimerLeft:Yg,getTimerProgressBar:St,getTitle:fn,getValidationMessage:mn,increaseTimer:Zg,isDeprecatedParameter:g,isLoading:Qi,isTimerRunning:ey,isUpdatableParameter:d,isValidParameter:l,isVisible:bo,mixin:Jg,off:(c,u)=>{if(!c){a.eventEmitter.reset();return}u?a.eventEmitter.removeListener(c,u):a.eventEmitter.removeAllListeners(c)},on:(c,u)=>{a.eventEmitter.on(c,u)},once:(c,u)=>{a.eventEmitter.once(c,u)},resumeTimer:Cd,showLoading:kn,stopTimer:Sd,toggleTimer:Xg});class sy{constructor(u,f){this.callback=u,this.remaining=f,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(u){let f=this.running;return f&&this.stop(),this.remaining+=u,f&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let Rd=["swal-title","swal-html","swal-footer"],oy=c=>{let u=typeof c.template=="string"?document.querySelector(c.template):c.template;if(!u)return{};let f=u.content;return py(f),Object.assign(ay(f),cy(f),uy(f),ly(f),hy(f),dy(f),fy(f,Rd))},ay=c=>{let u={};return Array.from(c.querySelectorAll("swal-param")).forEach(w=>{wr(w,["name","value"]);let R=w.getAttribute("name"),U=w.getAttribute("value");!R||!U||(typeof Jt[R]=="boolean"?u[R]=U!=="false":typeof Jt[R]=="object"?u[R]=JSON.parse(U):u[R]=U)}),u},cy=c=>{let u={};return Array.from(c.querySelectorAll("swal-function-param")).forEach(w=>{let R=w.getAttribute("name"),U=w.getAttribute("value");!R||!U||(u[R]=new Function(`return ${U}`)())}),u},uy=c=>{let u={};return Array.from(c.querySelectorAll("swal-button")).forEach(w=>{wr(w,["type","color","aria-label"]);let R=w.getAttribute("type");!R||!["confirm","cancel","deny"].includes(R)||(u[`${R}ButtonText`]=w.innerHTML,u[`show${j(R)}Button`]=!0,w.hasAttribute("color")&&(u[`${R}ButtonColor`]=w.getAttribute("color")),w.hasAttribute("aria-label")&&(u[`${R}ButtonAriaLabel`]=w.getAttribute("aria-label")))}),u},ly=c=>{let u={},f=c.querySelector("swal-image");return f&&(wr(f,["src","width","height","alt"]),f.hasAttribute("src")&&(u.imageUrl=f.getAttribute("src")||void 0),f.hasAttribute("width")&&(u.imageWidth=f.getAttribute("width")||void 0),f.hasAttribute("height")&&(u.imageHeight=f.getAttribute("height")||void 0),f.hasAttribute("alt")&&(u.imageAlt=f.getAttribute("alt")||void 0)),u},hy=c=>{let u={},f=c.querySelector("swal-icon");return f&&(wr(f,["type","color"]),f.hasAttribute("type")&&(u.icon=f.getAttribute("type")),f.hasAttribute("color")&&(u.iconColor=f.getAttribute("color")),u.iconHtml=f.innerHTML),u},dy=c=>{let u={},f=c.querySelector("swal-input");f&&(wr(f,["type","label","placeholder","value"]),u.input=f.getAttribute("type")||"text",f.hasAttribute("label")&&(u.inputLabel=f.getAttribute("label")),f.hasAttribute("placeholder")&&(u.inputPlaceholder=f.getAttribute("placeholder")),f.hasAttribute("value")&&(u.inputValue=f.getAttribute("value")));let w=Array.from(c.querySelectorAll("swal-input-option"));return w.length&&(u.inputOptions={},w.forEach(R=>{wr(R,["value"]);let U=R.getAttribute("value");if(!U)return;let X=R.innerHTML;u.inputOptions[U]=X})),u},fy=(c,u)=>{let f={};for(let w in u){let R=u[w],U=c.querySelector(R);U&&(wr(U,[]),f[R.replace(/^swal-/,"")]=U.innerHTML.trim())}return f},py=c=>{let u=Rd.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(c.children).forEach(f=>{let w=f.tagName.toLowerCase();u.includes(w)||O(`Unrecognized element <${w}>`)})},wr=(c,u)=>{Array.from(c.attributes).forEach(f=>{u.indexOf(f.name)===-1&&O([`Unrecognized attribute "${f.name}" on <${c.tagName.toLowerCase()}>.`,`${u.length?`Allowed attributes are: ${u.join(", ")}`:"To set the value, use HTML within the element."}`])})},kd=10,my=c=>{let u=I(),f=S();typeof c.willOpen=="function"&&c.willOpen(f),a.eventEmitter.emit("willOpen",f);let R=window.getComputedStyle(document.body).overflowY;wy(u,f,c),setTimeout(()=>{gy(u,f)},kd),_n()&&(yy(u,c.scrollbarPadding,R),Bc()),!vn()&&!a.previousActiveElement&&(a.previousActiveElement=document.activeElement),typeof c.didOpen=="function"&&setTimeout(()=>c.didOpen(f)),a.eventEmitter.emit("didOpen",f),rt(u,y["no-transition"])},xd=c=>{let u=S();if(c.target!==u||!Rt)return;let f=I();u.removeEventListener(Rt,xd),f.style.overflowY="auto"},gy=(c,u)=>{Rt&&In(u)?(c.style.overflowY="hidden",u.addEventListener(Rt,xd)):c.style.overflowY="auto"},yy=(c,u,f)=>{xt(),u&&f!=="hidden"&&Dt(f),setTimeout(()=>{c.scrollTop=0})},wy=(c,u,f)=>{ee(c,f.showClass.backdrop),f.animation?(u.style.setProperty("opacity","0","important"),ve(u,"grid"),setTimeout(()=>{ee(u,f.showClass.popup),u.style.removeProperty("opacity")},kd)):ve(u,"grid"),ee([document.documentElement,document.body],y.shown),f.heightAuto&&f.backdrop&&!f.toast&&ee([document.documentElement,document.body],y["height-auto"])};var Dd={email:(c,u)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(c)?Promise.resolve():Promise.resolve(u||"Invalid email address"),url:(c,u)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(c)?Promise.resolve():Promise.resolve(u||"Invalid URL")};function _y(c){c.inputValidator||(c.input==="email"&&(c.inputValidator=Dd.email),c.input==="url"&&(c.inputValidator=Dd.url))}function vy(c){(!c.target||typeof c.target=="string"&&!document.querySelector(c.target)||typeof c.target!="string"&&!c.target.appendChild)&&(O('Target parameter is not valid, defaulting to "body"'),c.target="body")}function Iy(c){_y(c),c.showLoaderOnConfirm&&!c.preConfirm&&O(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),vy(c),typeof c.title=="string"&&(c.title=c.title.split(`
`).join("<br />")),Zi(c)}let Ot;var jo=new WeakMap;class Ee{constructor(){if(r(this,jo,void 0),typeof window>"u")return;Ot=this;for(var u=arguments.length,f=new Array(u),w=0;w<u;w++)f[w]=arguments[w];let R=Object.freeze(this.constructor.argsToParams(f));this.params=R,this.isAwaitingPromise=!1,i(jo,this,this._main(Ot.params))}_main(u){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ue(Object.assign({},f,u)),a.currentInstance){let U=An.swalPromiseResolve.get(a.currentInstance),{isAwaitingPromise:X}=a.currentInstance;a.currentInstance._destroy(),X||U({isDismissed:!0}),_n()&&Ao()}a.currentInstance=Ot;let w=by(u,f);Iy(w),Object.freeze(w),a.timeout&&(a.timeout.stop(),delete a.timeout),clearTimeout(a.restoreFocusTimeout);let R=Ty(Ot);return Eo(Ot,w),he.innerParams.set(Ot,w),Ey(Ot,R,w)}then(u){return t(jo,this).then(u)}finally(u){return t(jo,this).finally(u)}}let Ey=(c,u,f)=>new Promise((w,R)=>{let U=X=>{c.close({isDismissed:!0,dismiss:X})};An.swalPromiseResolve.set(c,w),An.swalPromiseReject.set(c,R),u.confirmButton.onclick=()=>{Uo(c)},u.denyButton.onclick=()=>{ri(c)},u.cancelButton.onclick=()=>{Gc(c,U)},u.closeButton.onclick=()=>{U(We.close)},gs(f,u,U),Zr(a,f,U),Oo(c,f),my(f),Ay(a,f,U),Sy(u,f),setTimeout(()=>{u.container.scrollTop=0})}),by=(c,u)=>{let f=oy(c),w=Object.assign({},Jt,u,f,c);return w.showClass=Object.assign({},Jt.showClass,w.showClass),w.hideClass=Object.assign({},Jt.hideClass,w.hideClass),w.animation===!1&&(w.showClass={backdrop:"swal2-noanimation"},w.hideClass={}),w},Ty=c=>{let u={popup:S(),container:I(),actions:dt(),confirmButton:tt(),denyButton:ze(),cancelButton:gn(),loader:yn(),closeButton:Ki(),validationMessage:mn(),progressSteps:Ht()};return he.domCache.set(c,u),u},Ay=(c,u,f)=>{let w=St();Te(w),u.timer&&(c.timeout=new sy(()=>{f("timer"),delete c.timeout},u.timer),u.timerProgressBar&&(ve(w),Ge(w,u,"timerProgressBar"),setTimeout(()=>{c.timeout&&c.timeout.running&&$r(u.timer)})))},Sy=(c,u)=>{if(!u.toast){if(!be(u.allowEnterKey)){le("allowEnterKey"),Ry();return}Cy(c)||Py(c,u)||ei(-1,1)}},Cy=c=>{let u=c.popup.querySelectorAll("[autofocus]");for(let f of u)if(f instanceof HTMLElement&&Ue(f))return f.focus(),!0;return!1},Py=(c,u)=>u.focusDeny&&Ue(c.denyButton)?(c.denyButton.focus(),!0):u.focusCancel&&Ue(c.cancelButton)?(c.cancelButton.focus(),!0):u.focusConfirm&&Ue(c.confirmButton)?(c.confirmButton.focus(),!0):!1,Ry=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let c=new Date,u=localStorage.getItem("swal-initiation");u?(c.getTime()-Date.parse(u))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let f=document.createElement("audio");f.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",f.loop=!0,document.body.appendChild(f),setTimeout(()=>{f.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${c}`)}Ee.prototype.disableButtons=fs,Ee.prototype.enableButtons=ds,Ee.prototype.getInput=ls,Ee.prototype.disableInput=ms,Ee.prototype.enableInput=ps,Ee.prototype.hideLoading=gr,Ee.prototype.disableLoading=gr,Ee.prototype.showValidationMessage=yr,Ee.prototype.resetValidationMessage=He,Ee.prototype.close=it,Ee.prototype.closePopup=it,Ee.prototype.closeModal=it,Ee.prototype.closeToast=it,Ee.prototype.rejectPromise=Rn,Ee.prototype.update=Se,Ee.prototype._destroy=ke,Object.assign(Ee,iy),Object.keys(ai).forEach(c=>{Ee[c]=function(){return Ot&&Ot[c]?Ot[c](...arguments):null}}),Ee.DismissReason=We,Ee.version="11.14.1";let $o=Ee;return $o.default=$o,$o});typeof Gt<"u"&&Gt.Sweetalert2&&(Gt.swal=Gt.sweetAlert=Gt.Swal=Gt.SweetAlert=Gt.Sweetalert2);typeof document<"u"&&function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var Yd=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Dy=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],h=n[t++],p=((i&7)<<18|(o&63)<<12|(a&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Xd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,h=a?n[i+1]:0,p=i+2<n.length,m=p?n[i+2]:0,_=o>>2,y=(o&3)<<4|h>>4,k=(h&15)<<2|m>>6,D=m&63;p||(D=64,a||(k=64)),r.push(t[_],t[y],t[k],t[D])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Yd(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Dy(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;let m=i<n.length?t[n.charAt(i)]:64;++i;let y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||h==null||m==null||y==null)throw new Xc;let k=o<<2|h>>4;if(r.push(k),m!==64){let D=h<<4&240|m>>2;if(r.push(D),y!==64){let L=m<<6&192|y;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Xc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ny=function(n){let e=Yd(n);return Xd.encodeByteArray(e,!0)},vs=function(n){return Ny(n).replace(/\./g,"")},eu=function(n){try{return Xd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Oy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Vy=()=>Oy().__FIREBASE_DEFAULTS__,My=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ly=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&eu(n[1]);return e&&JSON.parse(e)},Xo=()=>{try{return Vy()||My()||Ly()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tu=n=>{var e,t;return(t=(e=Xo())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Zd=n=>{let e=tu(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},nu=()=>{var n;return(n=Xo())===null||n===void 0?void 0:n.config},ru=n=>{var e;return(e=Xo())===null||e===void 0?void 0:e[`_${n}`]};var Yo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ef(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[vs(JSON.stringify(t)),vs(JSON.stringify(a)),""].join(".")}function Me(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function Fy(){var n;let e=(n=Xo())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nf(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sf(){let n=Me();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function of(){return!Fy()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iu(){try{return typeof indexedDB=="object"}catch{return!1}}function af(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Uy="FirebaseError",st=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Uy,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xt.prototype.create)}},Xt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?By(o,r):"Error",h=`${this.serviceName}: ${a} (${i}).`;return new st(i,h,r)}};function By(n,e){return n.replace(qy,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var qy=/\{\$([^}]+)}/g;function cf(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ir(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(Jd(o)&&Jd(a)){if(!Ir(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Jd(n){return n!==null&&typeof n=="object"}function Is(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wi(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function _i(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function uf(n,e){let t=new Zc(n,e);return t.subscribe.bind(t)}var Zc=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");jy(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Yc),i.error===void 0&&(i.error=Yc),i.complete===void 0&&(i.complete=Yc);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jy(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Yc(){}var XE=4*60*60*1e3;function qe(n){return n&&n._delegate?n._delegate:n}var lt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Er="[DEFAULT]";var su=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Yo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zy(e))try{this.getOrInitializeService({instanceIdentifier:Er})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Er){return this.instances.has(e)}getOptions(e=Er){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(o);r===h&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$y(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Er){return this.component?this.component.multipleInstances?e:Er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function $y(n){return n===Er?void 0:n}function zy(n){return n.instantiationMode==="EAGER"}var Zo=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new su(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Gy=[],te=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(te||{}),Wy={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},Hy=te.INFO,Ky={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},Qy=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Ky[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},qn=class{constructor(e){this.name=e,this._logLevel=Hy,this._logHandler=Qy,this._userLogHandler=null,Gy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wy[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var Jy=(n,e)=>e.some(t=>n instanceof t),lf,hf;function Yy(){return lf||(lf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xy(){return hf||(hf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var df=new WeakMap,au=new WeakMap,ff=new WeakMap,ou=new WeakMap,uu=new WeakMap;function Zy(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Vt(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&df.set(t,n)}).catch(()=>{}),uu.set(e,n),e}function ew(n){if(au.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});au.set(n,e)}var cu={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return au.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ff.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pf(n){cu=n(cu)}function tw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(ea(this),e,...t);return ff.set(r,e.sort?e.sort():[e]),Vt(r)}:Xy().includes(n)?function(...e){return n.apply(ea(this),e),Vt(df.get(this))}:function(...e){return Vt(n.apply(ea(this),e))}}function nw(n){return typeof n=="function"?tw(n):(n instanceof IDBTransaction&&ew(n),Jy(n,Yy())?new Proxy(n,cu):n)}function Vt(n){if(n instanceof IDBRequest)return Zy(n);if(ou.has(n))return ou.get(n);let e=nw(n);return e!==n&&(ou.set(n,e),uu.set(e,n)),e}var ea=n=>uu.get(n);function gf(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),h=Vt(a);return r&&a.addEventListener("upgradeneeded",p=>{r(Vt(a.result),p.oldVersion,p.newVersion,Vt(a.transaction),p)}),t&&a.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{o&&p.addEventListener("close",()=>o()),i&&p.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var rw=["get","getKey","getAll","getAllKeys","count"],iw=["put","add","delete","clear"],lu=new Map;function mf(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(lu.get(e))return lu.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=iw.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rw.includes(t)))return;let o=function(a,...h){return b(this,null,function*(){let p=this.transaction(a,i?"readwrite":"readonly"),m=p.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[t](...h),i&&p.done]))[0]})};return lu.set(e,o),o}pf(n=>Od(Nd({},n),{get:(e,t,r)=>mf(e,t)||n.get(e,t,r),has:(e,t)=>!!mf(e,t)||n.has(e,t)}));var du=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sw(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function sw(n){let e=n.getComponent();return e?.type==="VERSION"}var fu="@firebase/app",yf="0.10.10";var Zt=new qn("@firebase/app"),ow="@firebase/app-compat",aw="@firebase/analytics-compat",cw="@firebase/analytics",uw="@firebase/app-check-compat",lw="@firebase/app-check",hw="@firebase/auth",dw="@firebase/auth-compat",fw="@firebase/database",pw="@firebase/database-compat",mw="@firebase/functions",gw="@firebase/functions-compat",yw="@firebase/installations",ww="@firebase/installations-compat",_w="@firebase/messaging",vw="@firebase/messaging-compat",Iw="@firebase/performance",Ew="@firebase/performance-compat",bw="@firebase/remote-config",Tw="@firebase/remote-config-compat",Aw="@firebase/storage",Sw="@firebase/storage-compat",Cw="@firebase/firestore",Pw="@firebase/vertexai-preview",Rw="@firebase/firestore-compat",kw="firebase",xw="10.13.1";var pu="[DEFAULT]",Dw={[fu]:"fire-core",[ow]:"fire-core-compat",[cw]:"fire-analytics",[aw]:"fire-analytics-compat",[lw]:"fire-app-check",[uw]:"fire-app-check-compat",[hw]:"fire-auth",[dw]:"fire-auth-compat",[fw]:"fire-rtdb",[pw]:"fire-rtdb-compat",[mw]:"fire-fn",[gw]:"fire-fn-compat",[yw]:"fire-iid",[ww]:"fire-iid-compat",[_w]:"fire-fcm",[vw]:"fire-fcm-compat",[Iw]:"fire-perf",[Ew]:"fire-perf-compat",[bw]:"fire-rc",[Tw]:"fire-rc-compat",[Aw]:"fire-gcs",[Sw]:"fire-gcs-compat",[Cw]:"fire-fst",[Rw]:"fire-fst-compat",[Pw]:"fire-vertex","fire-js":"fire-js",[kw]:"fire-js-all"};var Es=new Map,Nw=new Map,mu=new Map;function wf(n,e){try{n.container.addComponent(e)}catch(t){Zt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $n(n){let e=n.name;if(mu.has(e))return Zt.debug(`There were multiple attempts to register component ${e}.`),!1;mu.set(e,n);for(let t of Es.values())wf(t,n);for(let t of Nw.values())wf(t,n);return!0}function Ts(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function It(n){return n.settings!==void 0}var Ow={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jn=new Xt("app","Firebase",Ow);var gu=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}};var zn=xw;function _u(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:pu,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw jn.create("bad-app-name",{appName:String(i)});if(t||(t=nu()),!t)throw jn.create("no-options");let o=Es.get(i);if(o){if(Ir(t,o.options)&&Ir(r,o.config))return o;throw jn.create("duplicate-app",{appName:i})}let a=new Zo(i);for(let p of mu.values())a.addComponent(p);let h=new gu(t,r,a);return Es.set(i,h),h}function vi(n=pu){let e=Es.get(n);if(!e&&n===pu&&nu())return _u();if(!e)throw jn.create("no-app",{appName:n});return e}function ta(){return Array.from(Es.values())}function De(n,e,t){var r;let i=(r=Dw[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&h.push("and"),a&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zt.warn(h.join(" "));return}$n(new lt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Vw="firebase-heartbeat-database",Mw=1,bs="firebase-heartbeat-store",hu=null;function Ef(){return hu||(hu=gf(Vw,Mw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(bs)}catch(t){console.warn(t)}}}}).catch(n=>{throw jn.create("idb-open",{originalErrorMessage:n.message})})),hu}function Lw(n){return b(this,null,function*(){try{let t=(yield Ef()).transaction(bs),r=yield t.objectStore(bs).get(bf(n));return yield t.done,r}catch(e){if(e instanceof st)Zt.warn(e.message);else{let t=jn.create("idb-get",{originalErrorMessage:e?.message});Zt.warn(t.message)}}})}function _f(n,e){return b(this,null,function*(){try{let r=(yield Ef()).transaction(bs,"readwrite");yield r.objectStore(bs).put(e,bf(n)),yield r.done}catch(t){if(t instanceof st)Zt.warn(t.message);else{let r=jn.create("idb-set",{originalErrorMessage:t?.message});Zt.warn(r.message)}}})}function bf(n){return`${n.name}!${n.options.appId}`}var Fw=1024,Uw=30*24*60*60*1e3,yu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new wu(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=vf();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let h=new Date(a.date).valueOf();return Date.now()-h<=Uw}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Zt.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=vf(),{heartbeatsToSend:r,unsentEntries:i}=Bw(this._heartbeatsCache.heartbeats),o=vs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Zt.warn(t),""}})}};function vf(){return new Date().toISOString().substring(0,10)}function Bw(n,e=Fw){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),If(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),If(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var wu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return iu()?af().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Lw(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return _f(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return _f(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function If(n){return vs(JSON.stringify({version:2,heartbeats:n})).length}function qw(n){$n(new lt("platform-logger",e=>new du(e),"PRIVATE")),$n(new lt("heartbeat",e=>new yu(e),"PRIVATE")),De(fu,yf,n),De(fu,yf,"esm2017"),De("fire-js","")}qw("");var jw="firebase",$w="10.13.1";De(jw,$w,"app");var Tr=new Bd("ANGULARFIRE2_VERSION");function ra(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var As=(n,e)=>{let t=e?[e]:ta(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},Ei=class{constructor(){return As(zw)}},zw="app-check";function Ii(){}var na=class{zone;delegate;constructor(e,t=Md){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,t,r)}},vu=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ii,{},Ii,Ii)),t.pipe(Ld({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},bi=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new na(Zone.current)),this.insideAngular=t.run(()=>new na(Zone.current,Vd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(wt(Vn))};static \u0275prov=On({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ia(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Gw(n){return ia().ngZone.runOutsideAngular(()=>n())}function br(n){return ia().ngZone.run(()=>n())}function Ww(n){return Hw(ia())(n)}function Hw(n){return function(t){return t=t.lift(new vu(n.ngZone)),t.pipe(Jc(n.outsideAngular),Qc(n.insideAngular))}}var Kw=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),br(()=>n.apply(void 0,r))},je=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=br(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ii,{},Ii,Ii))),r[o]=Kw(r[o],t));let i=Gw(()=>n.apply(this,r));if(!e)if(i instanceof ys){let o=ia();return i.pipe(Jc(o.outsideAngular),Qc(o.insideAngular))}else return br(()=>i);return i instanceof ys?i.pipe(Ww):i instanceof Promise?br(()=>new Promise((o,a)=>i.then(h=>br(()=>o(h)),h=>br(()=>a(h))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:br(()=>i)};var tn=class{constructor(e){return e}},Ar=class{constructor(){return ta()}};function Qw(n){return n&&n.length===1?n[0]:new tn(vi())}var Iu=new ui("angularfire2._apps"),Jw={provide:tn,useFactory:Qw,deps:[[new at,Iu]]},Yw={provide:Ar,deps:[[new at,Iu]]};function Xw(n){return(e,t)=>{let r=t.get(Fd);De("angularfire",Tr.full,"core"),De("angularfire",Tr.full,"app"),De("angular",qd.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new tn(i)}}function Tf(n,...e){return li([Jw,Yw,{provide:Iu,useFactory:Xw(n),multi:!0,deps:[Vn,hi,bi,...e]}])}var Af=je(_u,!0);function jf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var $f=jf,zf=new Xt("auth","Firebase",jf());var la=new qn("@firebase/auth");function Zw(n,...e){la.logLevel<=te.WARN&&la.warn(`Auth (${zn}): ${n}`,...e)}function oa(n,...e){la.logLevel<=te.ERROR&&la.error(`Auth (${zn}): ${n}`,...e)}function Lt(n,...e){throw zu(n,...e)}function Sr(n,...e){return zu(n,...e)}function Gf(n,e,t){let r=Object.assign(Object.assign({},$f()),{[e]:t});return new Xt("auth","Firebase",r).create(e,{appName:n.name})}function sn(n){return Gf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zu(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return zf.create(n,...e)}function W(n,e,...t){if(!n)throw zu(e,...t)}function nn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw oa(e),new Error(e)}function Wn(n,e){n||nn(e)}function Au(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function e_(){return Sf()==="http:"||Sf()==="https:"}function Sf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function t_(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e_()||nf()||"connection"in navigator)?navigator.onLine:!0}function n_(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Cr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wn(t>e,"Short delay should be less than long delay!"),this.isMobile=tf()||rf()}get(){return t_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Gu(n,e){Wn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ha=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var r_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var i_=new Cr(3e4,6e4);function Hn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Kn(o,a,h,p){return b(this,arguments,function*(n,e,t,r,i={}){return Wf(n,i,()=>b(this,null,function*(){let m={},_={};r&&(e==="GET"?_=r:m={body:JSON.stringify(r)});let y=Is(Object.assign({key:n.config.apiKey},_)).slice(1),k=yield n._getAdditionalHeaders();return k["Content-Type"]="application/json",n.languageCode&&(k["X-Firebase-Locale"]=n.languageCode),ha.fetch()(Hf(n,n.config.apiHost,t,y),Object.assign({method:e,headers:k,referrerPolicy:"no-referrer"},m))}))})}function Wf(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},r_),e);try{let i=new Su(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw sa(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let h=o.ok?a.errorMessage:a.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw sa(n,"credential-already-in-use",a);if(p==="EMAIL_EXISTS")throw sa(n,"email-already-in-use",a);if(p==="USER_DISABLED")throw sa(n,"user-disabled",a);let _=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Gf(n,_,m);Lt(n,_)}}catch(i){if(i instanceof st)throw i;Lt(n,"network-request-failed",{message:String(i)})}})}function Ns(o,a,h,p){return b(this,arguments,function*(n,e,t,r,i={}){let m=yield Kn(n,e,t,r,i);return"mfaPendingCredential"in m&&Lt(n,"multi-factor-auth-required",{_serverResponse:m}),m})}function Hf(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Gu(n.config,i):`${n.config.apiScheme}://${i}`}function s_(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Su=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Sr(this.auth,"network-request-failed")),i_.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function sa(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Sr(n,e,r);return i.customData._tokenResponse=t,i}function Cf(n){return n!==void 0&&n.enterprise!==void 0}var Cu=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return s_(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function o_(n,e){return b(this,null,function*(){return Kn(n,"GET","/v2/recaptchaConfig",Hn(n,e))})}function a_(n,e){return b(this,null,function*(){return Kn(n,"POST","/v1/accounts:delete",e)})}function Kf(n,e){return b(this,null,function*(){return Kn(n,"POST","/v1/accounts:lookup",e)})}function Ss(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Wu(n,e=!1){return b(this,null,function*(){let t=qe(n),r=yield t.getIdToken(e),i=Hu(r);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:Ss(Eu(i.auth_time)),issuedAtTime:Ss(Eu(i.iat)),expirationTime:Ss(Eu(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Eu(n){return Number(n)*1e3}function Hu(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return oa("JWT malformed, contained fewer than 3 sections"),null;try{let i=eu(t);return i?JSON.parse(i):(oa("Failed to decode base64 JWT payload"),null)}catch(i){return oa("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Pf(n){let e=Hu(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ps(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof st&&c_(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function c_({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Pu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Rs=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ss(this.lastLoginAt),this.creationTime=Ss(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function da(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ps(n,Kf(t,{idToken:r}));W(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Qf(o.providerUserInfo):[],h=u_(n.providerData,a),p=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!h?.length,_=p?m:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Rs(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(n,y)})}function Ku(n){return b(this,null,function*(){let e=qe(n);yield da(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function u_(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Qf(n){return n.map(e=>{var{providerId:t}=e,r=Kc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function l_(n,e){return b(this,null,function*(){let t=yield Wf(n,{},()=>b(this,null,function*(){let r=Is({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=Hf(n,i,"/v1/token",`key=${o}`),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",ha.fetch()(a,{method:"POST",headers:h,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function h_(n,e){return b(this,null,function*(){return Kn(n,"POST","/v2/accounts:revokeToken",Hn(n,e))})}var Cs=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=Pf(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield l_(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(W(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return nn("not implemented")}};function Gn(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ti=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Kc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Rs(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield Ps(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Wu(this,e)}reload(){return Ku(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield da(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(It(this.auth.app))return Promise.reject(sn(this.auth));let e=yield this.getIdToken();return yield Ps(this,a_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,h,p,m,_;let y=(r=t.displayName)!==null&&r!==void 0?r:void 0,k=(i=t.email)!==null&&i!==void 0?i:void 0,D=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,L=(a=t.photoURL)!==null&&a!==void 0?a:void 0,j=(h=t.tenantId)!==null&&h!==void 0?h:void 0,O=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,K=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Y=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Z,emailVerified:le,isAnonymous:be,providerData:se,stsTokenManager:C}=t;W(Z&&C,e,"internal-error");let v=Cs.fromJSON(this.name,C);W(typeof Z=="string",e,"internal-error"),Gn(y,e.name),Gn(k,e.name),W(typeof le=="boolean",e,"internal-error"),W(typeof be=="boolean",e,"internal-error"),Gn(D,e.name),Gn(L,e.name),Gn(j,e.name),Gn(O,e.name),Gn(K,e.name),Gn(Y,e.name);let I=new n({uid:Z,auth:e,email:k,emailVerified:le,displayName:y,isAnonymous:be,photoURL:L,phoneNumber:D,tenantId:j,stsTokenManager:v,createdAt:K,lastLoginAt:Y});return se&&Array.isArray(se)&&(I.providerData=se.map(T=>Object.assign({},T))),O&&(I._redirectEventId=O),I}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new Cs;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield da(o),o})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?Qf(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,h=new Cs;h.updateFromIdToken(r);let p=new n({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:a}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Rs(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(p,m),p})}};var Rf=new Map;function rn(n){Wn(n instanceof Function,"Expected a class definition");let e=Rf.get(n);return e?(Wn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Rf.set(n,e),e)}var d_=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Ru=d_;function aa(n,e,t){return`firebase:${n}:${e}:${t}`}var fa=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=aa(this.userKey,i.apiKey,o),this.fullPersistenceKey=aa("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ti._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(rn(Ru),e,r);let i=(yield Promise.all(t.map(m=>b(this,null,function*(){if(yield m._isAvailable())return m})))).filter(m=>m),o=i[0]||rn(Ru),a=aa(r,e.config.apiKey,e.name),h=null;for(let m of t)try{let _=yield m._get(a);if(_){let y=Ti._fromJSON(e,_);m!==o&&(h=y),o=m;break}}catch{}let p=i.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!p.length?new n(o,e,r):(o=p[0],h&&(yield o._set(a,h.toJSON())),yield Promise.all(t.map(m=>b(this,null,function*(){if(m!==o)try{yield m._remove(a)}catch{}}))),new n(o,e,r))})}};function kf(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zf(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jf(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tp(e))return"Blackberry";if(np(e))return"Webos";if(Yf(e))return"Safari";if((e.includes("chrome/")||Xf(e))&&!e.includes("edge/"))return"Chrome";if(ep(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Jf(n=Me()){return/firefox\//i.test(n)}function Yf(n=Me()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xf(n=Me()){return/crios\//i.test(n)}function Zf(n=Me()){return/iemobile/i.test(n)}function ep(n=Me()){return/android/i.test(n)}function tp(n=Me()){return/blackberry/i.test(n)}function np(n=Me()){return/webos/i.test(n)}function Qu(n=Me()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function f_(n=Me()){var e;return Qu(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p_(){return sf()&&document.documentMode===10}function rp(n=Me()){return Qu(n)||ep(n)||np(n)||tp(n)||/windows phone/i.test(n)||Zf(n)}function ip(n,e=[]){let t;switch(n){case"Browser":t=kf(Me());break;case"Worker":t=`${kf(Me())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zn}/${r}`}var ku=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,h)=>{try{let p=e(o);a(p)}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function m_(t){return b(this,arguments,function*(n,e={}){return Kn(n,"GET","/v2/passwordPolicy",Hn(n,e))})}var g_=6,xu=class{constructor(e){var t,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:g_,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,h;let p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(i=p.containsLowercaseLetter)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsUppercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsNumericCharacter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Du=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pa(this),this.idTokenSubscription=new pa(this),this.beforeStateQueue=new ku(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rn(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield fa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield Kf(this,{idToken:e}),r=yield Ti._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(It(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(h,h))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=i?._redirectEventId,p=yield this.tryRedirectSignIn(e);(!a||a===h)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield da(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=n_()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(It(this.app))return Promise.reject(sn(this));let t=e?qe(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return It(this.app)?Promise.reject(sn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return It(this.app)?Promise.reject(sn(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(rn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield m_(this),t=new xu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield h_(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&rn(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield fa.create(this,[rn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,h=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(h,this,"internal-error"),h.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let p=e.addObserver(t,r,i);return()=>{a=!0,p()}}else{let p=e.addObserver(t);return()=>{a=!0,p()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ip(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Zw(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Rr(n){return qe(n)}var pa=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=uf(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ia={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y_(n){Ia=n}function sp(n){return Ia.loadJS(n)}function w_(){return Ia.recaptchaEnterpriseScript}function __(){return Ia.gapiScript}function op(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var v_="recaptcha-enterprise",I_="NO_RECAPTCHA",Nu=class{constructor(e){this.type=v_,this.auth=Rr(e)}verify(e="verify",t=!1){return b(this,null,function*(){function r(o){return b(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,h)=>b(this,null,function*(){o_(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{let m=new Cu(p);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,a(m.siteKey)}}).catch(p=>{h(p)})}))})}function i(o,a,h){let p=window.grecaptcha;Cf(p)?p.enterprise.ready(()=>{p.enterprise.execute(o,{action:e}).then(m=>{a(m)}).catch(()=>{a(I_)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{r(this.auth).then(h=>{if(!t&&Cf(window.grecaptcha))i(h,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let p=w_();p.length!==0&&(p+=h),sp(p).then(()=>{i(h,o,a)}).catch(m=>{a(m)})}}).catch(h=>{a(h)})})})}};function xf(n,e,t,r=!1){return b(this,null,function*(){let i=new Nu(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Ou(n,e,t,r){return b(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield xf(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>b(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield xf(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)}))})}function Ju(n,e){let t=Ts(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Ir(o,e??{}))return i;Lt(i,"already-initialized")}return t.initialize({options:e})}function E_(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(rn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Yu(n,e,t){let r=Rr(n);W(r._canInitEmulator,r,"emulator-config-failed"),W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=ap(e),{host:a,port:h}=b_(e),p=h===null?"":`:${h}`;r.config.emulator={url:`${o}//${a}${p}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||T_()}function ap(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function b_(n){let e=ap(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Df(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:Df(a)}}}function Df(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function T_(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ks=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return nn("not implemented")}_getIdTokenResponse(e){return nn("not implemented")}_linkToIdToken(e,t){return nn("not implemented")}_getReauthenticationResolver(e){return nn("not implemented")}};function A_(n,e){return b(this,null,function*(){return Kn(n,"POST","/v1/accounts:signUp",e)})}function S_(n,e){return b(this,null,function*(){return Ns(n,"POST","/v1/accounts:signInWithPassword",Hn(n,e))})}function C_(n,e){return b(this,null,function*(){return Ns(n,"POST","/v1/accounts:signInWithEmailLink",Hn(n,e))})}function P_(n,e){return b(this,null,function*(){return Ns(n,"POST","/v1/accounts:signInWithEmailLink",Hn(n,e))})}var xs=class n extends ks{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return b(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ou(e,t,"signInWithPassword",S_);case"emailLink":return C_(e,{email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}})}_linkToIdToken(e,t){return b(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ou(e,r,"signUpPassword",A_);case"emailLink":return P_(e,{idToken:t,email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function bu(n,e){return b(this,null,function*(){return Ns(n,"POST","/v1/accounts:signInWithIdp",Hn(n,e))})}function R_(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function k_(n){let e=wi(_i(n)).link,t=e?wi(_i(e)).deep_link_id:null,r=wi(_i(n)).deep_link_id;return(r?wi(_i(r)).link:null)||r||t||e||n}var ma=class n{constructor(e){var t,r,i,o,a,h;let p=wi(_i(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(r=p.oobCode)!==null&&r!==void 0?r:null,y=R_((i=p.mode)!==null&&i!==void 0?i:null);W(m&&_&&y,"argument-error"),this.apiKey=m,this.operation=y,this.code=_,this.continueUrl=(o=p.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=p.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){let t=k_(e);try{return new n(t)}catch{return null}}};var cp=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return xs._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ma.parseLink(r);return W(i,"argument-error"),xs._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),ga=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Vu=class extends ga{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function x_(n,e){return b(this,null,function*(){return Ns(n,"POST","/v1/accounts:signUp",Hn(n,e))})}var Ai=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return b(this,null,function*(){let o=yield Ti._fromIdTokenResponse(e,r,i),a=Nf(r);return new n({user:o,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return b(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Nf(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Nf(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Mu=class n extends st{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function up(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Mu._fromErrorAndOperation(n,o,e,r):o})}function D_(n,e,t=!1){return b(this,null,function*(){let r=yield Ps(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ai._forOperation(n,"link",r)})}function N_(n,e,t=!1){return b(this,null,function*(){let{auth:r}=n;if(It(r.app))return Promise.reject(sn(r));let i="reauthenticate";try{let o=yield Ps(n,up(r,i,e,n),t);W(o.idToken,r,"internal-error");let a=Hu(o.idToken);W(a,r,"internal-error");let{sub:h}=a;return W(n.uid===h,r,"user-mismatch"),Ai._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Lt(r,"user-mismatch"),o}})}function lp(n,e,t=!1){return b(this,null,function*(){if(It(n.app))return Promise.reject(sn(n));let r="signIn",i=yield up(n,r,e),o=yield Ai._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Xu(n,e){return b(this,null,function*(){return lp(Rr(n),e)})}function hp(n){return b(this,null,function*(){let e=Rr(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Zu(n,e,t){return b(this,null,function*(){if(It(n.app))return Promise.reject(sn(n));let r=Rr(n),a=yield Ou(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",x_).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&hp(n),p}),h=yield Ai._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(h.user),h})}function el(n,e,t){return It(n.app)?Promise.reject(sn(n)):Xu(qe(n),cp.credential(e,t)).catch(r=>b(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&hp(n),r}))}function tl(n,e,t,r){return qe(n).onIdTokenChanged(e,t,r)}function nl(n,e,t){return qe(n).beforeAuthStateChanged(e,t)}function rl(n){return qe(n).signOut()}var ya="__sak";var wa=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ya,"1"),this.storage.removeItem(ya),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var O_=1e3,V_=10,M_=(()=>{class n extends wa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rp(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let h=this.storage.getItem(i);!r&&this.localCache[i]===h||this.notifyListeners(i,h)},a=this.storage.getItem(i);p_()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,V_):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},O_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return b(this,null,function*(){yield Nn(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return b(this,null,function*(){let r=yield Nn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return b(this,null,function*(){yield Nn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),dp=M_;var L_=(()=>{class n extends wa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),il=L_;function F_(n){return Promise.all(n.map(e=>b(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var U_=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let r=t,{eventId:i,eventType:o,data:a}=r.data,h=this.handlersMap[o];if(!h?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let p=Array.from(h).map(_=>b(this,null,function*(){return _(r.origin,a)})),m=yield F_(p);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function fp(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Lu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return b(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((h,p)=>{let m=fp("",20);i.port1.start();let _=setTimeout(()=>{p(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){let k=y;if(k.data.eventId===m)switch(k.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(k.data.response);break;default:clearTimeout(_),clearTimeout(o),p(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function Mt(){return window}function B_(n){Mt().location.href=n}function pp(){return typeof Mt().WorkerGlobalScope<"u"&&typeof Mt().importScripts=="function"}function q_(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function j_(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function $_(){return pp()?self:null}var mp="firebaseLocalStorageDb",z_=1,_a="firebaseLocalStorage",gp="fbase_key",Pr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Ea(n,e){return n.transaction([_a],e?"readwrite":"readonly").objectStore(_a)}function G_(){let n=indexedDB.deleteDatabase(mp);return new Pr(n).toPromise()}function Fu(){let n=indexedDB.open(mp,z_);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(_a,{keyPath:gp})}catch(i){t(i)}}),n.addEventListener("success",()=>b(this,null,function*(){let r=n.result;r.objectStoreNames.contains(_a)?e(r):(r.close(),yield G_(),e(yield Fu()))}))})}function Of(n,e,t){return b(this,null,function*(){let r=Ea(n,!0).put({[gp]:e,value:t});return new Pr(r).toPromise()})}function W_(n,e){return b(this,null,function*(){let t=Ea(n,!1).get(e),r=yield new Pr(t).toPromise();return r===void 0?null:r.value})}function Vf(n,e){let t=Ea(n,!0).delete(e);return new Pr(t).toPromise()}var H_=800,K_=3,Q_=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield Fu(),this.db)})}_withRetries(t){return b(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>K_)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return pp()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=U_._getInstance($_()),this.receiver._subscribe("keyChanged",(t,r)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,r;if(this.activeServiceWorker=yield q_(),!this.activeServiceWorker)return;this.sender=new Lu(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||j_()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Fu();return yield Of(t,ya,"1"),yield Vf(t,ya),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>Of(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let r=yield this._withRetries(i=>W_(i,t));return this.localCache[t]=r,r})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>Vf(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(o=>{let a=Ea(o,!1).getAll();return new Pr(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),H_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),yp=Q_;var Gb=op("rcb"),Wb=new Cr(3e4,6e4);function J_(n,e){return e?rn(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ds=class extends ks{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bu(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Y_(n){return lp(n.auth,new Ds(n),n.bypassAuthState)}function X_(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),N_(t,new Ds(n),n.bypassAuthState)}function Z_(n){return b(this,null,function*(){let{auth:e,user:t}=n;return W(t,e,"internal-error"),D_(t,new Ds(n),n.bypassAuthState)})}var Uu=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:h}=e;if(a){this.reject(a);return}let p={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(h)(p))}catch(m){this.reject(m)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y_;case"linkViaPopup":case"linkViaRedirect":return Z_;case"reauthViaPopup":case"reauthViaRedirect":return X_;default:Lt(this.auth,"internal-error")}}resolve(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Hb=new Cr(2e3,1e4);var ev="pendingRedirect",ca=new Map,Bu=class n extends Uu{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return b(this,null,function*(){let e=ca.get(this.auth._key());if(!e){try{let r=(yield tv(this.resolver,this.auth))?yield Nn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ca.set(this.auth._key(),e)}return this.bypassAuthState||ca.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return Nn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Nn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function tv(n,e){return b(this,null,function*(){let t=iv(e),r=rv(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function nv(n,e){ca.set(n._key(),e)}function rv(n){return rn(n._redirectPersistence)}function iv(n){return aa(ev,n.config.apiKey,n.name)}function sv(n,e,t=!1){return b(this,null,function*(){if(It(n.app))return Promise.reject(sn(n));let r=Rr(n),i=J_(r,e),a=yield new Bu(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var ov=10*60*1e3,qu=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!av(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!wp(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Sr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ov&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mf(e))}saveEventToCache(e){this.cachedEventUids.add(Mf(e)),this.lastProcessedEventTime=Date.now()}};function Mf(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wp({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function av(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wp(n);default:return!1}}function cv(t){return b(this,arguments,function*(n,e={}){return Kn(n,"GET","/v1/projects",e)})}var uv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lv=/^https?/;function hv(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield cv(n);for(let t of e)try{if(dv(t))return}catch{}Lt(n,"unauthorized-domain")})}function dv(n){let e=Au(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!lv.test(t))return!1;if(uv.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var fv=new Cr(3e4,6e4);function Lf(){let n=Mt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pv(n){return new Promise((e,t)=>{var r,i,o;function a(){Lf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Lf(),t(Sr(n,"network-request-failed"))},timeout:fv.get()})}if(!((i=(r=Mt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Mt().gapi)===null||o===void 0)&&o.load)a();else{let h=op("iframefcb");return Mt()[h]=()=>{gapi.load?a():t(Sr(n,"network-request-failed"))},sp(`${__()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw ua=null,e})}var ua=null;function mv(n){return ua=ua||pv(n),ua}var gv=new Cr(5e3,15e3),yv="__/auth/iframe",wv="emulator/auth/iframe",_v={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Iv(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Gu(e,wv):`https://${n.config.authDomain}/${yv}`,r={apiKey:e.apiKey,appName:n.name,v:zn},i=vv.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Is(r).slice(1)}`}function Ev(n){return b(this,null,function*(){let e=yield mv(n),t=Mt().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:Iv(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_v,dontclear:!0},r=>new Promise((i,o)=>b(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=Sr(n,"network-request-failed"),h=Mt().setTimeout(()=>{o(a)},gv.get());function p(){Mt().clearTimeout(h),i(r)}r.ping(p).then(p,()=>{o(a)})})))})}var bv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tv=500,Av=600,Sv="_blank",Cv="http://localhost",va=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Pv(n,e,t,r=Tv,i=Av){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),h="",p=Object.assign(Object.assign({},bv),{width:r.toString(),height:i.toString(),top:o,left:a}),m=Me().toLowerCase();t&&(h=Xf(m)?Sv:t),Jf(m)&&(e=e||Cv,p.scrollbars="yes");let _=Object.entries(p).reduce((k,[D,L])=>`${k}${D}=${L},`,"");if(f_(m)&&h!=="_self")return Rv(e||"",h),new va(null);let y=window.open(e||"",h,_);W(y,n,"popup-blocked");try{y.focus()}catch{}return new va(y)}function Rv(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var kv="__/auth/handler",xv="emulator/auth/handler",Dv=encodeURIComponent("fac");function Ff(n,e,t,r,i,o){return b(this,null,function*(){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:zn,eventId:i};if(e instanceof ga){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",cf(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[_,y]of Object.entries(o||{}))a[_]=y}if(e instanceof Vu){let _=e.getScopes().filter(y=>y!=="");_.length>0&&(a.scopes=_.join(","))}n.tenantId&&(a.tid=n.tenantId);let h=a;for(let _ of Object.keys(h))h[_]===void 0&&delete h[_];let p=yield n._getAppCheckToken(),m=p?`#${Dv}=${encodeURIComponent(p)}`:"";return`${Nv(n)}?${Is(h).slice(1)}${m}`})}function Nv({config:n}){return n.emulator?Gu(n,xv):`https://${n.authDomain}/${kv}`}var Tu="webStorageSupport",ju=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=il,this._completeRedirectFn=sv,this._overrideRedirectResult=nv}_openPopup(e,t,r,i){return b(this,null,function*(){var o;Wn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield Ff(e,t,r,Au(),i);return Pv(e,a,fp())})}_openRedirect(e,t,r,i){return b(this,null,function*(){yield this._originValidation(e);let o=yield Ff(e,t,r,Au(),i);return B_(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Wn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return b(this,null,function*(){let t=yield Ev(e),r=new qu(e);return t.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tu,{type:Tu},i=>{var o;let a=(o=i?.[0])===null||o===void 0?void 0:o[Tu];a!==void 0&&t(!!a),Lt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hv(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rp()||Yf()||Qu()}},_p=ju;var Uf="@firebase/auth",Bf="1.7.8";var $u=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Ov(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vv(n){$n(new lt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:h}=r.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let p={apiKey:a,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ip(n)},m=new Du(r,i,o,p);return E_(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),$n(new lt("auth-internal",e=>{let t=Rr(e.getProvider("auth").getImmediate());return(r=>new $u(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),De(Uf,Bf,Ov(n)),De(Uf,Bf,"esm2017")}var Mv=5*60,Lv=ru("authIdTokenMaxAge")||Mv,qf=null,Fv=n=>e=>b(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Lv)return;let i=t?.token;qf!==i&&(qf=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function sl(n=vi()){let e=Ts(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ju(n,{popupRedirectResolver:_p,persistence:[yp,dp,il]}),r=ru("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=Fv(o.toString());nl(t,a,()=>a(t.currentUser)),tl(t,h=>a(h))}}let i=tu("auth");return i&&Yu(t,`http://${i}`),t}function Uv(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}y_({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Sr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Uv().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vv("Browser");var vp="auth",on=class{constructor(e){return e}},Os=class{constructor(){return As(vp)}};var ol=new ui("angularfire2.auth-instances");function RI(n,e){let t=ra(vp,n,e);return t&&new on(t)}function kI(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new on(r)}}var xI={provide:Os,deps:[[new at,ol]]},DI={provide:on,useFactory:RI,deps:[[new at,ol],tn]};function Ip(n,...e){return De("angularfire",Tr.full,"auth"),li([DI,xI,{provide:ol,useFactory:kI(n),multi:!0,deps:[Vn,hi,bi,Ar,[new at,Ei],...e]}])}var Ep=je(Zu,!0);var bp=je(sl,!0);var Tp=je(el,!0);var Ap=je(rl,!0);var Cp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pp={};var Qn,al;(function(){var n;function e(C,v){function I(){}I.prototype=v.prototype,C.D=v.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(T,A,S){for(var E=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)E[ht-2]=arguments[ht];return v.prototype[A].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var A=0;16>A;++A)T[A]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(A=0;16>A;++A)T[A]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=C.g[0],I=C.g[1],A=C.g[2];var S=C.g[3],E=v+(S^I&(A^S))+T[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=S+(A^v&(I^A))+T[1]+3905402710&4294967295,S=v+(E<<12&4294967295|E>>>20),E=A+(I^S&(v^I))+T[2]+606105819&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(v^A&(S^v))+T[3]+3250441966&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(S^I&(A^S))+T[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(A^v&(I^A))+T[5]+1200080426&4294967295,S=v+(E<<12&4294967295|E>>>20),E=A+(I^S&(v^I))+T[6]+2821735955&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(v^A&(S^v))+T[7]+4249261313&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(S^I&(A^S))+T[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(A^v&(I^A))+T[9]+2336552879&4294967295,S=v+(E<<12&4294967295|E>>>20),E=A+(I^S&(v^I))+T[10]+4294925233&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(v^A&(S^v))+T[11]+2304563134&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(S^I&(A^S))+T[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(A^v&(I^A))+T[13]+4254626195&4294967295,S=v+(E<<12&4294967295|E>>>20),E=A+(I^S&(v^I))+T[14]+2792965006&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(v^A&(S^v))+T[15]+1236535329&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(A^S&(I^A))+T[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(v^I))+T[6]+3225465664&4294967295,S=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(S^v))+T[11]+643717713&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(A^S))+T[0]+3921069994&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^S&(I^A))+T[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(v^I))+T[10]+38016083&4294967295,S=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(S^v))+T[15]+3634488961&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(A^S))+T[4]+3889429448&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^S&(I^A))+T[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(v^I))+T[14]+3275163606&4294967295,S=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(S^v))+T[3]+4107603335&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(A^S))+T[8]+1163531501&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^S&(I^A))+T[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(v^I))+T[2]+4243563512&4294967295,S=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(S^v))+T[7]+1735328473&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(A^S))+T[12]+2368359562&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(I^A^S)+T[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^A)+T[8]+2272392833&4294967295,S=v+(E<<11&4294967295|E>>>21),E=A+(S^v^I)+T[11]+1839030562&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^v)+T[14]+4259657740&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^S)+T[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^A)+T[4]+1272893353&4294967295,S=v+(E<<11&4294967295|E>>>21),E=A+(S^v^I)+T[7]+4139469664&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^v)+T[10]+3200236656&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^S)+T[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^A)+T[0]+3936430074&4294967295,S=v+(E<<11&4294967295|E>>>21),E=A+(S^v^I)+T[3]+3572445317&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^v)+T[6]+76029189&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^S)+T[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^A)+T[12]+3873151461&4294967295,S=v+(E<<11&4294967295|E>>>21),E=A+(S^v^I)+T[15]+530742520&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^v)+T[2]+3299628645&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(A^(I|~S))+T[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~A))+T[7]+1126891415&4294967295,S=v+(E<<10&4294967295|E>>>22),E=A+(v^(S|~I))+T[14]+2878612391&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~v))+T[5]+4237533241&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~S))+T[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~A))+T[3]+2399980690&4294967295,S=v+(E<<10&4294967295|E>>>22),E=A+(v^(S|~I))+T[10]+4293915773&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~v))+T[1]+2240044497&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~S))+T[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~A))+T[15]+4264355552&4294967295,S=v+(E<<10&4294967295|E>>>22),E=A+(v^(S|~I))+T[6]+2734768916&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~v))+T[13]+1309151649&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~S))+T[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~A))+T[11]+3174756917&4294967295,S=v+(E<<10&4294967295|E>>>22),E=A+(v^(S|~I))+T[2]+718787259&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~v))+T[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+A&4294967295,C.g[3]=C.g[3]+S&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var I=v-this.blockSize,T=this.B,A=this.h,S=0;S<v;){if(A==0)for(;S<=I;)i(this,C,S),S+=this.blockSize;if(typeof C=="string"){for(;S<v;)if(T[A++]=C.charCodeAt(S++),A==this.blockSize){i(this,T),A=0;break}}else for(;S<v;)if(T[A++]=C[S++],A==this.blockSize){i(this,T),A=0;break}}this.h=A,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var I=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=I&255,I/=256;for(this.u(C),C=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)C[I++]=this.g[v]>>>T&255;return C};function o(C,v){var I=h;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=v(C)}function a(C,v){this.h=v;for(var I=[],T=!0,A=C.length-1;0<=A;A--){var S=C[A]|0;T&&S==v||(I[A]=S,T=!1)}this.g=I}var h={};function p(C){return-128<=C&&128>C?o(C,function(v){return new a([v|0],0>v?-1:0)}):new a([C|0],0>C?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return y;if(0>C)return O(m(-C));for(var v=[],I=1,T=0;C>=I;T++)v[T]=C/I|0,I*=4294967296;return new a(v,0)}function _(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return O(_(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(v,8)),T=y,A=0;A<C.length;A+=8){var S=Math.min(8,C.length-A),E=parseInt(C.substring(A,A+S),v);8>S?(S=m(Math.pow(v,S)),T=T.j(S).add(m(E))):(T=T.j(I),T=T.add(m(E)))}return T}var y=p(0),k=p(1),D=p(16777216);n=a.prototype,n.m=function(){if(j(this))return-O(this).m();for(var C=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);C+=(0<=T?T:4294967296+T)*v,v*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(L(this))return"0";if(j(this))return"-"+O(this).toString(C);for(var v=m(Math.pow(C,6)),I=this,T="";;){var A=le(I,v).g;I=K(I,A.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=A,L(I))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function L(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function j(C){return C.h==-1}n.l=function(C){return C=K(this,C),j(C)?-1:L(C)?0:1};function O(C){for(var v=C.g.length,I=[],T=0;T<v;T++)I[T]=~C.g[T];return new a(I,~C.h).add(k)}n.abs=function(){return j(this)?O(this):this},n.add=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0,A=0;A<=v;A++){var S=T+(this.i(A)&65535)+(C.i(A)&65535),E=(S>>>16)+(this.i(A)>>>16)+(C.i(A)>>>16);T=E>>>16,S&=65535,E&=65535,I[A]=E<<16|S}return new a(I,I[I.length-1]&-2147483648?-1:0)};function K(C,v){return C.add(O(v))}n.j=function(C){if(L(this)||L(C))return y;if(j(this))return j(C)?O(this).j(O(C)):O(O(this).j(C));if(j(C))return O(this.j(O(C)));if(0>this.l(D)&&0>C.l(D))return m(this.m()*C.m());for(var v=this.g.length+C.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var A=0;A<C.g.length;A++){var S=this.i(T)>>>16,E=this.i(T)&65535,ht=C.i(A)>>>16,fn=C.i(A)&65535;I[2*T+2*A]+=E*fn,Y(I,2*T+2*A),I[2*T+2*A+1]+=S*fn,Y(I,2*T+2*A+1),I[2*T+2*A+1]+=E*ht,Y(I,2*T+2*A+1),I[2*T+2*A+2]+=S*ht,Y(I,2*T+2*A+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new a(I,0)};function Y(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function Z(C,v){this.g=C,this.h=v}function le(C,v){if(L(v))throw Error("division by zero");if(L(C))return new Z(y,y);if(j(C))return v=le(O(C),v),new Z(O(v.g),O(v.h));if(j(v))return v=le(C,O(v)),new Z(O(v.g),v.h);if(30<C.g.length){if(j(C)||j(v))throw Error("slowDivide_ only works with positive integers.");for(var I=k,T=v;0>=T.l(C);)I=be(I),T=be(T);var A=se(I,1),S=se(T,1);for(T=se(T,2),I=se(I,2);!L(T);){var E=S.add(T);0>=E.l(C)&&(A=A.add(I),S=E),T=se(T,1),I=se(I,1)}return v=K(C,A.j(v)),new Z(A,v)}for(A=y;0<=C.l(v);){for(I=Math.max(1,Math.floor(C.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=m(I),E=S.j(v);j(E)||0<E.l(C);)I-=T,S=m(I),E=S.j(v);L(S)&&(S=k),A=A.add(S),C=K(C,E)}return new Z(A,C)}n.A=function(C){return le(this,C).h},n.and=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&C.i(T);return new a(I,this.h&C.h)},n.or=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|C.i(T);return new a(I,this.h|C.h)},n.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^C.i(T);return new a(I,this.h^C.h)};function be(C){for(var v=C.g.length+1,I=[],T=0;T<v;T++)I[T]=C.i(T)<<1|C.i(T-1)>>>31;return new a(I,C.h)}function se(C,v){var I=v>>5;v%=32;for(var T=C.g.length-I,A=[],S=0;S<T;S++)A[S]=0<v?C.i(S+I)>>>v|C.i(S+I+1)<<32-v:C.i(S+I);return new a(A,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,al=Pp.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=m,a.fromString=_,Qn=Pp.Integer=a}).apply(typeof Cp<"u"?Cp:typeof self<"u"?self:typeof window<"u"?window:{});var ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},an={};var cl,ul,Si,ll,Vs,Ta,hl,dl,fl;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,l,d){return s==Array.prototype||s==Object.prototype||(s[l]=d.value),s};function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof ba=="object"&&ba];for(var l=0;l<s.length;++l){var d=s[l];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(s,l){if(l)e:{var d=r;s=s.split(".");for(var g=0;g<s.length-1;g++){var P=s[g];if(!(P in d))break e;d=d[P]}s=s[s.length-1],g=d[s],l=l(g),l!=g&&l!=null&&e(d,s,{configurable:!0,writable:!0,value:l})}}function o(s,l){s instanceof String&&(s+="");var d=0,g=!1,P={next:function(){if(!g&&d<s.length){var x=d++;return{value:l(x,s[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(s){return s||function(){return o(this,function(l,d){return d})}});var a=a||{},h=this||self;function p(s){var l=typeof s;return l=l!="object"?l:s?Array.isArray(s)?"array":l:"null",l=="array"||l=="object"&&typeof s.length=="number"}function m(s){var l=typeof s;return l=="object"&&s!=null||l=="function"}function _(s,l,d){return s.call.apply(s.bind,arguments)}function y(s,l,d){if(!s)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,g),s.apply(l,P)}}return function(){return s.apply(l,arguments)}}function k(s,l,d){return k=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:y,k.apply(null,arguments)}function D(s,l){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),s.apply(this,g)}}function L(s,l){function d(){}d.prototype=l.prototype,s.aa=l.prototype,s.prototype=new d,s.prototype.constructor=s,s.Qb=function(g,P,x){for(var M=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)M[ue-2]=arguments[ue];return l.prototype[P].apply(g,M)}}function j(s){let l=s.length;if(0<l){let d=Array(l);for(let g=0;g<l;g++)d[g]=s[g];return d}return[]}function O(s,l){for(let d=1;d<arguments.length;d++){let g=arguments[d];if(p(g)){let P=s.length||0,x=g.length||0;s.length=P+x;for(let M=0;M<x;M++)s[P+M]=g[M]}else s.push(g)}}class K{constructor(l,d){this.i=l,this.j=d,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function Y(s){return/^[\s\xa0]*$/.test(s)}function Z(){var s=h.navigator;return s&&(s=s.userAgent)?s:""}function le(s){return le[" "](s),s}le[" "]=function(){};var be=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function se(s,l,d){for(let g in s)l.call(d,s[g],g,s)}function C(s,l){for(let d in s)l.call(void 0,s[d],d,s)}function v(s){let l={};for(let d in s)l[d]=s[d];return l}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(s,l){let d,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(d in g)s[d]=g[d];for(let x=0;x<I.length;x++)d=I[x],Object.prototype.hasOwnProperty.call(g,d)&&(s[d]=g[d])}}function A(s){var l=1;s=s.split(":");let d=[];for(;0<l&&s.length;)d.push(s.shift()),l--;return s.length&&d.push(s.join(":")),d}function S(s){h.setTimeout(()=>{throw s},0)}function E(){var s=mn;let l=null;return s.g&&(l=s.g,s.g=s.g.next,s.g||(s.h=null),l.next=null),l}class ht{constructor(){this.h=this.g=null}add(l,d){let g=fn.get();g.set(l,d),this.h?this.h.next=g:this.g=g,this.h=g}}var fn=new K(()=>new Hi,s=>s.reset());class Hi{constructor(){this.next=this.g=this.h=null}set(l,d){this.h=l,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let pn,Ht=!1,mn=new ht,tt=()=>{let s=h.Promise.resolve(void 0);pn=()=>{s.then(gn)}};var gn=()=>{for(var s;s=E();){try{s.h.call(s.g)}catch(d){S(d)}var l=fn;l.j(s),100>l.h&&(l.h++,s.next=l.g,l.g=s)}Ht=!1};function ze(){this.s=this.s,this.C=this.C}ze.prototype.s=!1,ze.prototype.ma=function(){this.s||(this.s=!0,this.N())},ze.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ne(s,l){this.type=s,this.g=this.target=l,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var yn=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var s=!1,l=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let d=()=>{};h.addEventListener("test",d,l),h.removeEventListener("test",d,l)}catch{}return s}();function dt(s,l){if(Ne.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var d=this.type=s.type,g=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=l,l=s.relatedTarget){if(be){e:{try{le(l.nodeName);var P=!0;break e}catch{}P=!1}P||(l=null)}}else d=="mouseover"?l=s.fromElement:d=="mouseout"&&(l=s.toElement);this.relatedTarget=l,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:oo[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&dt.aa.h.call(this)}}L(dt,Ne);var oo={2:"touch",3:"pen",4:"mouse"};dt.prototype.h=function(){dt.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var St="closure_listenable_"+(1e6*Math.random()|0),Ki=0;function Pc(s,l,d,g,P){this.listener=s,this.proxy=null,this.src=l,this.type=d,this.capture=!!g,this.ha=P,this.key=++Ki,this.da=this.fa=!1}function wn(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function _n(s){this.src=s,this.g={},this.h=0}_n.prototype.add=function(s,l,d,g,P){var x=s.toString();s=this.g[x],s||(s=this.g[x]=[],this.h++);var M=Qi(s,l,g,P);return-1<M?(l=s[M],d||(l.fa=!1)):(l=new Pc(l,this.src,x,!!g,P),l.fa=d,s.push(l)),l};function vn(s,l){var d=l.type;if(d in s.g){var g=s.g[d],P=Array.prototype.indexOf.call(g,l,void 0),x;(x=0<=P)&&Array.prototype.splice.call(g,P,1),x&&(wn(l),s.g[d].length==0&&(delete s.g[d],s.h--))}}function Qi(s,l,d,g){for(var P=0;P<s.length;++P){var x=s[P];if(!x.da&&x.listener==l&&x.capture==!!d&&x.ha==g)return P}return-1}var Fe="closure_lm_"+(1e6*Math.random()|0),nt={};function ao(s,l,d,g,P){if(g&&g.once)return Ji(s,l,d,g,P);if(Array.isArray(l)){for(var x=0;x<l.length;x++)ao(s,l[x],d,g,P);return null}return d=Te(d),s&&s[St]?s.K(l,d,m(g)?!!g.capture:!!g,P):Ge(s,l,d,!1,g,P)}function Ge(s,l,d,g,P,x){if(!l)throw Error("Invalid event type");var M=m(P)?!!P.capture:!!P,ue=ft(s);if(ue||(s[Fe]=ue=new _n(s)),d=ue.add(l,d,g,M,x),d.proxy)return d;if(g=jr(),d.proxy=g,g.src=s,g.listener=d,s.addEventListener)yn||(P=M),P===void 0&&(P=!1),s.addEventListener(l.toString(),g,P);else if(s.attachEvent)s.attachEvent(rt(l.toString()),g);else if(s.addListener&&s.removeListener)s.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function jr(){function s(d){return l.call(s.src,s.listener,d)}let l=Ct;return s}function Ji(s,l,d,g,P){if(Array.isArray(l)){for(var x=0;x<l.length;x++)Ji(s,l[x],d,g,P);return null}return d=Te(d),s&&s[St]?s.L(l,d,m(g)?!!g.capture:!!g,P):Ge(s,l,d,!0,g,P)}function Yi(s,l,d,g,P){if(Array.isArray(l))for(var x=0;x<l.length;x++)Yi(s,l[x],d,g,P);else g=m(g)?!!g.capture:!!g,d=Te(d),s&&s[St]?(s=s.i,l=String(l).toString(),l in s.g&&(x=s.g[l],d=Qi(x,d,g,P),-1<d&&(wn(x[d]),Array.prototype.splice.call(x,d,1),x.length==0&&(delete s.g[l],s.h--)))):s&&(s=ft(s))&&(l=s.g[l.toString()],s=-1,l&&(s=Qi(l,d,g,P)),(d=-1<s?l[s]:null)&&ee(d))}function ee(s){if(typeof s!="number"&&s&&!s.da){var l=s.src;if(l&&l[St])vn(l.i,s);else{var d=s.type,g=s.proxy;l.removeEventListener?l.removeEventListener(d,g,s.capture):l.detachEvent?l.detachEvent(rt(d),g):l.addListener&&l.removeListener&&l.removeListener(g),(d=ft(l))?(vn(d,s),d.h==0&&(d.src=null,l[Fe]=null)):wn(s)}}}function rt(s){return s in nt?nt[s]:nt[s]="on"+s}function Ct(s,l){if(s.da)s=!0;else{l=new dt(l,this);var d=s.listener,g=s.ha||s.src;s.fa&&ee(s),s=d.call(g,l)}return s}function ft(s){return s=s[Fe],s instanceof _n?s:null}var ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(s){return typeof s=="function"?s:(s[ve]||(s[ve]=function(l){return s.handleEvent(l)}),s[ve])}function Ae(){ze.call(this),this.i=new _n(this),this.M=this,this.F=null}L(Ae,ze),Ae.prototype[St]=!0,Ae.prototype.removeEventListener=function(s,l,d,g){Yi(this,s,l,d,g)};function Oe(s,l){var d,g=s.F;if(g)for(d=[];g;g=g.F)d.push(g);if(s=s.M,g=l.type||l,typeof l=="string")l=new Ne(l,s);else if(l instanceof Ne)l.target=l.target||s;else{var P=l;l=new Ne(g,s),T(l,P)}if(P=!0,d)for(var x=d.length-1;0<=x;x--){var M=l.g=d[x];P=Pt(M,g,!0,l)&&P}if(M=l.g=s,P=Pt(M,g,!0,l)&&P,P=Pt(M,g,!1,l)&&P,d)for(x=0;x<d.length;x++)M=l.g=d[x],P=Pt(M,g,!1,l)&&P}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var s=this.i,l;for(l in s.g){for(var d=s.g[l],g=0;g<d.length;g++)wn(d[g]);delete s.g[l],s.h--}}this.F=null},Ae.prototype.K=function(s,l,d,g){return this.i.add(String(s),l,!1,d,g)},Ae.prototype.L=function(s,l,d,g){return this.i.add(String(s),l,!0,d,g)};function Pt(s,l,d,g){if(l=s.i.g[String(l)],!l)return!0;l=l.concat();for(var P=!0,x=0;x<l.length;++x){var M=l[x];if(M&&!M.da&&M.capture==d){var ue=M.listener,Se=M.ha||M.src;M.fa&&vn(s.i,M),P=ue.call(Se,g)!==!1&&P}}return P&&!g.defaultPrevented}function Ue(s,l,d){if(typeof s=="function")d&&(s=k(s,d));else if(s&&typeof s.handleEvent=="function")s=k(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:h.setTimeout(s,l||0)}function co(s){s.g=Ue(()=>{s.g=null,s.i&&(s.i=!1,co(s))},s.l);let l=s.h;s.h=null,s.m.apply(null,l)}class uo extends ze{constructor(l,d){super(),this.m=l,this.l=d,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:co(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function In(s){ze.call(this),this.h=s,this.g={}}L(In,ze);var $r=[];function lo(s){se(s.g,function(l,d){this.g.hasOwnProperty(d)&&ee(l)},s),s.g={}}In.prototype.N=function(){In.aa.N.call(this),lo(this)},In.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zr=h.JSON.stringify,Rc=h.JSON.parse,kc=class{stringify(s){return h.JSON.stringify(s,void 0)}parse(s){return h.JSON.parse(s,void 0)}};function pt(){}pt.prototype.h=null;function ho(s){return s.h||(s.h=s.i())}function fo(){}var rr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xi(){Ne.call(this,"d")}L(Xi,Ne);function Zi(){Ne.call(this,"c")}L(Zi,Ne);var mt={},po=null;function Gr(){return po=po||new Ae}mt.La="serverreachability";function Rt(s){Ne.call(this,mt.La,s)}L(Rt,Ne);function ir(s){let l=Gr();Oe(l,new Rt(l))}mt.STAT_EVENT="statevent";function mo(s,l){Ne.call(this,mt.STAT_EVENT,s),this.stat=l}L(mo,Ne);function Be(s){let l=Gr();Oe(l,new mo(l,s))}mt.Ma="timingevent";function Wr(s,l){Ne.call(this,mt.Ma,s),this.size=l}L(Wr,Ne);function sr(s,l){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){s()},l)}function or(){this.g=!0}or.prototype.xa=function(){this.g=!1};function xc(s,l,d,g,P,x){s.info(function(){if(s.g)if(x)for(var M="",ue=x.split("&"),Se=0;Se<ue.length;Se++){var re=ue[Se].split("=");if(1<re.length){var ke=re[0];re=re[1];var Ve=ke.split("_");M=2<=Ve.length&&Ve[1]=="type"?M+(ke+"="+re+"&"):M+(ke+"=redacted&")}}else M=null;else M=x;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+l+`
`+d+`
`+M})}function Dc(s,l,d,g,P,x,M){s.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+l+`
`+d+`
`+x+" "+M})}function En(s,l,d,g){s.info(function(){return"XMLHTTP TEXT ("+l+"): "+Nc(s,d)+(g?" "+g:"")})}function he(s,l){s.info(function(){return"TIMEOUT: "+l})}or.prototype.info=function(){};function Nc(s,l){if(!s.g)return l;if(!l)return null;try{var d=JSON.parse(l);if(d){for(s=0;s<d.length;s++)if(Array.isArray(d[s])){var g=d[s];if(!(2>g.length)){var P=g[1];if(Array.isArray(P)&&!(1>P.length)){var x=P[0];if(x!="noop"&&x!="stop"&&x!="close")for(var M=1;M<P.length;M++)P[M]=""}}}}return zr(d)}catch{return l}}var Hr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},go={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},es;function Kr(){}L(Kr,pt),Kr.prototype.g=function(){return new XMLHttpRequest},Kr.prototype.i=function(){return{}},es=new Kr;function kt(s,l,d,g){this.j=s,this.i=l,this.l=d,this.R=g||1,this.U=new In(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qr}function Qr(){this.i=null,this.g="",this.h=!1}var bn={},Jr={};function Tn(s,l,d){s.L=1,s.v=ti(We(l)),s.m=d,s.P=!0,pe(s,null)}function pe(s,l){s.F=Date.now(),Yr(s),s.A=We(s.v);var d=s.A,g=s.R;Array.isArray(g)||(g=[String(g)]),Po(d.i,"t",g),s.C=0,d=s.j.J,s.h=new Qr,s.g=ps(s.j,d?l:null,!s.m),0<s.O&&(s.M=new uo(k(s.Y,s,s.g),s.O)),l=s.U,d=s.g,g=s.ca;var P="readystatechange";Array.isArray(P)||(P&&($r[0]=P.toString()),P=$r);for(var x=0;x<P.length;x++){var M=ao(d,P[x],g||l.handleEvent,!1,l.h||l);if(!M)break;l.g[M.key]=M}l=s.H?v(s.H):{},s.m?(s.u||(s.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,l)):(s.u="GET",s.g.ea(s.A,s.u,null,l)),ir(),xc(s.i,s.u,s.A,s.l,s.R,s.m)}kt.prototype.ca=function(s){s=s.target;let l=this.M;l&&yt(s)==3?l.j():this.Y(s)},kt.prototype.Y=function(s){try{if(s==this.g)e:{let Ve=yt(this.g);var l=this.g.Ba();let Yt=this.g.Z();if(!(3>Ve)&&(Ve!=3||this.g&&(this.h.h||this.g.oa()||Lo(this.g)))){this.J||Ve!=4||l==7||(l==8||0>=Yt?ir(3):ir(2)),ns(this);var d=this.g.Z();this.X=d;t:if(yo(this)){var g=Lo(this.g);s="";var P=g.length,x=yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kt(this),ar(this);var M="";break t}this.h.i=new h.TextDecoder}for(l=0;l<P;l++)this.h.h=!0,s+=this.h.i.decode(g[l],{stream:!(x&&l==P-1)});g.length=0,this.h.g+=s,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=d==200,Dc(this.i,this.u,this.A,this.l,this.R,Ve,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ue,Se=this.g;if((ue=Se.g?Se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(ue)){var re=ue;break t}}re=null}if(d=re)En(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xr(this,d);else{this.o=!1,this.s=3,Be(12),Kt(this),ar(this);break e}}if(this.P){d=!0;let Ze;for(;!this.J&&this.C<M.length;)if(Ze=Oc(this,M),Ze==Jr){Ve==4&&(this.s=4,Be(14),d=!1),En(this.i,this.l,null,"[Incomplete Response]");break}else if(Ze==bn){this.s=4,Be(15),En(this.i,this.l,M,"[Invalid Chunk]"),d=!1;break}else En(this.i,this.l,Ze,null),Xr(this,Ze);if(yo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||M.length!=0||this.h.h||(this.s=1,Be(16),d=!1),this.o=this.o&&d,!d)En(this.i,this.l,M,"[Invalid Chunked Response]"),Kt(this),ar(this);else if(0<M.length&&!this.W){this.W=!0;var ke=this.j;ke.g==this&&ke.ba&&!ke.M&&(ke.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),mr(ke),ke.M=!0,Be(11))}}else En(this.i,this.l,M,null),Xr(this,M);Ve==4&&Kt(this),this.o&&!this.J&&(Ve==4?ls(this.j,this):(this.o=!1,Yr(this)))}else zc(this.g),d==400&&0<M.indexOf("Unknown SID")?(this.s=3,Be(12)):(this.s=0,Be(13)),Kt(this),ar(this)}}}catch{}finally{}};function yo(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function Oc(s,l){var d=s.C,g=l.indexOf(`
`,d);return g==-1?Jr:(d=Number(l.substring(d,g)),isNaN(d)?bn:(g+=1,g+d>l.length?Jr:(l=l.slice(g,g+d),s.C=g+d,l)))}kt.prototype.cancel=function(){this.J=!0,Kt(this)};function Yr(s){s.S=Date.now()+s.I,ts(s,s.I)}function ts(s,l){if(s.B!=null)throw Error("WatchDog timer not null");s.B=sr(k(s.ba,s),l)}function ns(s){s.B&&(h.clearTimeout(s.B),s.B=null)}kt.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(he(this.i,this.A),this.L!=2&&(ir(),Be(17)),Kt(this),this.s=2,ar(this)):ts(this,this.S-s)};function ar(s){s.j.G==0||s.J||ls(s.j,s)}function Kt(s){ns(s);var l=s.M;l&&typeof l.ma=="function"&&l.ma(),s.M=null,lo(s.U),s.g&&(l=s.g,s.g=null,l.abort(),l.ma())}function Xr(s,l){try{var d=s.j;if(d.G!=0&&(d.g==s||is(d.h,s))){if(!s.K&&is(d.h,s)&&d.G==3){try{var g=d.Da.g.parse(l)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<s.F)oi(d),fr(d);else break e;si(d),Be(18)}}else d.za=P[1],0<d.za-d.T&&37500>P[2]&&d.F&&d.v==0&&!d.C&&(d.C=sr(k(d.Za,d),6e3));if(1>=_o(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Nt(d,11)}else if((s.K||d.g==s)&&oi(d),!Y(l))for(P=d.Da.g.parse(l),l=0;l<P.length;l++){let re=P[l];if(d.T=re[0],re=re[1],d.G==2)if(re[0]=="c"){d.K=re[1],d.ia=re[2];let ke=re[3];ke!=null&&(d.la=ke,d.j.info("VER="+d.la));let Ve=re[4];Ve!=null&&(d.Aa=Ve,d.j.info("SVER="+d.Aa));let Yt=re[5];Yt!=null&&typeof Yt=="number"&&0<Yt&&(g=1.5*Yt,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;let Ze=s.g;if(Ze){let ai=Ze.g?Ze.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ai){var x=g.h;x.g||ai.indexOf("spdy")==-1&&ai.indexOf("quic")==-1&&ai.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(ss(x,x.h),x.h=null))}if(g.D){let gs=Ze.g?Ze.g.getResponseHeader("X-HTTP-Session-Id"):null;gs&&(g.ya=gs,de(g.I,g.D,gs))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-s.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var M=s;if(g.qa=fs(g,g.J?g.ia:null,g.W),M.K){vo(g.h,M);var ue=M,Se=g.L;Se&&(ue.I=Se),ue.B&&(ns(ue),Yr(ue)),g.g=M}else us(g);0<d.i.length&&ri(d)}else re[0]!="stop"&&re[0]!="close"||Nt(d,7);else d.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?Nt(d,7):xn(d):re[0]!="noop"&&d.l&&d.l.ta(re),d.v=0)}}ir(4)}catch{}}var Vc=class{constructor(s,l){this.g=s,this.map=l}};function rs(s){this.l=s||10,h.PerformanceNavigationTiming?(s=h.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wo(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function _o(s){return s.h?1:s.g?s.g.size:0}function is(s,l){return s.h?s.h==l:s.g?s.g.has(l):!1}function ss(s,l){s.g?s.g.add(l):s.h=l}function vo(s,l){s.h&&s.h==l?s.h=null:s.g&&s.g.has(l)&&s.g.delete(l)}rs.prototype.cancel=function(){if(this.i=Io(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function Io(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let l=s.i;for(let d of s.g.values())l=l.concat(d.D);return l}return j(s.i)}function Mc(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(p(s)){for(var l=[],d=s.length,g=0;g<d;g++)l.push(s[g]);return l}l=[],d=0;for(g in s)l[d++]=s[g];return l}function Eo(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(p(s)||typeof s=="string"){var l=[];s=s.length;for(var d=0;d<s;d++)l.push(d);return l}l=[],d=0;for(let g in s)l[d++]=g;return l}}}function bo(s,l){if(s.forEach&&typeof s.forEach=="function")s.forEach(l,void 0);else if(p(s)||typeof s=="string")Array.prototype.forEach.call(s,l,void 0);else for(var d=Eo(s),g=Mc(s),P=g.length,x=0;x<P;x++)l.call(void 0,g[x],d&&d[x],s)}var os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lc(s,l){if(s){s=s.split("&");for(var d=0;d<s.length;d++){var g=s[d].indexOf("="),P=null;if(0<=g){var x=s[d].substring(0,g);P=s[d].substring(g+1)}else x=s[d];l(x,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Qt(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof Qt){this.h=s.h,cr(this,s.j),this.o=s.o,this.g=s.g,Zr(this,s.s),this.l=s.l;var l=s.i,d=new Sn;d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),ei(this,d),this.m=s.m}else s&&(l=String(s).match(os))?(this.h=!1,cr(this,l[1]||"",!0),this.o=ur(l[2]||""),this.g=ur(l[3]||"",!0),Zr(this,l[4]),this.l=ur(l[5]||"",!0),ei(this,l[6]||"",!0),this.m=ur(l[7]||"")):(this.h=!1,this.i=new Sn(null,this.h))}Qt.prototype.toString=function(){var s=[],l=this.j;l&&s.push(lr(l,To,!0),":");var d=this.g;return(d||l=="file")&&(s.push("//"),(l=this.o)&&s.push(lr(l,To,!0),"@"),s.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&s.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&s.push("/"),s.push(lr(d,d.charAt(0)=="/"?An:Uc,!0))),(d=this.i.toString())&&s.push("?",d),(d=this.m)&&s.push("#",lr(d,Ao)),s.join("")};function We(s){return new Qt(s)}function cr(s,l,d){s.j=d?ur(l,!0):l,s.j&&(s.j=s.j.replace(/:$/,""))}function Zr(s,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);s.s=l}else s.s=null}function ei(s,l,d){l instanceof Sn?(s.i=l,qc(s.i,s.h)):(d||(l=lr(l,Bc)),s.i=new Sn(l,s.h))}function de(s,l,d){s.i.set(l,d)}function ti(s){return de(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function ur(s,l){return s?l?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function lr(s,l,d){return typeof s=="string"?(s=encodeURI(s).replace(l,Fc),d&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function Fc(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var To=/[#\/\?@]/g,Uc=/[#\?:]/g,An=/[#\?]/g,Bc=/[#\?@]/g,Ao=/#/g;function Sn(s,l){this.h=this.g=null,this.i=s||null,this.j=!!l}function xt(s){s.g||(s.g=new Map,s.h=0,s.i&&Lc(s.i,function(l,d){s.add(decodeURIComponent(l.replace(/\+/g," ")),d)}))}n=Sn.prototype,n.add=function(s,l){xt(this),this.i=null,s=Cn(this,s);var d=this.g.get(s);return d||this.g.set(s,d=[]),d.push(l),this.h+=1,this};function So(s,l){xt(s),l=Cn(s,l),s.g.has(l)&&(s.i=null,s.h-=s.g.get(l).length,s.g.delete(l))}function Co(s,l){return xt(s),l=Cn(s,l),s.g.has(l)}n.forEach=function(s,l){xt(this),this.g.forEach(function(d,g){d.forEach(function(P){s.call(l,P,g,this)},this)},this)},n.na=function(){xt(this);let s=Array.from(this.g.values()),l=Array.from(this.g.keys()),d=[];for(let g=0;g<l.length;g++){let P=s[g];for(let x=0;x<P.length;x++)d.push(l[g])}return d},n.V=function(s){xt(this);let l=[];if(typeof s=="string")Co(this,s)&&(l=l.concat(this.g.get(Cn(this,s))));else{s=Array.from(this.g.values());for(let d=0;d<s.length;d++)l=l.concat(s[d])}return l},n.set=function(s,l){return xt(this),this.i=null,s=Cn(this,s),Co(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[l]),this.h+=1,this},n.get=function(s,l){return s?(s=this.V(s),0<s.length?String(s[0]):l):l};function Po(s,l,d){So(s,l),0<d.length&&(s.i=null,s.g.set(Cn(s,l),j(d)),s.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],l=Array.from(this.g.keys());for(var d=0;d<l.length;d++){var g=l[d];let x=encodeURIComponent(String(g)),M=this.V(g);for(g=0;g<M.length;g++){var P=x;M[g]!==""&&(P+="="+encodeURIComponent(String(M[g]))),s.push(P)}}return this.i=s.join("&")};function Cn(s,l){return l=String(l),s.j&&(l=l.toLowerCase()),l}function qc(s,l){l&&!s.j&&(xt(s),s.i=null,s.g.forEach(function(d,g){var P=g.toLowerCase();g!=P&&(So(this,g),Po(this,P,d))},s)),s.j=l}function jc(s,l){let d=new or;if(h.Image){let g=new Image;g.onload=D(Dt,d,"TestLoadImage: loaded",!0,l,g),g.onerror=D(Dt,d,"TestLoadImage: error",!1,l,g),g.onabort=D(Dt,d,"TestLoadImage: abort",!1,l,g),g.ontimeout=D(Dt,d,"TestLoadImage: timeout",!1,l,g),h.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=s}else l(!1)}function Pn(s,l){let d=new or,g=new AbortController,P=setTimeout(()=>{g.abort(),Dt(d,"TestPingServer: timeout",!1,l)},1e4);fetch(s,{signal:g.signal}).then(x=>{clearTimeout(P),x.ok?Dt(d,"TestPingServer: ok",!0,l):Dt(d,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(P),Dt(d,"TestPingServer: error",!1,l)})}function Dt(s,l,d,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(d)}catch{}}function $c(){this.g=new kc}function Ro(s,l,d){let g=d||"";try{bo(s,function(P,x){let M=P;m(P)&&(M=zr(P)),l.push(g+x+"="+encodeURIComponent(M))})}catch(P){throw l.push(g+"type="+encodeURIComponent("_badmap")),P}}function hr(s){this.l=s.Ub||null,this.j=s.eb||!1}L(hr,pt),hr.prototype.g=function(){return new it(this.l,this.j)},hr.prototype.i=function(s){return function(){return s}}({});function it(s,l){Ae.call(this),this.D=s,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(it,Ae),n=it.prototype,n.open=function(s,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=l,this.readyState=1,gt(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(l.body=s),(this.D||h).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rn(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,gt(this)),this.g&&(this.readyState=3,gt(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ko(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function ko(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var l=s.value?s.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!s.done}))&&(this.response=this.responseText+=l)}s.done?Rn(this):gt(this),this.readyState==3&&ko(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,Rn(this))},n.Qa=function(s){this.g&&(this.response=s,Rn(this))},n.ga=function(){this.g&&Rn(this)};function Rn(s){s.readyState=4,s.l=null,s.j=null,s.v=null,gt(s)}n.setRequestHeader=function(s,l){this.u.append(s,l)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],l=this.h.entries();for(var d=l.next();!d.done;)d=d.value,s.push(d[0]+": "+d[1]),d=l.next();return s.join(`\r
`)};function gt(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(it.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function xo(s){let l="";return se(s,function(d,g){l+=g,l+=":",l+=d,l+=`\r
`}),l}function as(s,l,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=xo(d),typeof s=="string"?d!=null&&encodeURIComponent(String(d)):de(s,l,d))}function me(s){Ae.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(me,Ae);var Do=/^https?$/i,kn=["POST","PUT"];n=me.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,l,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);l=l?l.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():es.g(),this.v=this.o?ho(this.o):ho(es),this.g.onreadystatechange=k(this.Ea,this);try{this.B=!0,this.g.open(l,String(s),!0),this.B=!1}catch(x){No(this,x);return}if(s=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)d.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())d.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(x=>x.toLowerCase()=="content-type"),P=h.FormData&&s instanceof h.FormData,!(0<=Array.prototype.indexOf.call(kn,l,void 0))||g||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,M]of d)this.g.setRequestHeader(x,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mo(this),this.u=!0,this.g.send(s),this.u=!1}catch(x){No(this,x)}};function No(s,l){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=l,s.m=5,Oo(s),ni(s)}function Oo(s){s.A||(s.A=!0,Oe(s,"complete"),Oe(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,Oe(this,"complete"),Oe(this,"abort"),ni(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ni(this,!0)),me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Vo(this):this.bb())},n.bb=function(){Vo(this)};function Vo(s){if(s.h&&typeof a<"u"&&(!s.v[1]||yt(s)!=4||s.Z()!=2)){if(s.u&&yt(s)==4)Ue(s.Ea,0,s);else if(Oe(s,"readystatechange"),yt(s)==4){s.h=!1;try{let M=s.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var d;if(!(d=l)){var g;if(g=M===0){var P=String(s.D).match(os)[1]||null;!P&&h.self&&h.self.location&&(P=h.self.location.protocol.slice(0,-1)),g=!Do.test(P?P.toLowerCase():"")}d=g}if(d)Oe(s,"complete"),Oe(s,"success");else{s.m=6;try{var x=2<yt(s)?s.g.statusText:""}catch{x=""}s.l=x+" ["+s.Z()+"]",Oo(s)}}finally{ni(s)}}}}function ni(s,l){if(s.g){Mo(s);let d=s.g,g=s.v[0]?()=>{}:null;s.g=null,s.v=null,l||Oe(s,"ready");try{d.onreadystatechange=g}catch{}}}function Mo(s){s.I&&(h.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function yt(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<yt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var l=this.g.responseText;return s&&l.indexOf(s)==0&&(l=l.substring(s.length)),Rc(l)}};function Lo(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function zc(s){let l={};s=(s.g&&2<=yt(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<s.length;g++){if(Y(s[g]))continue;var d=A(s[g]);let P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let x=l[P]||[];l[P]=x,x.push(d)}C(l,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dr(s,l,d){return d&&d.internalChannelParams&&d.internalChannelParams[s]||l}function Fo(s){this.Aa=0,this.i=[],this.j=new or,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dr("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dr("baseRetryDelayMs",5e3,s),this.cb=dr("retryDelaySeedMs",1e4,s),this.Wa=dr("forwardChannelMaxRetries",2,s),this.wa=dr("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new rs(s&&s.concurrentRequestLimit),this.Da=new $c,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fo.prototype,n.la=8,n.G=1,n.connect=function(s,l,d,g){Be(0),this.W=s,this.H=l||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=fs(this,null,this.W),ri(this)};function xn(s){if(Uo(s),s.G==3){var l=s.U++,d=We(s.I);if(de(d,"SID",s.K),de(d,"RID",l),de(d,"TYPE","terminate"),pr(s,d),l=new kt(s,s.j,l),l.L=2,l.v=ti(We(d)),d=!1,h.navigator&&h.navigator.sendBeacon)try{d=h.navigator.sendBeacon(l.v.toString(),"")}catch{}!d&&h.Image&&(new Image().src=l.v,d=!0),d||(l.g=ps(l.j,null),l.g.ea(l.v)),l.F=Date.now(),Yr(l)}ds(s)}function fr(s){s.g&&(mr(s),s.g.cancel(),s.g=null)}function Uo(s){fr(s),s.u&&(h.clearTimeout(s.u),s.u=null),oi(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&h.clearTimeout(s.s),s.s=null)}function ri(s){if(!wo(s.h)&&!s.s){s.s=!0;var l=s.Ga;pn||tt(),Ht||(pn(),Ht=!0),mn.add(l,s),s.B=0}}function Gc(s,l){return _o(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=l.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=sr(k(s.Ga,s,l),hs(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let P=new kt(this,this.j,s),x=this.o;if(this.S&&(x?(x=v(x),T(x,this.S)):x=this.S),this.m!==null||this.O||(P.H=x,x=null),this.P)e:{for(var l=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(l+=g,4096<l){l=d;break e}if(l===4096||d===this.i.length-1){l=d+1;break e}}l=1e3}else l=1e3;l=ii(this,P,l),d=We(this.I),de(d,"RID",s),de(d,"CVER",22),this.D&&de(d,"X-HTTP-Session-Id",this.D),pr(this,d),x&&(this.O?l="headers="+encodeURIComponent(String(xo(x)))+"&"+l:this.m&&as(d,this.m,x)),ss(this.h,P),this.Ua&&de(d,"TYPE","init"),this.P?(de(d,"$req",l),de(d,"SID","null"),P.T=!0,Tn(P,d,null)):Tn(P,d,l),this.G=2}}else this.G==3&&(s?cs(this,s):this.i.length==0||wo(this.h)||cs(this))};function cs(s,l){var d;l?d=l.l:d=s.U++;let g=We(s.I);de(g,"SID",s.K),de(g,"RID",d),de(g,"AID",s.T),pr(s,g),s.m&&s.o&&as(g,s.m,s.o),d=new kt(s,s.j,d,s.B+1),s.m===null&&(d.H=s.o),l&&(s.i=l.D.concat(s.i)),l=ii(s,d,1e3),d.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),ss(s.h,d),Tn(d,g,l)}function pr(s,l){s.H&&se(s.H,function(d,g){de(l,g,d)}),s.l&&bo({},function(d,g){de(l,g,d)})}function ii(s,l,d){d=Math.min(s.i.length,d);var g=s.l?k(s.l.Na,s.l,s):null;e:{var P=s.i;let x=-1;for(;;){let M=["count="+d];x==-1?0<d?(x=P[0].g,M.push("ofs="+x)):x=0:M.push("ofs="+x);let ue=!0;for(let Se=0;Se<d;Se++){let re=P[Se].g,ke=P[Se].map;if(re-=x,0>re)x=Math.max(0,P[Se].g-100),ue=!1;else try{Ro(ke,M,"req"+re+"_")}catch{g&&g(ke)}}if(ue){g=M.join("&");break e}}}return s=s.i.splice(0,d),l.D=s,g}function us(s){if(!s.g&&!s.u){s.Y=1;var l=s.Fa;pn||tt(),Ht||(pn(),Ht=!0),mn.add(l,s),s.v=0}}function si(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=sr(k(s.Fa,s),hs(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,gr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=sr(k(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Be(10),fr(this),gr(this))};function mr(s){s.A!=null&&(h.clearTimeout(s.A),s.A=null)}function gr(s){s.g=new kt(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var l=We(s.qa);de(l,"RID","rpc"),de(l,"SID",s.K),de(l,"AID",s.T),de(l,"CI",s.F?"0":"1"),!s.F&&s.ja&&de(l,"TO",s.ja),de(l,"TYPE","xmlhttp"),pr(s,l),s.m&&s.o&&as(l,s.m,s.o),s.L&&(s.g.I=s.L);var d=s.g;s=s.ia,d.L=1,d.v=ti(We(l)),d.m=null,d.P=!0,pe(d,s)}n.Za=function(){this.C!=null&&(this.C=null,fr(this),si(this),Be(19))};function oi(s){s.C!=null&&(h.clearTimeout(s.C),s.C=null)}function ls(s,l){var d=null;if(s.g==l){oi(s),mr(s),s.g=null;var g=2}else if(is(s.h,l))d=l.D,vo(s.h,l),g=1;else return;if(s.G!=0){if(l.o)if(g==1){d=l.m?l.m.length:0,l=Date.now()-l.F;var P=s.B;g=Gr(),Oe(g,new Wr(g,d)),ri(s)}else us(s);else if(P=l.s,P==3||P==0&&0<l.X||!(g==1&&Gc(s,l)||g==2&&si(s)))switch(d&&0<d.length&&(l=s.h,l.i=l.i.concat(d)),P){case 1:Nt(s,5);break;case 4:Nt(s,10);break;case 3:Nt(s,6);break;default:Nt(s,2)}}}function hs(s,l){let d=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(d*=2),d*l}function Nt(s,l){if(s.j.info("Error code "+l),l==2){var d=k(s.fb,s),g=s.Xa;let P=!g;g=new Qt(g||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||cr(g,"https"),ti(g),P?jc(g.toString(),d):Pn(g.toString(),d)}else Be(2);s.G=0,s.l&&s.l.sa(l),ds(s),Uo(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),Be(2)):(this.j.info("Failed to ping google.com"),Be(1))};function ds(s){if(s.G=0,s.ka=[],s.l){let l=Io(s.h);(l.length!=0||s.i.length!=0)&&(O(s.ka,l),O(s.ka,s.i),s.h.i.length=0,j(s.i),s.i.length=0),s.l.ra()}}function fs(s,l,d){var g=d instanceof Qt?We(d):new Qt(d);if(g.g!="")l&&(g.g=l+"."+g.g),Zr(g,g.s);else{var P=h.location;g=P.protocol,l=l?l+"."+P.hostname:P.hostname,P=+P.port;var x=new Qt(null);g&&cr(x,g),l&&(x.g=l),P&&Zr(x,P),d&&(x.l=d),g=x}return d=s.D,l=s.ya,d&&l&&de(g,d,l),de(g,"VER",s.la),pr(s,g),g}function ps(s,l,d){if(l&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=s.Ca&&!s.pa?new me(new hr({eb:d})):new me(s.pa),l.Ha(s.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ms(){}n=ms.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function yr(){}yr.prototype.g=function(s,l){return new He(s,l)};function He(s,l){Ae.call(this),this.g=new Fo(l),this.l=s,this.h=l&&l.messageUrlParams||null,s=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(s?s["X-WebChannel-Content-Type"]=l.messageContentType:s={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(s?s["X-WebChannel-Client-Profile"]=l.va:s={"X-WebChannel-Client-Profile":l.va}),this.g.S=s,(s=l&&l.Sb)&&!Y(s)&&(this.g.m=s),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!Y(l)&&(this.g.D=l,s=this.h,s!==null&&l in s&&(s=this.h,l in s&&delete s[l])),this.j=new Dn(this)}L(He,Ae),He.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},He.prototype.close=function(){xn(this.g)},He.prototype.o=function(s){var l=this.g;if(typeof s=="string"){var d={};d.__data__=s,s=d}else this.u&&(d={},d.__data__=zr(s),s=d);l.i.push(new Vc(l.Ya++,s)),l.G==3&&ri(l)},He.prototype.N=function(){this.g.l=null,delete this.j,xn(this.g),delete this.g,He.aa.N.call(this)};function Jt(s){Xi.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var l=s.__sm__;if(l){e:{for(let d in l){s=d;break e}s=void 0}(this.i=s)&&(s=this.i,l=l!==null&&s in l?l[s]:void 0),this.data=l}else this.data=s}L(Jt,Xi);function Bo(){Zi.call(this),this.status=1}L(Bo,Zi);function Dn(s){this.g=s}L(Dn,ms),Dn.prototype.ua=function(){Oe(this.g,"a")},Dn.prototype.ta=function(s){Oe(this.g,new Jt(s))},Dn.prototype.sa=function(s){Oe(this.g,new Bo)},Dn.prototype.ra=function(){Oe(this.g,"b")},yr.prototype.createWebChannel=yr.prototype.g,He.prototype.send=He.prototype.o,He.prototype.open=He.prototype.m,He.prototype.close=He.prototype.close,fl=an.createWebChannelTransport=function(){return new yr},dl=an.getStatEventTarget=function(){return Gr()},hl=an.Event=mt,Ta=an.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hr.NO_ERROR=0,Hr.TIMEOUT=8,Hr.HTTP_ERROR=6,Vs=an.ErrorCode=Hr,go.COMPLETE="complete",ll=an.EventType=go,fo.EventType=rr,rr.OPEN="a",rr.CLOSE="b",rr.ERROR="c",rr.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,Si=an.WebChannel=fo,ul=an.FetchXmlHttpFactory=hr,me.prototype.listenOnce=me.prototype.L,me.prototype.getLastError=me.prototype.Ka,me.prototype.getLastErrorCode=me.prototype.Ba,me.prototype.getStatus=me.prototype.Z,me.prototype.getResponseJson=me.prototype.Oa,me.prototype.getResponseText=me.prototype.oa,me.prototype.send=me.prototype.ea,me.prototype.setWithCredentials=me.prototype.Ha,cl=an.XhrIo=me}).apply(typeof ba<"u"?ba:typeof self<"u"?self:typeof window<"u"?window:{});var Rp="@firebase/firestore";var Le=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");var zi="10.13.1";var Nr=new qn("@firebase/firestore");function Ms(){return Nr.logLevel}function $(n,...e){if(Nr.logLevel<=te.DEBUG){let t=e.map(Zh);Nr.debug(`Firestore (${zi}): ${n}`,...t)}}function un(n,...e){if(Nr.logLevel<=te.ERROR){let t=e.map(Zh);Nr.error(`Firestore (${zi}): ${n}`,...t)}}function Ni(n,...e){if(Nr.logLevel<=te.WARN){let t=e.map(Zh);Nr.warn(`Firestore (${zi}): ${n}`,...t)}}function Zh(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function H(n="Unexpected state"){let e=`FIRESTORE (${zi}) INTERNAL ASSERTION FAILED: `+n;throw un(e),new Error(e)}function fe(n,e){n||H()}function Q(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},q=class extends st{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Bt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ra=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},wl=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Le.UNAUTHENTICATED))}shutdown(){}},_l=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},vl=class{constructor(e){this.t=e,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve(),o=new Bt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Bt,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let p=o;e.enqueueRetryable(()=>b(this,null,function*(){yield p.promise,yield i(this.currentUser)}))},h=p=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){let p=this.t.getImmediate({optional:!0});p?h(p):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Bt)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new Ra(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new Le(e)}},Il=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},El=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Il(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Le.FIRST_PARTY))}shutdown(){}invalidateToken(){}},bl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Tl=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,$("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fe(typeof t.token=="string"),this.R=t.token,new bl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function NI(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ka=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=NI(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function oe(n,e){return n<e?-1:n>e?1:0}function Oi(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var $e=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new $e(0,0))}static max(){return new n(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xa=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&H(),r===void 0?r=e.length-t:r>e.length-t&&H(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),a=t.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},_e=class n extends xa{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new q(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},OI=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ot=class n extends xa{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return OI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new q(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let h=e[i];if(h==="\\"){if(i+1===e.length)throw new q(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new q(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else h==="`"?(a=!a,i++):h!=="."||a?(r+=h,i++):(o(),i++)}if(o(),a)throw new q(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var G=class n{constructor(e){this.path=e}static fromPath(e){return new n(_e.fromString(e))}static fromName(e){return new n(_e.fromString(e).popFirst(5))}static empty(){return new n(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new _e(e.slice()))}};var Al=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Al.UNKNOWN_ID=-1;function VI(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new $e(t+1,0):new $e(t,r));return new Or(i,G.empty(),e)}function MI(n){return new Or(n.readTime,n.key,-1)}var Or=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),G.empty(),-1)}static max(){return new n(J.max(),G.empty(),-1)}};function LI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}var FI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function eo(n){return b(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==FI)throw n;$("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(h=>{++i,h.next(()=>{++o,a&&o===i&&t()},p=>r(p))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),h=0;for(let p=0;p<o;p++){let m=p;t(e[m]).next(_=>{a[m]=_,++h,h===o&&r(a)},_=>i(_))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function UI(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function to(n){return n.name==="IndexedDbTransactionError"}var um=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function cc(n){return n==null}function js(n){return n===0&&1/n==-1/0}function BI(n){return typeof n=="number"&&Number.isInteger(n)&&!js(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var qI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jT=[...qI,"documentOverlays"],jI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$I=jI,zI=[...$I,"indexConfiguration","indexState","indexEntries"];var $T=[...zI,"globals"];function kp(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lm(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ie=class n{constructor(e,t){this.comparator=e,this.root=t||qt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ki(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ki(this.root,e,this.comparator,!1)}getReverseIterator(){return new ki(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ki(this.root,e,this.comparator,!0)}},ki=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qt=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();let e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}};qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,t,r,i,o){return this}insert(e,t,r){return new qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ye=class n{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Da(this.data.getIterator())}getIteratorFrom(e){return new Da(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Da=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ut=class n{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ye(ot.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oi(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Na=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Xe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Na("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Xe.EMPTY_BYTE_STRING=new Xe("");var GI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ln(n){if(fe(!!n),typeof n=="string"){let e=0,t=GI.exec(n);if(fe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ge(n.seconds),nanos:ge(n.nanos)}}function ge(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xn(n){return typeof n=="string"?Xe.fromBase64String(n):Xe.fromUint8Array(n)}function ed(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function td(n){let e=n.mapValue.fields.__previous_value__;return ed(e)?td(e):e}function $s(n){let e=ln(n.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}var Cl=class{constructor(e,t,r,i,o,a,h,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m}},Oa=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Aa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Vr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ed(n)?4:dm(n)?9007199254740991:hm(n)?10:11:H()}function zt(n,e){if(n===e)return!0;let t=Vr(n);if(t!==Vr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $s(n).isEqual($s(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=ln(i.timestampValue),h=ln(o.timestampValue);return a.seconds===h.seconds&&a.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Xn(i.bytesValue).isEqual(Xn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ge(i.geoPointValue.latitude)===ge(o.geoPointValue.latitude)&&ge(i.geoPointValue.longitude)===ge(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ge(i.integerValue)===ge(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=ge(i.doubleValue),h=ge(o.doubleValue);return a===h?js(a)===js(h):isNaN(a)&&isNaN(h)}return!1}(n,e);case 9:return Oi(n.arrayValue.values||[],e.arrayValue.values||[],zt);case 10:case 11:return function(i,o){let a=i.mapValue.fields||{},h=o.mapValue.fields||{};if(kp(a)!==kp(h))return!1;for(let p in a)if(a.hasOwnProperty(p)&&(h[p]===void 0||!zt(a[p],h[p])))return!1;return!0}(n,e);default:return H()}}function zs(n,e){return(n.values||[]).find(t=>zt(t,e))!==void 0}function Vi(n,e){if(n===e)return 0;let t=Vr(n),r=Vr(e);if(t!==r)return oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return function(o,a){let h=ge(o.integerValue||o.doubleValue),p=ge(a.integerValue||a.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return xp(n.timestampValue,e.timestampValue);case 4:return xp($s(n),$s(e));case 5:return oe(n.stringValue,e.stringValue);case 6:return function(o,a){let h=Xn(o),p=Xn(a);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){let h=o.split("/"),p=a.split("/");for(let m=0;m<h.length&&m<p.length;m++){let _=oe(h[m],p[m]);if(_!==0)return _}return oe(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){let h=oe(ge(o.latitude),ge(a.latitude));return h!==0?h:oe(ge(o.longitude),ge(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Dp(n.arrayValue,e.arrayValue);case 10:return function(o,a){var h,p,m,_;let y=o.fields||{},k=a.fields||{},D=(h=y.value)===null||h===void 0?void 0:h.arrayValue,L=(p=k.value)===null||p===void 0?void 0:p.arrayValue,j=oe(((m=D?.values)===null||m===void 0?void 0:m.length)||0,((_=L?.values)===null||_===void 0?void 0:_.length)||0);return j!==0?j:Dp(D,L)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===Aa.mapValue&&a===Aa.mapValue)return 0;if(o===Aa.mapValue)return 1;if(a===Aa.mapValue)return-1;let h=o.fields||{},p=Object.keys(h),m=a.fields||{},_=Object.keys(m);p.sort(),_.sort();for(let y=0;y<p.length&&y<_.length;++y){let k=oe(p[y],_[y]);if(k!==0)return k;let D=Vi(h[p[y]],m[_[y]]);if(D!==0)return D}return oe(p.length,_.length)}(n.mapValue,e.mapValue);default:throw H()}}function xp(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);let t=ln(n),r=ln(e),i=oe(t.seconds,r.seconds);return i!==0?i:oe(t.nanos,r.nanos)}function Dp(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Vi(t[i],r[i]);if(o)return o}return oe(t.length,r.length)}function Mi(n){return Pl(n)}function Pl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ln(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Xn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return G.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Pl(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${Pl(t.fields[a])}`;return i+"}"}(n.mapValue):H()}function Np(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Rl(n){return!!n&&"integerValue"in n}function nd(n){return!!n&&"arrayValue"in n}function Op(n){return!!n&&"nullValue"in n}function Vp(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ca(n){return!!n&&"mapValue"in n}function hm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Fs(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Gi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fs(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fs(n.arrayValue.values[t]);return e}return Object.assign({},n)}function dm(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Et=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ca(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fs(t)}setAll(e){let t=ot.emptyPath(),r={},i=[];e.forEach((a,h)=>{if(!t.isImmediateParentOf(h)){let p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}a?r[h.lastSegment()]=Fs(a):i.push(h.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ca(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ca(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Fs(this.value))}};function fm(n){let e=[];return Gi(n.fields,(t,r)=>{let i=new ot([t]);if(Ca(r)){let o=fm(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new Ut(e)}var bt=class n{constructor(e,t,r,i,o,a,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=h}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),Et.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),Et.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),Et.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Li=class{constructor(e,t){this.position=e,this.inclusive=t}};function Mp(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(a.referenceValue),t.key):r=Vi(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lp(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zt(n.position[t],e.position[t]))return!1;return!0}var Mr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function WI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Va=class{},Re=class n extends Va{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xl(e,t,r):t==="array-contains"?new Ol(e,r):t==="in"?new Vl(e,r):t==="not-in"?new Ml(e,r):t==="array-contains-any"?new Ll(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Dl(e,r):new Nl(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Vi(t,this.value)):t!==null&&Vr(this.value)===Vr(t)&&this.matchesComparison(Vi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Tt=class n extends Va{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return pm(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function pm(n){return n.op==="and"}function mm(n){return HI(n)&&pm(n)}function HI(n){for(let e of n.filters)if(e instanceof Tt)return!1;return!0}function kl(n){if(n instanceof Re)return n.field.canonicalString()+n.op.toString()+Mi(n.value);if(mm(n))return n.filters.map(e=>kl(e)).join(",");{let e=n.filters.map(t=>kl(t)).join(",");return`${n.op}(${e})`}}function gm(n,e){return n instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.field.isEqual(i.field)&&zt(r.value,i.value)}(n,e):n instanceof Tt?function(r,i){return i instanceof Tt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,h)=>o&&gm(a,i.filters[h]),!0):!1}(n,e):void H()}function ym(n){return n instanceof Re?function(t){return`${t.field.canonicalString()} ${t.op} ${Mi(t.value)}`}(n):n instanceof Tt?function(t){return t.op.toString()+" {"+t.getFilters().map(ym).join(" ,")+"}"}(n):"Filter"}var xl=class extends Re{constructor(e,t,r){super(e,t,r),this.key=G.fromName(r.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},Dl=class extends Re{constructor(e,t){super(e,"in",t),this.keys=wm("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Nl=class extends Re{constructor(e,t){super(e,"not-in",t),this.keys=wm("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function wm(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>G.fromName(r.referenceValue))}var Ol=class extends Re{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nd(t)&&zs(t.arrayValue,this.value)}},Vl=class extends Re{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&zs(this.value.arrayValue,t)}},Ml=class extends Re{constructor(e,t){super(e,"not-in",t)}matches(e){if(zs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!zs(this.value.arrayValue,t)}},Ll=class extends Re{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zs(this.value.arrayValue,r))}};var Fl=class{constructor(e,t=null,r=[],i=[],o=null,a=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=h,this.ue=null}};function Fp(n,e=null,t=[],r=[],i=null,o=null,a=null){return new Fl(n,e,t,r,i,o,a)}function rd(n){let e=Q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>kl(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),cc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Mi(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Mi(r)).join(",")),e.ue=t}return e.ue}function id(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!WI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gm(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Lp(n.startAt,e.startAt)&&Lp(n.endAt,e.endAt)}function Ul(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Zn=class{constructor(e,t=null,r=[],i=[],o=null,a="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=h,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function KI(n,e,t,r,i,o,a,h){return new Zn(n,e,t,r,i,o,a,h)}function uc(n){return new Zn(n)}function Up(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _m(n){return n.collectionGroup!==null}function Us(n){let e=Q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let h=new Ye(ot.comparator);return a.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Mr(o,r))}),t.has(ot.keyField().canonicalString())||e.ce.push(new Mr(ot.keyField(),r))}return e.ce}function jt(n){let e=Q(n);return e.le||(e.le=QI(e,Us(n))),e.le}function QI(n,e){if(n.limitType==="F")return Fp(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Mr(i.field,o)});let t=n.endAt?new Li(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Li(n.startAt.position,n.startAt.inclusive):null;return Fp(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Bl(n,e){let t=n.filters.concat([e]);return new Zn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ql(n,e,t){return new Zn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lc(n,e){return id(jt(n),jt(e))&&n.limitType===e.limitType}function vm(n){return`${rd(jt(n))}|lt:${n.limitType}`}function Ci(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ym(i)).join(", ")}]`),cc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Mi(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Mi(i)).join(",")),`Target(${r})`}(jt(n))}; limitType=${n.limitType})`}function hc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Us(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,h,p){let m=Mp(a,h,p);return a.inclusive?m<=0:m<0}(r.startAt,Us(r),i)||r.endAt&&!function(a,h,p){let m=Mp(a,h,p);return a.inclusive?m>=0:m>0}(r.endAt,Us(r),i))}(n,e)}function JI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Im(n){return(e,t)=>{let r=!1;for(let i of Us(n)){let o=YI(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function YI(n,e,t){let r=n.field.isKeyField()?G.comparator(e.key,t.key):function(o,a,h){let p=a.data.field(o),m=h.data.field(o);return p!==null&&m!==null?Vi(p,m):H()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}var er=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return lm(this.inner)}size(){return this.innerSize}};var XI=new Ie(G.comparator);function hn(){return XI}var Em=new Ie(G.comparator);function Ls(...n){let e=Em;for(let t of n)e=e.insert(t.key,t);return e}function bm(n){let e=Em;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function kr(){return Bs()}function Tm(){return Bs()}function Bs(){return new er(n=>n.toString(),(n,e)=>n.isEqual(e))}var ZI=new Ie(G.comparator),e0=new Ye(G.comparator);function ne(...n){let e=e0;for(let t of n)e=e.add(t);return e}var t0=new Ye(oe);function n0(){return t0}function sd(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:js(e)?"-0":e}}function Am(n){return{integerValue:""+n}}function r0(n,e){return BI(e)?Am(e):sd(n,e)}var Fi=class{constructor(){this._=void 0}};function i0(n,e,t){return n instanceof Ui?function(i,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ed(o)&&(o=td(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(t,e):n instanceof Lr?Cm(n,e):n instanceof Fr?Pm(n,e):function(i,o){let a=Sm(i,o),h=Bp(a)+Bp(i.Pe);return Rl(a)&&Rl(i.Pe)?Am(h):sd(i.serializer,h)}(n,e)}function s0(n,e,t){return n instanceof Lr?Cm(n,e):n instanceof Fr?Pm(n,e):t}function Sm(n,e){return n instanceof Bi?function(r){return Rl(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ui=class extends Fi{},Lr=class extends Fi{constructor(e){super(),this.elements=e}};function Cm(n,e){let t=Rm(e);for(let r of n.elements)t.some(i=>zt(i,r))||t.push(r);return{arrayValue:{values:t}}}var Fr=class extends Fi{constructor(e){super(),this.elements=e}};function Pm(n,e){let t=Rm(e);for(let r of n.elements)t=t.filter(i=>!zt(i,r));return{arrayValue:{values:t}}}var Bi=class extends Fi{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Bp(n){return ge(n.integerValue||n.doubleValue)}function Rm(n){return nd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function o0(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Lr&&i instanceof Lr||r instanceof Fr&&i instanceof Fr?Oi(r.elements,i.elements,zt):r instanceof Bi&&i instanceof Bi?zt(r.Pe,i.Pe):r instanceof Ui&&i instanceof Ui}(n.transform,e.transform)}var jl=class{constructor(e,t){this.version=e,this.transformResults=t}},Jn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pa(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var qi=class{};function km(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ma(n.key,Jn.none()):new Ur(n.key,n.data,Jn.none());{let t=n.data,r=Et.empty(),i=new Ye(ot.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new dn(n.key,r,new Ut(i.toArray()),Jn.none())}}function a0(n,e,t){n instanceof Ur?function(i,o,a){let h=i.value.clone(),p=jp(i.fieldTransforms,o,a.transformResults);h.setAll(p),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):n instanceof dn?function(i,o,a){if(!Pa(i.precondition,o))return void o.convertToUnknownDocument(a.version);let h=jp(i.fieldTransforms,o,a.transformResults),p=o.data;p.setAll(xm(i)),p.setAll(h),o.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function qs(n,e,t,r){return n instanceof Ur?function(o,a,h,p){if(!Pa(o.precondition,a))return h;let m=o.value.clone(),_=$p(o.fieldTransforms,p,a);return m.setAll(_),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof dn?function(o,a,h,p){if(!Pa(o.precondition,a))return h;let m=$p(o.fieldTransforms,p,a),_=a.data;return _.setAll(xm(o)),_.setAll(m),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,a,h){return Pa(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):h}(n,e,t)}function c0(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Sm(r.transform,i||null);o!=null&&(t===null&&(t=Et.empty()),t.set(r.field,o))}return t||null}function qp(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oi(r,i,(o,a)=>o0(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ur=class extends qi{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},dn=class extends qi{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function xm(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function jp(n,e,t){let r=new Map;fe(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,h=e.data.field(o.field);r.set(o.field,s0(a,h,t[i]))}return r}function $p(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,i0(o,a,e))}return r}var Ma=class extends qi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},$l=class extends qi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var zl=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&a0(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=qs(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=qs(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Tm();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,h=this.applyToLocalView(a,o.mutatedFields);h=t.has(i.key)?null:h;let p=km(a,h);p!==null&&r.set(i.key,p),a.isValidDocument()||a.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ne())}isEqual(e){return this.batchId===e.batchId&&Oi(this.mutations,e.mutations,(t,r)=>qp(t,r))&&Oi(this.baseMutations,e.baseMutations,(t,r)=>qp(t,r))}},Gl=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){fe(e.mutations.length===r.length);let i=function(){return ZI}(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new n(e,t,r,i)}};var Wl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Hl=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ce,ie;function u0(n){switch(n){default:return H();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function Dm(n){if(n===void 0)return un("GRPC error has no .code"),N.UNKNOWN;switch(n){case Ce.OK:return N.OK;case Ce.CANCELLED:return N.CANCELLED;case Ce.UNKNOWN:return N.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return N.INTERNAL;case Ce.UNAVAILABLE:return N.UNAVAILABLE;case Ce.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ce.NOT_FOUND:return N.NOT_FOUND;case Ce.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ce.ABORTED:return N.ABORTED;case Ce.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ce.DATA_LOSS:return N.DATA_LOSS;default:return H()}}(ie=Ce||(Ce={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";var zp=null;function l0(){return new TextEncoder}var h0=new Qn([4294967295,4294967295],0);function Gp(n){let e=l0().encode(n),t=new al;return t.update(e),new Uint8Array(t.digest())}function Wp(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qn([t,r],0),new Qn([i,o],0)]}var Kl=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new xr(`Invalid padding: ${t}`);if(r<0)throw new xr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new xr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Qn.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Qn.fromNumber(r)));return i.compare(h0)===1&&(i=new Qn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Gp(e),[r,i]=Wp(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(r,i,o);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,i,t);return r.forEach(h=>a.insert(h)),a}insert(e){if(this.Ie===0)return;let t=Gp(e),[r,i]=Wp(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(r,i,o);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},xr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var La=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Gs.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new Ie(oe),hn(),ne())}},Gs=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ne(),ne(),ne())}};var xi=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Fa=class{constructor(e,t){this.targetId=e,this.me=t}},Ua=class{constructor(e,t,r=Xe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ba=class{constructor(){this.fe=0,this.ge=Kp(),this.pe=Xe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),t=ne(),r=ne();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:H()}}),new Gs(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Kp()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ql=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=hn(),this.qe=Hp(),this.Qe=new Ie(oe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:H()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Ul(o))if(r===0){let a=new G(o.path);this.Ue(t,a,bt.newNoDocument(a,J.min()))}else fe(r===1);else{let a=this.Ye(t);if(a!==r){let h=this.Ze(e),p=h?this.Xe(h,e,a):1;if(p!==0){this.je(t);let m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}zp?.et(function(_,y,k,D,L){var j,O,K,Y,Z,le;let be={localCacheCount:_,existenceFilterCount:y.count,databaseId:k.database,projectId:k.projectId},se=y.unchangedNames;return se&&(be.bloomFilter={applied:L===0,hashCount:(j=se?.hashCount)!==null&&j!==void 0?j:0,bitmapLength:(Y=(K=(O=se?.bits)===null||O===void 0?void 0:O.bitmap)===null||K===void 0?void 0:K.length)!==null&&Y!==void 0?Y:0,padding:(le=(Z=se?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&le!==void 0?le:0,mightContain:C=>{var v;return(v=D?.mightContain(C))!==null&&v!==void 0&&v}}),be}(a,e.me,this.Le.tt(),h,p))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,a,h;try{a=Xn(r).toUint8Array()}catch(p){if(p instanceof Na)return Ni("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Kl(a,i,o)}catch(p){return Ni(p instanceof xr?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let a=this.Le.tt(),h=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,a)=>{let h=this.Je(a);if(h){if(o.current&&Ul(h.target)){let p=new G(h.target.path);this.ke.get(p)!==null||this.it(a,p)||this.Ue(a,p,bt.newNoDocument(p,e))}o.be&&(t.set(a,o.ve()),o.Ce())}});let r=ne();this.qe.forEach((o,a)=>{let h=!0;a.forEachWhile(p=>{let m=this.Je(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let i=new La(e,t,this.Qe,this.ke,r);return this.ke=hn(),this.qe=Hp(),this.Qe=new Ie(oe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ba,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ye(oe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||$("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ba),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Hp(){return new Ie(G.comparator)}function Kp(){return new Ie(G.comparator)}var d0={asc:"ASCENDING",desc:"DESCENDING"},f0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p0={and:"AND",or:"OR"},Jl=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Yl(n,e){return n.useProto3Json||cc(e)?e:{value:e}}function qa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nm(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function m0(n,e){return qa(n,e.toTimestamp())}function $t(n){return fe(!!n),J.fromTimestamp(function(t){let r=ln(t);return new $e(r.seconds,r.nanos)}(n))}function od(n,e){return Xl(n,e).canonicalString()}function Xl(n,e){let t=function(i){return new _e(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Om(n){let e=_e.fromString(n);return fe(Um(e)),e}function Zl(n,e){return od(n.databaseId,e.path)}function pl(n,e){let t=Om(e);if(t.get(1)!==n.databaseId.projectId)throw new q(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new q(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G(Mm(t))}function Vm(n,e){return od(n.databaseId,e)}function g0(n){let e=Om(n);return e.length===4?_e.emptyPath():Mm(e)}function eh(n){return new _e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Mm(n){return fe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Qp(n,e,t){return{name:Zl(n,e),fields:t.value.mapValue.fields}}function y0(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(m,_){return m.useProto3Json?(fe(_===void 0||typeof _=="string"),Xe.fromBase64String(_||"")):(fe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Xe.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,h=a&&function(m){let _=m.code===void 0?N.UNKNOWN:Dm(m.code);return new q(_,m.message||"")}(a);t=new Ua(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=pl(n,r.document.name),o=$t(r.document.updateTime),a=r.document.createTime?$t(r.document.createTime):J.min(),h=new Et({mapValue:{fields:r.document.fields}}),p=bt.newFoundDocument(i,o,a,h),m=r.targetIds||[],_=r.removedTargetIds||[];t=new xi(m,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=pl(n,r.document),o=r.readTime?$t(r.readTime):J.min(),a=bt.newNoDocument(i,o),h=r.removedTargetIds||[];t=new xi([],h,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=pl(n,r.document),o=r.removedTargetIds||[];t=new xi([],o,i,null)}else{if(!("filter"in e))return H();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new Hl(i,o),h=r.targetId;t=new Fa(h,a)}}return t}function w0(n,e){let t;if(e instanceof Ur)t={update:Qp(n,e.key,e.value)};else if(e instanceof Ma)t={delete:Zl(n,e.key)};else if(e instanceof dn)t={update:Qp(n,e.key,e.data),updateMask:C0(e.fieldMask)};else{if(!(e instanceof $l))return H();t={verify:Zl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,a){let h=a.transform;if(h instanceof Ui)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Lr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Fr)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Bi)return{fieldPath:a.field.canonicalString(),increment:h.Pe};throw H()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:m0(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:H()}(n,e.precondition)),t}function _0(n,e){return n&&n.length>0?(fe(e!==void 0),n.map(t=>function(i,o){let a=i.updateTime?$t(i.updateTime):$t(o);return a.isEqual(J.min())&&(a=$t(o)),new jl(a,i.transformResults||[])}(t,e))):[]}function v0(n,e){return{documents:[Vm(n,e.path)]}}function I0(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Vm(n,i);let o=function(m){if(m.length!==0)return Fm(Tt.create(m,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let a=function(m){if(m.length!==0)return m.map(_=>function(k){return{field:Pi(k.field),direction:T0(k.dir)}}(_))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let h=Yl(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:i}}function E0(n){let e=g0(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){fe(r===1);let _=t.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let o=[];t.where&&(o=function(y){let k=Lm(y);return k instanceof Tt&&mm(k)?k.getFilters():[k]}(t.where));let a=[];t.orderBy&&(a=function(y){return y.map(k=>function(L){return new Mr(Ri(L.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(k))}(t.orderBy));let h=null;t.limit&&(h=function(y){let k;return k=typeof y=="object"?y.value:y,cc(k)?null:k}(t.limit));let p=null;t.startAt&&(p=function(y){let k=!!y.before,D=y.values||[];return new Li(D,k)}(t.startAt));let m=null;return t.endAt&&(m=function(y){let k=!y.before,D=y.values||[];return new Li(D,k)}(t.endAt)),KI(e,i,a,o,h,"F",p,m)}function b0(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Lm(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ri(t.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ri(t.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ri(t.unaryFilter.field);return Re.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Ri(t.unaryFilter.field);return Re.create(a,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(n):n.fieldFilter!==void 0?function(t){return Re.create(Ri(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Tt.create(t.compositeFilter.filters.map(r=>Lm(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H()}}(t.compositeFilter.op))}(n):H()}function T0(n){return d0[n]}function A0(n){return f0[n]}function S0(n){return p0[n]}function Pi(n){return{fieldPath:n.canonicalString()}}function Ri(n){return ot.fromServerFormat(n.fieldPath)}function Fm(n){return n instanceof Re?function(t){if(t.op==="=="){if(Vp(t.value))return{unaryFilter:{field:Pi(t.field),op:"IS_NAN"}};if(Op(t.value))return{unaryFilter:{field:Pi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Vp(t.value))return{unaryFilter:{field:Pi(t.field),op:"IS_NOT_NAN"}};if(Op(t.value))return{unaryFilter:{field:Pi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pi(t.field),op:A0(t.op),value:t.value}}}(n):n instanceof Tt?function(t){let r=t.getFilters().map(i=>Fm(i));return r.length===1?r[0]:{compositeFilter:{op:S0(t.op),filters:r}}}(n):H()}function C0(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Um(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ws=class n{constructor(e,t,r,i,o=J.min(),a=J.min(),h=Xe.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var th=class{constructor(e){this.ct=e}};function P0(n){let e=E0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ql(e,e.limit,"L"):e}var ja=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ge(e.integerValue));else if("doubleValue"in e){let r=ge(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),js(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ln(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Xn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?dm(e)?this.dt(t,Number.MAX_SAFE_INTEGER):hm(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):H()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let a="value",h=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ge(h)),this.Vt(a,t),this.Tt(o[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),G.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ja.vt=new ja;var nh=class{constructor(){this.un=new rh}addToCollectionParentIndex(e,t){return this.un.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Or.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Or.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},rh=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ye(_e.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(_e.comparator)).toArray()}};var GT=new Uint8Array(0);var Ft=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(41943040,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);var Hs=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var ih=class{constructor(){this.changes=new er(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var sh=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var oh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&qs(r.mutation,i,Ut.empty(),$e.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ne()){let i=kr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=Ls();return o.forEach((h,p)=>{a=a.insert(h,p.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=kr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ne()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,h)=>{t.set(a,h)})})}computeViews(e,t,r,i){let o=hn(),a=Bs(),h=function(){return Bs()}();return t.forEach((p,m)=>{let _=r.get(m.key);i.has(m.key)&&(_===void 0||_.mutation instanceof dn)?o=o.insert(m.key,m):_!==void 0?(a.set(m.key,_.mutation.getFieldMask()),qs(_.mutation,m,_.mutation.getFieldMask(),$e.now())):a.set(m.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,o).next(p=>(p.forEach((m,_)=>a.set(m,_)),t.forEach((m,_)=>{var y;return h.set(m,new sh(_,(y=a.get(m))!==null&&y!==void 0?y:null))}),h))}recalculateAndSaveOverlays(e,t){let r=Bs(),i=new Ie((a,h)=>a-h),o=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let h of a)h.keys().forEach(p=>{let m=t.get(p);if(m===null)return;let _=r.get(p)||Ut.empty();_=h.applyToLocalView(m,_),r.set(p,_);let y=(i.get(h.batchId)||ne()).add(p);i=i.insert(h.batchId,y)})}).next(()=>{let a=[],h=i.getReverseIterator();for(;h.hasNext();){let p=h.getNext(),m=p.key,_=p.value,y=Tm();_.forEach(k=>{if(!o.has(k)){let D=km(t.get(k),r.get(k));D!==null&&y.set(k,D),o=o.add(k)}}),a.push(this.documentOverlayCache.saveOverlays(e,m,y))}return V.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_m(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(kr()),h=-1,p=o;return a.next(m=>V.forEach(m,(_,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),o.get(_)?V.resolve():this.remoteDocumentCache.getEntry(e,_).next(k=>{p=p.insert(_,k)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,p,m,ne())).next(_=>({batchId:h,changes:bm(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(r=>{let i=Ls();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=Ls();return this.indexManager.getCollectionParents(e,o).next(h=>V.forEach(h,p=>{let m=function(y,k){return new Zn(k,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,p.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(_=>{_.forEach((y,k)=>{a=a.insert(y,k)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((p,m)=>{let _=m.getKey();a.get(_)===null&&(a=a.insert(_,bt.newInvalidDocument(_)))});let h=Ls();return a.forEach((p,m)=>{let _=o.get(p);_!==void 0&&qs(_.mutation,m,Ut.empty(),$e.now()),hc(t,m)&&(h=h.insert(p,m))}),h})}};var ah=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return V.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:$t(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:P0(i.bundledQuery),readTime:$t(i.readTime)}}(t)),V.resolve()}};var ch=class{constructor(){this.overlays=new Ie(G.comparator),this.Ir=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=kr();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=kr(),o=t.length+1,a=new G(t.child("")),h=this.overlays.getIteratorFrom(a);for(;h.hasNext();){let p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&p.largestBatchId>r&&i.set(p.getKey(),p)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ie((m,_)=>m-_),a=this.overlays.getIterator();for(;a.hasNext();){let m=a.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=o.get(m.largestBatchId);_===null&&(_=kr(),o=o.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}let h=kr(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,_)=>h.set(m,_)),!(h.size()>=i)););return V.resolve(h)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Wl(t,r));let o=this.Ir.get(t);o===void 0&&(o=ne(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var uh=class{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var Ks=class{constructor(){this.Tr=new Ye(Pe.Er),this.dr=new Ye(Pe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Pe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Pe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new G(new _e([])),r=new Pe(t,e),i=new Pe(t,e+1),o=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new G(new _e([])),r=new Pe(t,e),i=new Pe(t,e+1),o=ne();return this.dr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new Pe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Pe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return G.comparator(e.key,t.key)||oe(e.wr,t.wr)}static Ar(e,t){return oe(e.wr,t.wr)||G.comparator(e.key,t.key)}};var lh=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ye(Pe.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new zl(o,t,r,i);this.mutationQueue.push(a);for(let h of i)this.br=this.br.add(new Pe(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return V.resolve(a)}lookupMutationBatch(e,t){return V.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Pe(t,0),i=new Pe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],a=>{let h=this.Dr(a.wr);o.push(h)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ye(oe);return t.forEach(i=>{let o=new Pe(i,0),a=new Pe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],h=>{r=r.add(h.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let a=new Pe(new G(o),0),h=new Ye(oe);return this.br.forEachWhile(p=>{let m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(p.wr)),!0)},a),V.resolve(this.Cr(h))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){fe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(t.mutations,i=>{let o=new Pe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Pe(t,0),i=this.br.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var hh=class{constructor(e){this.Mr=e,this.docs=function(){return new Ie(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(t))}getEntries(e,t){let r=hn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():bt.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=hn(),a=t.path,h=new G(a.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){let{key:m,value:{document:_}}=p.getNext();if(!a.isPrefixOf(m.path))break;m.path.length>a.length+1||LI(MI(_),r)<=0||(i.has(_.key)||hc(t,_))&&(o=o.insert(_.key,_.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){H()}Or(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dh(this)}getSize(e){return V.resolve(this.size)}},dh=class extends ih{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var fh=class{constructor(e){this.persistence=e,this.Nr=new er(t=>rd(t),id),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ks,this.targetCount=0,this.kr=Hs.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),V.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Hs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Kn(t),V.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((a,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.Br.containsKey(t))}};var ph=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new um(0),this.Kr=!1,this.Kr=!0,this.$r=new uh,this.referenceDelegate=e(this),this.Ur=new fh(this),this.indexManager=new nh,this.remoteDocumentCache=function(i){return new hh(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new th(t),this.Gr=new ah(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ch,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new lh(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){$("MemoryPersistence","Starting transaction:",e);let i=new mh(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},mh=class extends Sl{constructor(e){super(),this.currentSequenceNumber=e}},gh=class n{constructor(e){this.persistence=e,this.Jr=new Ks,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw H()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),V.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{let i=G.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,J.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return V.or([()=>V.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var yh=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ne(),i=ne();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var wh=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var _h=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return of()?8:UI(Me())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new wh;return this.Xi(e,t,a).next(h=>{if(o.result=h,this.zi)return this.es(e,t,a,h.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ms()<=te.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Ci(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Ms()<=te.DEBUG&&$("QueryEngine","Query:",Ci(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ms()<=te.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Ci(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jt(t))):V.resolve())}Yi(e,t){if(Up(t))return V.resolve(null);let r=jt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ql(t,null,"F"),r=jt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=ne(...o);return this.Ji.getDocuments(e,a).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{let m=this.ts(t,h);return this.ns(t,m,a,p.readTime)?this.Yi(e,ql(t,null,"F")):this.rs(e,m,t,p)}))})))}Zi(e,t,r,i){return Up(t)||i.isEqual(J.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let a=this.ts(t,o);return this.ns(t,a,r,i)?V.resolve(null):(Ms()<=te.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ci(t)),this.rs(e,a,t,VI(i,-1)).next(h=>h))})}ts(e,t){let r=new Ye(Im(e));return t.forEach((i,o)=>{hc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ms()<=te.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Ci(t)),this.Ji.getDocumentsMatchingQuery(e,t,Or.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var vh=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ie(oe),this._s=new er(o=>rd(o),id),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function R0(n,e,t,r){return new vh(n,e,t,r)}function Bm(n,e){return b(this,null,function*(){let t=Q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],h=[],p=ne();for(let m of i){a.push(m.batchId);for(let _ of m.mutations)p=p.add(_.key)}for(let m of o){h.push(m.batchId);for(let _ of m.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(r,p).next(m=>({hs:m,removedBatchIds:a,addedBatchIds:h}))})})})}function k0(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(h,p,m,_){let y=m.batch,k=y.keys(),D=V.resolve();return k.forEach(L=>{D=D.next(()=>_.getEntry(p,L)).next(j=>{let O=m.docVersions.get(L);fe(O!==null),j.version.compareTo(O)<0&&(y.applyToRemoteDocument(j,m),j.isValidDocument()&&(j.setReadTime(m.commitVersion),_.addEntry(j)))})}),D.next(()=>h.mutationQueue.removeMutationBatch(p,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let p=ne();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function qm(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function x0(n,e){let t=Q(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let h=[];e.targetChanges.forEach((_,y)=>{let k=i.get(y);if(!k)return;h.push(t.Ur.removeMatchingKeys(o,_.removedDocuments,y).next(()=>t.Ur.addMatchingKeys(o,_.addedDocuments,y)));let D=k.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?D=D.withResumeToken(Xe.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):_.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(_.resumeToken,r)),i=i.insert(y,D),function(j,O,K){return j.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(k,D,_)&&h.push(t.Ur.updateTargetData(o,D))});let p=hn(),m=ne();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(D0(o,a,e.documentUpdates).next(_=>{p=_.Ps,m=_.Is})),!r.isEqual(J.min())){let _=t.Ur.getLastRemoteSnapshotVersion(o).next(y=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(_)}return V.waitFor(h).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,p,m)).next(()=>p)}).then(o=>(t.os=i,o))}function D0(n,e,t){let r=ne(),i=ne();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=hn();return t.forEach((h,p)=>{let m=o.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(J.min())?(e.removeEntry(h,p.readTime),a=a.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),a=a.insert(h,p)):$("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)}),{Ps:a,Is:i}})}function N0(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function O0(n,e){let t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new Ws(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Ih(n,e,t){return b(this,null,function*(){let r=Q(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!to(a))throw a;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Jp(n,e,t){let r=Q(n),i=J.min(),o=ne();return r.persistence.runTransaction("Execute query","readwrite",a=>function(p,m,_){let y=Q(p),k=y._s.get(_);return k!==void 0?V.resolve(y.os.get(k)):y.Ur.getTargetData(m,_)}(r,a,jt(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,h.targetId).next(p=>{o=p})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:J.min(),t?o:ne())).next(h=>(V0(r,JI(e),h),{documents:h,Ts:o})))}function V0(n,e,t){let r=n.us.get(e)||J.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var $a=class{constructor(){this.activeTargetIds=n0()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Eh=class{constructor(){this.so=new $a,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $a,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var bh=class{_o(e){}shutdown(){}};var za=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Sa=null;function ml(){return Sa===null?Sa=function(){return 268435456+Math.round(2147483648*Math.random())}():Sa++,"0x"+Sa.toString(16)}var M0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Th=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Je="WebChannelConnection",Ah=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,a){let h=ml(),p=this.xo(t,r.toUriEncodedString());$("RestConnection",`Sending RPC '${t}' ${h}:`,p,i);let m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,o,a),this.No(t,p,m,i).then(_=>($("RestConnection",`Received RPC '${t}' ${h}: `,_),_),_=>{throw Ni("RestConnection",`RPC '${t}' ${h} failed with error: `,_,"url: ",p,"request:",i),_})}Lo(t,r,i,o,a,h){return this.Mo(t,r,i,o,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zi}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>t[a]=o),i&&i.headers.forEach((o,a)=>t[a]=o)}xo(t,r){let i=M0[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=ml();return new Promise((a,h)=>{let p=new cl;p.setWithCredentials(!0),p.listenOnce(ll.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Vs.NO_ERROR:let _=p.getResponseJson();$(Je,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),a(_);break;case Vs.TIMEOUT:$(Je,`RPC '${e}' ${o} timed out`),h(new q(N.DEADLINE_EXCEEDED,"Request time out"));break;case Vs.HTTP_ERROR:let y=p.getStatus();if($(Je,`RPC '${e}' ${o} failed with status:`,y,"response text:",p.getResponseText()),y>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);let D=k?.error;if(D&&D.status&&D.message){let L=function(O){let K=O.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(K)>=0?K:N.UNKNOWN}(D.status);h(new q(L,D.message))}else h(new q(N.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new q(N.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{$(Je,`RPC '${e}' ${o} completed.`)}});let m=JSON.stringify(i);$(Je,`RPC '${e}' ${o} sending request:`,i),p.send(t,"POST",m,r,15)})}Bo(e,t,r){let i=ml(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=fl(),h=dl(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.xmlHttpFactory=new ul({})),this.Oo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;let _=o.join("");$(Je,`Creating RPC '${e}' stream ${i}: ${_}`,p);let y=a.createWebChannel(_,p),k=!1,D=!1,L=new Th({Io:O=>{D?$(Je,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(k||($(Je,`Opening RPC '${e}' stream ${i} transport.`),y.open(),k=!0),$(Je,`RPC '${e}' stream ${i} sending:`,O),y.send(O))},To:()=>y.close()}),j=(O,K,Y)=>{O.listen(K,Z=>{try{Y(Z)}catch(le){setTimeout(()=>{throw le},0)}})};return j(y,Si.EventType.OPEN,()=>{D||($(Je,`RPC '${e}' stream ${i} transport opened.`),L.yo())}),j(y,Si.EventType.CLOSE,()=>{D||(D=!0,$(Je,`RPC '${e}' stream ${i} transport closed`),L.So())}),j(y,Si.EventType.ERROR,O=>{D||(D=!0,Ni(Je,`RPC '${e}' stream ${i} transport errored:`,O),L.So(new q(N.UNAVAILABLE,"The operation could not be completed")))}),j(y,Si.EventType.MESSAGE,O=>{var K;if(!D){let Y=O.data[0];fe(!!Y);let Z=Y,le=Z.error||((K=Z[0])===null||K===void 0?void 0:K.error);if(le){$(Je,`RPC '${e}' stream ${i} received error:`,le);let be=le.status,se=function(I){let T=Ce[I];if(T!==void 0)return Dm(T)}(be),C=le.message;se===void 0&&(se=N.INTERNAL,C="Unknown error status: "+be+" with message "+le.message),D=!0,L.So(new q(se,C)),y.close()}else $(Je,`RPC '${e}' stream ${i} received:`,Y),L.bo(Y)}}),j(h,hl.STAT_EVENT,O=>{O.stat===Ta.PROXY?$(Je,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Ta.NOPROXY&&$(Je,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{L.wo()},0),L}};function gl(){return typeof document<"u"?document:null}function dc(n){return new Jl(n,!0)}var Ga=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Wa=class{constructor(e,t,r,i,o,a,h,p){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ga(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(un(t.toString()),un("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new q(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Sh=class extends Wa{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=y0(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?J.min():a.readTime?$t(a.readTime):J.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=eh(this.serializer),t.addTarget=function(o,a){let h,p=a.target;if(h=Ul(p)?{documents:v0(o,p)}:{query:I0(o,p)._t},h.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){h.resumeToken=Nm(o,a.resumeToken);let m=Yl(o,a.expectedCount);m!==null&&(h.expectedCount=m)}else if(a.snapshotVersion.compareTo(J.min())>0){h.readTime=qa(o,a.snapshotVersion.toTimestamp());let m=Yl(o,a.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);let r=b0(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=eh(this.serializer),t.removeTarget=e,this.a_(t)}},Ch=class extends Wa{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=_0(e.writeResults,e.commitTime),r=$t(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=eh(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>w0(this.serializer,r))};this.a_(t)}};var Ph=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new q(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Xl(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(N.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,h])=>this.connection.Lo(e,Xl(t,r),i,a,h,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new q(N.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Rh=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(un(t),this.D_=!1):$("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var kh=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(()=>b(this,null,function*(){qr(this)&&($("RemoteStore","Restarting streams for network reachability change."),yield function(p){return b(this,null,function*(){let m=Q(p);m.L_.add(4),yield no(m),m.q_.set("Unknown"),m.L_.delete(4),yield fc(m)})}(this))}))}),this.q_=new Rh(r,i)}};function fc(n){return b(this,null,function*(){if(qr(n))for(let e of n.B_)yield e(!0)})}function no(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function jm(n,e){let t=Q(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ld(t)?ud(t):Wi(t).r_()&&cd(t,e))}function ad(n,e){let t=Q(n),r=Wi(t);t.N_.delete(e),r.r_()&&$m(t,e),t.N_.size===0&&(r.r_()?r.o_():qr(t)&&t.q_.set("Unknown"))}function cd(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wi(n).A_(e)}function $m(n,e){n.Q_.xe(e),Wi(n).R_(e)}function ud(n){n.Q_=new Ql({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Wi(n).start(),n.q_.v_()}function ld(n){return qr(n)&&!Wi(n).n_()&&n.N_.size>0}function qr(n){return Q(n).L_.size===0}function zm(n){n.Q_=void 0}function L0(n){return b(this,null,function*(){n.q_.set("Online")})}function F0(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{cd(n,e)})})}function U0(n,e){return b(this,null,function*(){zm(n),ld(n)?(n.q_.M_(e),ud(n)):n.q_.set("Unknown")})}function B0(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof Ua&&e.state===2&&e.cause)try{yield function(i,o){return b(this,null,function*(){let a=o.cause;for(let h of o.targetIds)i.N_.has(h)&&(yield i.remoteSyncer.rejectListen(h,a),i.N_.delete(h),i.Q_.removeTarget(h))})}(n,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ha(n,r)}else if(e instanceof xi?n.Q_.Ke(e):e instanceof Fa?n.Q_.He(e):n.Q_.We(e),!t.isEqual(J.min()))try{let r=yield qm(n.localStore);t.compareTo(r)>=0&&(yield function(o,a){let h=o.Q_.rt(a);return h.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){let _=o.N_.get(m);_&&o.N_.set(m,_.withResumeToken(p.resumeToken,a))}}),h.targetMismatches.forEach((p,m)=>{let _=o.N_.get(p);if(!_)return;o.N_.set(p,_.withResumeToken(Xe.EMPTY_BYTE_STRING,_.snapshotVersion)),$m(o,p);let y=new Ws(_.target,p,m,_.sequenceNumber);cd(o,y)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){$("RemoteStore","Failed to raise snapshot:",r),yield Ha(n,r)}})}function Ha(n,e,t){return b(this,null,function*(){if(!to(e))throw e;n.L_.add(1),yield no(n),n.q_.set("Offline"),t||(t=()=>qm(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){$("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield fc(n)}))})}function Gm(n,e){return e().catch(t=>Ha(n,t,e))}function pc(n){return b(this,null,function*(){let e=Q(n),t=tr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;q0(e);)try{let i=yield N0(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,j0(e,i)}catch(i){yield Ha(e,i)}Wm(e)&&Hm(e)})}function q0(n){return qr(n)&&n.O_.length<10}function j0(n,e){n.O_.push(e);let t=tr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Wm(n){return qr(n)&&!tr(n).n_()&&n.O_.length>0}function Hm(n){tr(n).start()}function $0(n){return b(this,null,function*(){tr(n).p_()})}function z0(n){return b(this,null,function*(){let e=tr(n);for(let t of n.O_)e.m_(t.mutations)})}function G0(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=Gl.from(r,e,t);yield Gm(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield pc(n)})}function W0(n,e){return b(this,null,function*(){e&&tr(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(a){return u0(a)&&a!==N.ABORTED}(i.code)){let o=r.O_.shift();tr(r).s_(),yield Gm(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield pc(r)}})}(n,e)),Wm(n)&&Hm(n)})}function Yp(n,e){return b(this,null,function*(){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");let r=qr(t);t.L_.add(3),yield no(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield fc(t)})}function H0(n,e){return b(this,null,function*(){let t=Q(n);e?(t.L_.delete(2),yield fc(t)):e||(t.L_.add(2),yield no(t),t.q_.set("Unknown"))})}function Wi(n){return n.K_||(n.K_=function(t,r,i){let o=Q(t);return o.w_(),new Sh(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:L0.bind(null,n),Ro:F0.bind(null,n),mo:U0.bind(null,n),d_:B0.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),ld(n)?ud(n):n.q_.set("Unknown")):(yield n.K_.stop(),zm(n))}))),n.K_}function tr(n){return n.U_||(n.U_=function(t,r,i){let o=Q(t);return o.w_(),new Ch(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$0.bind(null,n),mo:W0.bind(null,n),f_:z0.bind(null,n),g_:G0.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield pc(n)):(yield n.U_.stop(),n.O_.length>0&&($("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var xh=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Bt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,h=new n(e,t,a,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function hd(n,e){if(un("AsyncQueue",`${e}: ${n}`),to(n))return new q(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Ka=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||G.comparator(t.key,r.key):(t,r)=>G.comparator(t.key,r.key),this.keyedMap=Ls(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Qa=class{constructor(){this.W_=new Ie(G.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):H():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ji=class n{constructor(e,t,r,i,o,a,h,p,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,o){let a=[];return t.forEach(h=>{a.push({type:0,doc:h})}),new n(e,t,Ka.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Dh=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Nh=class{constructor(){this.queries=Xp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Q(t),o=i.queries;i.queries=Xp(),o.forEach((a,h)=>{for(let p of h.j_)p.onError(r)})})(this,new q(N.ABORTED,"Firestore shutting down"))}};function Xp(){return new er(n=>vm(n),lc)}function Km(n,e){return b(this,null,function*(){let t=Q(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Dh,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let h=hd(a,`Initialization of query '${Ci(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&dd(t)})}function Qm(n,e){return b(this,null,function*(){let t=Q(n),r=e.query,i=3,o=t.queries.get(r);if(o){let a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function K0(n,e){let t=Q(n),r=!1;for(let i of e){let o=i.query,a=t.queries.get(o);if(a){for(let h of a.j_)h.X_(i)&&(r=!0);a.z_=i}}r&&dd(t)}function Q0(n,e,t){let r=Q(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function dd(n){n.Y_.forEach(e=>{e.next()})}var Oh,Zp;(Zp=Oh||(Oh={})).ea="default",Zp.Cache="cache";var Ja=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ji(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ji.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Oh.Cache}};var Ya=class{constructor(e){this.key=e}},Xa=class{constructor(e){this.key=e}},Vh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=Im(e),this.Ra=new Ka(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Qa,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,a=i,h=!1,p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,y)=>{let k=i.get(_),D=hc(this.query,y)?y:null,L=!!k&&this.mutatedKeys.has(k.key),j=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations),O=!1;k&&D?k.data.isEqual(D.data)?L!==j&&(r.track({type:3,doc:D}),O=!0):this.ga(k,D)||(r.track({type:2,doc:D}),O=!0,(p&&this.Aa(D,p)>0||m&&this.Aa(D,m)<0)&&(h=!0)):!k&&D?(r.track({type:0,doc:D}),O=!0):k&&!D&&(r.track({type:1,doc:k}),O=!0,(p||m)&&(h=!0)),O&&(D?(a=a.add(D),o=j?o.add(_):o.delete(_)):(a=a.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let _=this.query.limitType==="F"?a.last():a.first();a=a.delete(_.key),o=o.delete(_.key),r.track({type:1,doc:_})}return{Ra:a,fa:r,ns:h,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((_,y)=>function(D,L){let j=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return j(D)-j(L)}(_.type,y.type)||this.Aa(_.doc,y.doc)),this.pa(r),i=i!=null&&i;let h=t&&!i?this.ya():[],p=this.da.size===0&&this.current&&!i?1:0,m=p!==this.Ea;return this.Ea=p,a.length!==0||m?{snapshot:new ji(this.query,e.Ra,o,a,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Qa,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Xa(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Ya(r))}),t}ba(e){this.Ta=e.Ts,this.da=ne();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ji.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Mh=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Lh=class{constructor(e){this.key=e,this.va=!1}},Fh=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new er(h=>vm(h),lc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ie(G.comparator),this.Na=new Map,this.La=new Ks,this.Ba={},this.ka=new Map,this.qa=Hs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function J0(n,e,t=!0){return b(this,null,function*(){let r=tg(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield Jm(r,e,t,!0),i})}function Y0(n,e){return b(this,null,function*(){let t=tg(n);yield Jm(t,e,!0,!1)})}function Jm(n,e,t,r){return b(this,null,function*(){let i=yield O0(n.localStore,jt(e)),o=i.targetId,a=t?n.sharedClientState.addLocalQueryTarget(o):"not-current",h;return r&&(h=yield X0(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&jm(n.remoteStore,i),h})}function X0(n,e,t,r,i){return b(this,null,function*(){n.Ka=(y,k,D)=>function(j,O,K,Y){return b(this,null,function*(){let Z=O.view.ma(K);Z.ns&&(Z=yield Jp(j.localStore,O.query,!1).then(({documents:C})=>O.view.ma(C,Z)));let le=Y&&Y.targetChanges.get(O.targetId),be=Y&&Y.targetMismatches.get(O.targetId)!=null,se=O.view.applyChanges(Z,j.isPrimaryClient,le,be);return tm(j,O.targetId,se.wa),se.snapshot})}(n,y,k,D);let o=yield Jp(n.localStore,e,!0),a=new Vh(e,o.Ts),h=a.ma(o.documents),p=Gs.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=a.applyChanges(h,n.isPrimaryClient,p);tm(n,t,m.wa);let _=new Mh(e,t,a);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot})}function Z0(n,e,t){return b(this,null,function*(){let r=Q(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(a=>!lc(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ih(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ad(r.remoteStore,i.targetId),Uh(r,i.targetId)}).catch(eo))):(Uh(r,i.targetId),yield Ih(r.localStore,i.targetId,!0))})}function eE(n,e){return b(this,null,function*(){let t=Q(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ad(t.remoteStore,r.targetId))})}function tE(n,e,t){return b(this,null,function*(){let r=cE(n);try{let i=yield function(a,h){let p=Q(a),m=$e.now(),_=h.reduce((D,L)=>D.add(L.key),ne()),y,k;return p.persistence.runTransaction("Locally write mutations","readwrite",D=>{let L=hn(),j=ne();return p.cs.getEntries(D,_).next(O=>{L=O,L.forEach((K,Y)=>{Y.isValidDocument()||(j=j.add(K))})}).next(()=>p.localDocuments.getOverlayedDocuments(D,L)).next(O=>{y=O;let K=[];for(let Y of h){let Z=c0(Y,y.get(Y.key).overlayedDocument);Z!=null&&K.push(new dn(Y.key,Z,fm(Z.value.mapValue),Jn.exists(!0)))}return p.mutationQueue.addMutationBatch(D,m,K,h)}).next(O=>{k=O;let K=O.applyToLocalDocumentSet(y,j);return p.documentOverlayCache.saveOverlays(D,O.batchId,K)})}).then(()=>({batchId:k.batchId,changes:bm(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,h,p){let m=a.Ba[a.currentUser.toKey()];m||(m=new Ie(oe)),m=m.insert(h,p),a.Ba[a.currentUser.toKey()]=m}(r,i.batchId,t),yield ro(r,i.changes),yield pc(r.remoteStore)}catch(i){let o=hd(i,"Failed to persist write");t.reject(o)}})}function Ym(n,e){return b(this,null,function*(){let t=Q(n);try{let r=yield x0(t.localStore,e);e.targetChanges.forEach((i,o)=>{let a=t.Na.get(o);a&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?fe(a.va):i.removedDocuments.size>0&&(fe(a.va),a.va=!1))}),yield ro(t,r,e)}catch(r){yield eo(r)}})}function em(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,a)=>{let h=a.view.Z_(e);h.snapshot&&i.push(h.snapshot)}),function(a,h){let p=Q(a);p.onlineState=h;let m=!1;p.queries.forEach((_,y)=>{for(let k of y.j_)k.Z_(h)&&(m=!0)}),m&&dd(p)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nE(n,e,t){return b(this,null,function*(){let r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let a=new Ie(G.comparator);a=a.insert(o,bt.newNoDocument(o,J.min()));let h=ne().add(o),p=new La(J.min(),new Map,new Ie(oe),a,h);yield Ym(r,p),r.Oa=r.Oa.remove(o),r.Na.delete(e),fd(r)}else yield Ih(r.localStore,e,!1).then(()=>Uh(r,e,t)).catch(eo)})}function rE(n,e){return b(this,null,function*(){let t=Q(n),r=e.batch.batchId;try{let i=yield k0(t.localStore,e);Zm(t,r,null),Xm(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ro(t,i)}catch(i){yield eo(i)}})}function iE(n,e,t){return b(this,null,function*(){let r=Q(n);try{let i=yield function(a,h){let p=Q(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return p.mutationQueue.lookupMutationBatch(m,h).next(y=>(fe(y!==null),_=y.keys(),p.mutationQueue.removeMutationBatch(m,y))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,_,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>p.localDocuments.getDocuments(m,_))})}(r.localStore,e);Zm(r,e,t),Xm(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ro(r,i)}catch(i){yield eo(i)}})}function Xm(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Zm(n,e,t){let r=Q(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Uh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||eg(n,r)})}function eg(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ad(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),fd(n))}function tm(n,e,t){for(let r of t)r instanceof Ya?(n.La.addReference(r.key,e),sE(n,r)):r instanceof Xa?($("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||eg(n,r.key)):H()}function sE(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||($("SyncEngine","New document in limbo: "+t),n.xa.add(r),fd(n))}function fd(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new G(_e.fromString(e)),r=n.qa.next();n.Na.set(r,new Lh(t)),n.Oa=n.Oa.insert(t,r),jm(n.remoteStore,new Ws(jt(uc(t.path)),r,"TargetPurposeLimboResolution",um.oe))}}function ro(n,e,t){return b(this,null,function*(){let r=Q(n),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((h,p)=>{a.push(r.Ka(p,e,t).then(m=>{var _;if((m||t)&&r.isPrimaryClient){let y=m?!m.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(p.targetId,y?"current":"not-current")}if(m){i.push(m);let y=yh.Wi(p.targetId,m);o.push(y)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(p,m){return b(this,null,function*(){let _=Q(p);try{yield _.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>V.forEach(m,k=>V.forEach(k.$i,D=>_.persistence.referenceDelegate.addReference(y,k.targetId,D)).next(()=>V.forEach(k.Ui,D=>_.persistence.referenceDelegate.removeReference(y,k.targetId,D)))))}catch(y){if(!to(y))throw y;$("LocalStore","Failed to update sequence numbers: "+y)}for(let y of m){let k=y.targetId;if(!y.fromCache){let D=_.os.get(k),L=D.snapshotVersion,j=D.withLastLimboFreeSnapshotVersion(L);_.os=_.os.insert(k,j)}}})}(r.localStore,o))})}function oE(n,e){return b(this,null,function*(){let t=Q(n);if(!t.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());let r=yield Bm(t.localStore,e);t.currentUser=e,function(o,a){o.ka.forEach(h=>{h.forEach(p=>{p.reject(new q(N.CANCELLED,a))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ro(t,r.hs)}})}function aE(n,e){let t=Q(n),r=t.Na.get(e);if(r&&r.va)return ne().add(r.key);{let i=ne(),o=t.Ma.get(e);if(!o)return i;for(let a of o){let h=t.Fa.get(a);i=i.unionWith(h.view.Va)}return i}}function tg(n){let e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ym.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nE.bind(null,e),e.Ca.d_=K0.bind(null,e.eventManager),e.Ca.$a=Q0.bind(null,e.eventManager),e}function cE(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iE.bind(null,e),e}var Za=class{constructor(){this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){this.serializer=dc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return R0(this.persistence,new _h,e.initialUser,this.serializer)}createPersistence(e){return new ph(gh.Zr,this.serializer)}createSharedClientState(e){return new Eh}terminate(){return b(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Bh=class{initialize(e,t){return b(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>em(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oE.bind(null,this.syncEngine),yield H0(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Nh}()}createDatastore(e){let t=dc(e.databaseInfo.databaseId),r=function(o){return new Ah(o)}(e.databaseInfo);return function(o,a,h,p){return new Ph(o,a,h,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,a,h){return new kh(r,i,o,a,h)}(this.localStore,this.datastore,e.asyncQueue,t=>em(this.syncEngine,t,0),function(){return za.D()?new za:new bh}())}createSyncEngine(e,t){return function(i,o,a,h,p,m,_){let y=new Fh(i,o,a,h,p,m);return _&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return b(this,null,function*(){var e,t;yield function(i){return b(this,null,function*(){let o=Q(i);$("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield no(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var ec=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):un("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var qh=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Le.UNAUTHENTICATED,this.clientId=ka.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>b(this,null,function*(){$("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>($("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Bt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=hd(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function yl(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield Bm(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function nm(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield lE(n);$("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Yp(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Yp(e.remoteStore,i)),n._onlineComponents=e})}function uE(n){return n.name==="FirebaseError"?n.code===N.FAILED_PRECONDITION||n.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function lE(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{yield yl(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!uE(t))throw t;Ni("Error using user provided cache. Falling back to memory cache: "+t),yield yl(n,new Za)}}else $("FirestoreClient","Using default OfflineComponentProvider"),yield yl(n,new Za);return n._offlineComponents})}function ng(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),yield nm(n,n._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),yield nm(n,new Bh))),n._onlineComponents})}function hE(n){return ng(n).then(e=>e.syncEngine)}function jh(n){return b(this,null,function*(){let e=yield ng(n),t=e.eventManager;return t.onListen=J0.bind(null,e.syncEngine),t.onUnlisten=Z0.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Y0.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eE.bind(null,e.syncEngine),t})}function dE(n,e,t={}){let r=new Bt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(o,a,h,p,m){let _=new ec({next:k=>{a.enqueueAndForget(()=>Qm(o,y));let D=k.docs.has(h);!D&&k.fromCache?m.reject(new q(N.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&k.fromCache&&p&&p.source==="server"?m.reject(new q(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(k)},error:k=>m.reject(k)}),y=new Ja(uc(h.path),_,{includeMetadataChanges:!0,_a:!0});return Km(o,y)}(yield jh(n),n.asyncQueue,e,t,r)})),r.promise}function rg(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var rm=new Map;function ig(n,e,t){if(!t)throw new q(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fE(n,e,t,r){if(e===!0&&r===!0)throw new q(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function im(n){if(!G.isDocumentKey(n))throw new q(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sm(n){if(G.isDocumentKey(n))throw new q(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":H()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new q(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=mc(n);throw new q(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var tc=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rg((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$i=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tc(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wl;switch(r.type){case"firstParty":return new El(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=rm.get(t);r&&($("ComponentProvider","Removing Datastore"),rm.delete(t),r.terminate())}(this),Promise.resolve()}};function sg(n,e,t,r={}){var i;let o=(n=cn(n,$i))._getSettings(),a=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Le.MOCK_USER;else{h=ef(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new q(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Le(m)}n._authCredentials=new _l(new Ra(h,p))}}var Br=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},et=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Yn=class n extends Br{constructor(e,t,r){super(e,t,uc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new G(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function og(n,e,...t){if(n=qe(n),ig("collection","path",e),n instanceof $i){let r=_e.fromString(e,...t);return sm(r),new Yn(n,null,r)}{if(!(n instanceof et||n instanceof Yn))throw new q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_e.fromString(e,...t));return sm(r),new Yn(n.firestore,null,r)}}function pd(n,e,...t){if(n=qe(n),arguments.length===1&&(e=ka.newId()),ig("doc","path",e),n instanceof $i){let r=_e.fromString(e,...t);return im(r),new et(n,null,new G(r))}{if(!(n instanceof et||n instanceof Yn))throw new q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_e.fromString(e,...t));return im(r),new et(n.firestore,n instanceof Yn?n.converter:null,new G(r))}}var $h=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Ga(this,"async_queue_retry"),this.Eu=()=>{let t=gl();t&&$("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=gl();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=gl();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new Bt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return b(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!to(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(a){let h=a.message||"";return a.stack&&(h=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),h}(r);throw un("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=xh.createAndSchedule(this,e,t,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&H()}verifyOperationInProgress(){}mu(){return b(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function om(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var nr=class extends $i{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new $h}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cg(this),this._firestoreClient.terminate()}};function ag(n,e){let t=typeof n=="object"?n:vi(),r=typeof n=="string"?n:e||"(default)",i=Ts(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Zd("firestore");o&&sg(i,...o)}return i}function md(n){return n._firestoreClient||cg(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function cg(n){var e,t,r;let i=n._freezeSettings(),o=function(h,p,m,_){return new Cl(h,p,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,rg(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new qh(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Qs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Xe.fromBase64String(e))}catch(t){throw new q(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Js=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new q(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var nc=class{constructor(e){this._methodName=e}};var Ys=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new q(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new q(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var Xs=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var pE=/^__.*__$/,zh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new dn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ur(e,this.data,t,this.fieldTransforms)}};function ug(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}var Gh=class n{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return rc(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(ug(this.wu)&&pE.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Wh=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||dc(e)}Nu(e,t,r,i=!1){return new Gh({wu:e,methodName:t,Ou:r,path:ot.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function gd(n){let e=n._freezeSettings(),t=dc(n._databaseId);return new Wh(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lg(n,e,t,r,i,o={}){let a=n.Nu(o.merge||o.mergeFields?2:0,e,t,i);fg("Data must be an object, but it was:",a,r);let h=hg(r,a),p,m;if(o.merge)p=new Ut(a.fieldMask),m=a.fieldTransforms;else if(o.mergeFields){let _=[];for(let y of o.mergeFields){let k=gE(e,y,t);if(!a.contains(k))throw new q(N.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);wE(_,k)||_.push(k)}p=new Ut(_),m=a.fieldTransforms.filter(y=>p.covers(y.field))}else p=null,m=a.fieldTransforms;return new zh(new Et(h),p,m)}function mE(n,e,t,r=!1){return yd(t,n.Nu(r?4:3,e))}function yd(n,e){if(dg(n=qe(n)))return fg("Unsupported field value:",e,n),hg(n,e);if(n instanceof nc)return function(r,i){if(!ug(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],a=0;for(let h of r){let p=yd(h,i.Fu(a));p==null&&(p={nullValue:"NULL_VALUE"}),o.push(p),a++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return r0(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=$e.fromDate(r);return{timestampValue:qa(i.serializer,o)}}if(r instanceof $e){let o=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qa(i.serializer,o)}}if(r instanceof Ys)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qs)return{bytesValue:Nm(i.serializer,r._byteString)};if(r instanceof et){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:od(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xs)return function(a,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(p=>{if(typeof p!="number")throw h.Mu("VectorValues must only contain numeric values.");return sd(h.serializer,p)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${mc(r)}`)}(n,e)}function hg(n,e){let t={};return lm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(n,(r,i)=>{let o=yd(i,e.bu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function dg(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $e||n instanceof Ys||n instanceof Qs||n instanceof et||n instanceof nc||n instanceof Xs)}function fg(n,e,t){if(!dg(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=mc(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function gE(n,e,t){if((e=qe(e))instanceof Js)return e._internalPath;if(typeof e=="string")return pg(n,e);throw rc("Field path arguments must be of type string or ",n,!1,void 0,t)}var yE=new RegExp("[~\\*/\\[\\]]");function pg(n,e,t){if(e.search(yE)>=0)throw rc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Js(...e.split("."))._internalPath}catch{throw rc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rc(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(o||a)&&(p+=" (found",o&&(p+=` in field ${r}`),a&&(p+=` in document ${i}`),p+=")"),new q(N.INVALID_ARGUMENT,h+n+p)}function wE(n,e){return n.some(t=>t.isEqual(e))}var ic=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Hh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(wd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Hh=class extends ic{data(){return super.data()}};function wd(n,e){return typeof e=="string"?pg(n,e):e instanceof Js?e._internalPath:e._delegate._internalPath}function _E(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new q(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Zs=class{},sc=class extends Zs{};function mg(n,e,...t){let r=[];e instanceof Zs&&r.push(e),r=r.concat(t),function(o){let a=o.filter(p=>p instanceof Qh).length,h=o.filter(p=>p instanceof Kh).length;if(a>1||a>0&&h>0)throw new q(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Kh=class n extends sc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return yg(e._query,t),new Br(e.firestore,e.converter,Bl(e._query,t))}_parse(e){let t=gd(e.firestore);return function(o,a,h,p,m,_,y){let k;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new q(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){cm(y,_);let D=[];for(let L of y)D.push(am(p,o,L));k={arrayValue:{values:D}}}else k=am(p,o,y)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||cm(y,_),k=mE(h,a,y,_==="in"||_==="not-in");return Re.create(m,_,k)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var Qh=class n extends Zs{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Tt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let a=i,h=o.getFlattenedFilters();for(let p of h)yg(a,p),a=Bl(a,p)}(e._query,t),new Br(e.firestore,e.converter,Bl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Jh=class n extends sc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,a){if(i.startAt!==null)throw new q(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mr(o,a)}(e._query,this._field,this._direction);return new Br(e.firestore,e.converter,function(i,o){let a=i.explicitOrderBy.concat([o]);return new Zn(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function gg(n,e="asc"){let t=e,r=wd("orderBy",n);return Jh._create(r,t)}function am(n,e,t){if(typeof(t=qe(t))=="string"){if(t==="")throw new q(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_m(e)&&t.indexOf("/")!==-1)throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(_e.fromString(t));if(!G.isDocumentKey(r))throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Np(n,new G(r))}if(t instanceof et)return Np(n,t._key);throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mc(t)}.`)}function cm(n,e){if(!Array.isArray(n)||n.length===0)throw new q(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yg(n,e){let t=function(i,o){for(let a of i)for(let h of a.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new q(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Yh=class{convertValue(e,t="none"){switch(Vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw H()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Gi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>ge(a.doubleValue));return new Xs(o)}convertGeoPoint(e){return new Ys(ge(e.latitude),ge(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=td(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($s(e));default:return null}}convertTimestamp(e){let t=ln(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=_e.fromString(e);fe(Um(r));let i=new Oa(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(t)||un(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function wg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Dr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},oc=class extends ic{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Di(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(wd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Di=class extends oc{data(e={}){return super.data(e)}},Xh=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Dr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Di(this._firestore,this._userDataWriter,r.key,r,new Dr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new q(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(h=>{let p=new Di(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Dr(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{let p=new Di(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Dr(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter),m=-1,_=-1;return h.type!==0&&(m=a.indexOf(h.doc.key),a=a.delete(h.doc.key)),h.type!==1&&(a=a.add(h.doc),_=a.indexOf(h.doc.key)),{type:vE(h.type),doc:p,oldIndex:m,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function vE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function _g(n){n=cn(n,et);let e=cn(n.firestore,nr);return dE(md(e),n._key).then(t=>bg(e,n,t))}var ac=class extends Yh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}};function vg(n,e,t){n=cn(n,et);let r=cn(n.firestore,nr),i=wg(n.converter,e,t);return Eg(r,[lg(gd(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Jn.none())])}function Ig(n,e){let t=cn(n.firestore,nr),r=pd(n),i=wg(n.converter,e);return Eg(t,[lg(gd(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}function _d(n,...e){var t,r,i;n=qe(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||om(e[a])||(o=e[a],a++);let h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(om(e[a])){let y=e[a];e[a]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let p,m,_;if(n instanceof et)m=cn(n.firestore,nr),_=uc(n._key.path),p={next:y=>{e[a]&&e[a](bg(m,n,y))},error:e[a+1],complete:e[a+2]};else{let y=cn(n,Br);m=cn(y.firestore,nr),_=y._query;let k=new ac(m);p={next:D=>{e[a]&&e[a](new Xh(m,k,y,D))},error:e[a+1],complete:e[a+2]},_E(n._query)}return function(k,D,L,j){let O=new ec(j),K=new Ja(D,O,L);return k.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return Km(yield jh(k),K)})),()=>{O.za(),k.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return Qm(yield jh(k),K)}))}}(md(m),_,h,p)}function Eg(n,e){return function(r,i){let o=new Bt;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return tE(yield hE(r),i,o)})),o.promise}(md(n),e)}function bg(n,e,t){let r=t.docs.get(e._key),i=new ac(n);return new oc(n,i,e._key,r,new Dr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){zi=i})(zn),$n(new lt("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),h=new nr(new vl(r.getProvider("auth-internal")),new Tl(r.getProvider("app-check-internal")),function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new q(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oa(m.options.projectId,_)}(a,i),a);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),De(Rp,"4.7.1",e),De(Rp,"4.7.1","esm2017")})();var gc=function(){return gc=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},gc.apply(this,arguments)};var bE={includeMetadataChanges:!1};function Tg(n,e){return e===void 0&&(e=bE),new ys(function(t){var r=_d(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Ag(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:gc(gc({},r),(t={},t[e.idField]=n.id,t))}function Sg(n){return Tg(n,{includeMetadataChanges:!0}).pipe(ws(function(e){return e.docs}))}function Cg(n,e){return e===void 0&&(e={}),Sg(n).pipe(ws(function(t){return t.map(function(r){return Ag(r,e)})}))}var At=class{constructor(e){return e}},Pg="firestore",vd=class{constructor(){return As(Pg)}};var Id=new ui("angularfire2.firestore-instances");function TE(n,e){let t=ra(Pg,n,e);return t&&new At(t)}function AE(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new At(r)}}var SE={provide:vd,deps:[[new at,Id]]},CE={provide:At,useFactory:TE,deps:[[new at,Id],tn]};function Rg(n,...e){return De("angularfire",Tr.full,"fst"),li([CE,SE,{provide:Id,useFactory:AE(n),multi:!0,deps:[Vn,hi,bi,Ar,[new at,Os],[new at,Ei],...e]}])}var kg=je(Cg,!0);var yc=je(Ig,!0);var wc=je(og,!0);var Ed=je(pd,!0);var xg=je(_g,!0);var Dg=je(ag,!0);var Ng=je(gg,!0);var Og=je(mg,!0);var Vg=je(vg,!0);var vc=xy(Mg());var _c=class n{constructor(e){this.firestore=e}saveDoc(e,t,r){let i=Ed(this.firestore,`${t}/${r}`);return Vg(i,e)}getById(e,t){return b(this,null,function*(){let r=Ed(this.firestore,`${t}/${e}`),i=yield xg(r);if(i.exists())return i.data();throw new Error("Documento no encontrado")})}static \u0275fac=function(t){return new(t||n)(wt(At))};static \u0275prov=On({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wt=class n{constructor(e,t,r,i){this.auth=e;this.firestore=t;this.router=r;this.storage=i}isLoggedIn=!1;usuario;get getUser(){return this.usuario}singIn(e,t){Tp(this.auth,e,t).then(r=>b(this,null,function*(){this.isLoggedIn=!0,yield this.storage.getById(r.user?.uid,"usuarios").then(o=>{this.usuario=o,console.log("usuario",this.usuario)}).catch(o=>{console.log(o)});let i=wc(this.firestore,"logs");yc(i,{fechaInicio:new Date,usuario:e}),vc.default.fire({position:"center",icon:"success",title:"Logged In Succesfully"}),this.router.navigate(["/home"])})).catch(r=>vc.default.fire({position:"center",icon:"error",title:"Datos Invalidos",showConfirmButton:!1,timer:1500}))}register(e,t){Ep(this.auth,e,t).then(r=>{this.storage.saveDoc({uid:r.user?.uid,email:e,isAdmin:!1},"usuarios",r.user?.uid),this.singIn(e,t)}).catch(r=>{var i;switch(r.code){case"auth/invalid-email":i="Email invalido";break;case"auth/email-already-in-use":i="El email ya esta en uso";break;case"auth/weak-password":i="La contrase\xF1a es muy debil";break;default:i=r.code;break}vc.default.fire({position:"center",icon:"error",title:i,showConfirmButton:!1,timer:1500})})}static \u0275fac=function(t){return new(t||n)(wt(on),wt(At),wt(Hd),wt(_c))};static \u0275prov=On({token:n,factory:n.\u0275fac,providedIn:"root"})};function RE(n,e){if(n&1&&(F(0,"div",9),z(1),B()),n&2){let t=Qe();ae(),Mn(" ",t.msjError," ")}}var Ec=class n{constructor(e){this.auth=e}email;password;usuarioLogueado;msjError="";accesoRapido(){this.password="test@test.com",this.email="test@test.com"}login(){this.auth.singIn(this.email,this.password)}static \u0275fac=function(t){return new(t||n)(_t(Wt))};static \u0275cmp=ct({type:n,selectors:[["app-login"]],standalone:!0,features:[ut],decls:16,vars:3,consts:[[1,"form-signin"],[1,"h3","mb-3","font-weight-normal"],["for","inputEmail",1,"sr-only"],["type","email","id","inputEmail","name","email","placeholder","Email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","inputPassword",1,"sr-only"],["type","password","id","inputPassword","name","password","placeholder","Password","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"btn","btn-lg","btn-secondary","btn-block",3,"click"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"]],template:function(t,r){t&1&&(F(0,"form",0)(1,"h1",1),z(2,"Inicia sesion"),B(),F(3,"label",2),z(4,"Email"),B(),F(5,"input",3),Un("ngModelChange",function(o){return Fn(r.email,o)||(r.email=o),o}),B(),xe(6,"br"),F(7,"label",4),z(8,"Password"),B(),F(9,"input",5),Un("ngModelChange",function(o){return Fn(r.password,o)||(r.password=o),o}),B(),F(10,"button",6),vt("click",function(){return r.login()}),z(11,"Ingresar"),B(),F(12,"button",7),vt("click",function(){return r.accesoRapido()}),z(13,"Acceso Rapido"),B(),Ke(14,RE,2,1,"div",8),xe(15,"br"),B()),t&2&&(ae(5),Ln("ngModel",r.email),ae(4),Ln("ngModel",r.password),ae(5),we("ngIf",r.msjError))},dependencies:[yi,Qo,pi,mi,Ho,Jo,gi,Ko,Bn],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding-top:40px;padding-bottom:40px}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:40px 40px 40px 38%;background-color:#f0f0f0}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}form[_ngcontent-%COMP%]{border:1px solid #ccc;box-shadow:0 10px 25px #0000001a;padding:20px;margin-bottom:20px}.alert-danger[_ngcontent-%COMP%]{margin:20px 20px 0;text-align:center}"]})};var bc=class n{constructor(e){this.firestore=e;this.referenciaAlaColeccion=wc(this.firestore,this.rutaDeLaColeccion)}rutaDeLaColeccion="mensajes";referenciaAlaColeccion;createMensaje(e){return b(this,null,function*(){yield yc(this.referenciaAlaColeccion,{usuario:e.usuario,hora:e.hora,mensaje:e.mensaje})})}getMensajes(){let e=Og(this.referenciaAlaColeccion,Ng("hora"));return kg(e)}getSortedMensajes(){return this.getMensajes().pipe(ws(e=>e.sort((t,r)=>r.hora.localeCompare(t.hora))))}static \u0275fac=function(t){return new(t||n)(wt(At))};static \u0275prov=On({token:n,factory:n.\u0275fac,providedIn:"root"})};var xE=(n,e)=>({"mensaje-usuario":n,"mensaje-otro":e});function DE(n,e){if(n&1&&(F(0,"span",15),z(1),B()),n&2){let t=Qe().$implicit;ae(),Mn(" ",t.usuario.email,": ")}}function NE(n,e){if(n&1&&(F(0,"div",12),Ke(1,DE,2,1,"span",13),F(2,"span",14),z(3),B(),xe(4,"br"),F(5,"span"),z(6),B()()),n&2){let t=e.$implicit,r=Qe(3);we("ngClass",_s(4,xE,(t.usuario==null?null:t.usuario.email)===(r.authService.getUser==null?null:r.authService.getUser.email),(t.usuario==null?null:t.usuario.email)!==(r.authService.getUser==null?null:r.authService.getUser.email))),ae(),we("ngIf",(t.usuario==null?null:t.usuario.email)!==(r.authService.getUser==null?null:r.authService.getUser.email)),ae(2),Mn(" ",t.hora,""),ae(3),Mn(" ",t.mensaje,"")}}function OE(n,e){if(n&1&&(F(0,"div",10),Ke(1,NE,7,7,"div",11),B()),n&2){let t=Qe(2);ae(),we("ngForOf",t.mensajes)}}function VE(n,e){if(n&1){let t=di();F(0,"div",1)(1,"h1"),z(2,"Chat"),B(),F(3,"div",2),Ke(4,OE,2,1,"div",3),B(),F(5,"div",4)(6,"div",5)(7,"div",6)(8,"input",7),Un("ngModelChange",function(i){_r(t);let o=Qe();return Fn(o.mensaje,i)||(o.mensaje=i),vr(i)}),B()(),F(9,"div",8)(10,"button",9),vt("click",function(){_r(t);let i=Qe();return vr(i.enviarMensaje())}),z(11,"Enviar"),B()()()()()}if(n&2){let t=Qe();ae(4),we("ngIf",t.mensajes&&t.mensajes.length),ae(4),Ln("ngModel",t.mensaje)}}var Tc=class n{constructor(e,t){this.chat=e;this.auth=t;this.chatService=e,this.authService=t,this.chat.getMensajes().subscribe(r=>this.mensajes=r)}chatService;authService;mensaje;mensajes=[];enviarMensaje(){if(!this.mensaje)return;let r={usuario:this.authService.getUser,hora:new Date().toLocaleString(),mensaje:this.mensaje};this.chatService.createMensaje(r).then(()=>{this.mensajes.push(r),this.mensaje=""})}ngOnInit(){}static \u0275fac=function(t){return new(t||n)(_t(bc),_t(Wt))};static \u0275cmp=ct({type:n,selectors:[["app-chat"]],standalone:!0,features:[ut],decls:1,vars:1,consts:[["class","shadow rounded p-5 bg-chat",4,"ngIf"],[1,"shadow","rounded","p-5","bg-chat"],[1,"mensajes","py-1","border","border-info"],["class","mt-4",4,"ngIf"],[1,"display-flex","flex-direction-row","my-4","p-3"],[1,"row"],[1,"col-8"],["type","text","placeholder","Escribe un mensaje...",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-4"],[1,"btn","btn-primary","w-100",3,"click"],[1,"mt-4"],["class","border my-2 rounded shadow-sm px-5 py-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"border","my-2","rounded","shadow-sm","px-5","py-2",3,"ngClass"],["class","text-user",4,"ngIf"],[1,"ml-3","text-muted"],[1,"text-user"]],template:function(t,r){t&1&&Ke(0,VE,12,2,"div",0),t&2&&we("ngIf",r.authService.isLoggedIn)},dependencies:[fi,zo,$d,Bn,yi,pi,mi,gi],styles:[".mensajes[_ngcontent-%COMP%]{min-height:200px;max-height:400px;overflow-y:auto;scrollbar-width:none;background:#ddf9ff;background:linear-gradient(180deg,#ddf9ff,#cdcdff);border-radius:10px}.text-user[_ngcontent-%COMP%]{color:#3c4cca}.form-control[_ngcontent-%COMP%]{background:#ddf9ff;background:linear-gradient(180deg,#ddf9ff,#cdcdff)}.bg-chat[_ngcontent-%COMP%]{background:#aee0eb;background:linear-gradient(180deg,#aee0eb,#4444a3)}.mensaje-usuario[_ngcontent-%COMP%]{margin-left:auto;text-align:right}.mensaje-otro[_ngcontent-%COMP%]{margin-right:auto;text-align:left}"]})};var ME=(n,e)=>({"chat-on":n,"chat-container":e}),LE=(n,e)=>({"btn-chat-on":n,"btn-chat-off":e});function FE(n,e){n&1&&(F(0,"a",18),z(1,"Jugar"),B())}function UE(n,e){n&1&&(F(0,"a",19),z(1,"Jugar"),B())}function BE(n,e){n&1&&(F(0,"a",20),z(1,"Jugar"),B())}function qE(n,e){n&1&&(F(0,"a",21),z(1,"Jugar"),B())}function jE(n,e){if(n&1&&(F(0,"div",4)(1,"div",5),xe(2,"img",6),F(3,"div",7)(4,"h5",8),z(5,"AHORCADO"),B(),F(6,"p",9),z(7,"El ahorcado es un juego donde los jugadores adivinan una palabra letra por letra. Deben hacerlo antes de que se complete el dibujo del ahorcado, que avanza con cada error."),B(),F(8,"div",10),Ke(9,FE,2,0,"a",11),B()()(),F(10,"div",5),xe(11,"img",12),F(12,"div",7)(13,"h5",8),z(14,"PREGUNTADOS"),B(),F(15,"p",9),z(16,"Preguntados es un juego de trivia en el que los jugadores deben acertar la mayor cantidad de respuestas sobre POKEMON "),B(),F(17,"div",10),Ke(18,UE,2,0,"a",13),B()()(),F(19,"div",5),xe(20,"img",14),F(21,"div",7)(22,"h5",8),z(23,"MAYOR O MENOR"),B(),F(24,"p",9),z(25,"Mayor o Menor es un sencillo y emocionante juego de cartas en el que los jugadores deben adivinar si la siguiente carta ser\xE1 mayor o menor que la carta actual."),B(),F(26,"div",10),Ke(27,BE,2,0,"a",15),B()()(),F(28,"div",5),xe(29,"img",16),F(30,"div",7)(31,"h5",8),z(32,"Juego???"),B(),F(33,"p",9),z(34,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ratione, vitae illum mollitia sunt eum nulla molestias a dolorum, magnam quia ipsa."),B(),F(35,"div",10),Ke(36,qE,2,0,"a",17),B()()()()),n&2){let t=Qe();ae(9),we("ngIf",t.auth.isLoggedIn),ae(9),we("ngIf",t.auth.isLoggedIn),ae(9),we("ngIf",t.auth.isLoggedIn),ae(9),we("ngIf",t.auth.isLoggedIn)}}function $E(n,e){if(n&1){let t=di();F(0,"button",22),vt("click",function(){_r(t);let i=Qe();return vr(i.toggleChat())}),z(1),B()}if(n&2){let t=Qe();we("ngClass",_s(2,LE,t.showChat,!t.showChat)),ae(),Ud(t.buttonText)}}function zE(n,e){n&1&&xe(0,"app-chat",23)}var so=class n{constructor(e){this.auth=e}showChat=!1;buttonText="Mostrar Chat";toggleChat(){this.showChat=!this.showChat,this.buttonText=this.showChat?"X":"Mostrar Chat"}static \u0275fac=function(t){return new(t||n)(_t(Wt))};static \u0275cmp=ct({type:n,selectors:[["app-home"]],standalone:!0,features:[ut],decls:4,vars:7,consts:[["class","contenedor-card",4,"ngIf"],[1,"chat-container",3,"ngClass"],["class","btn btn-primary btn-chat",3,"ngClass","click",4,"ngIf"],["class","chat",4,"ngIf"],[1,"contenedor-card"],[1,"card",2,"width","18rem"],["src","assets/ahorcado.png","alt","...",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card-btn"],["routerLink","../juegos/ahorcado","class","btn btn-primary",4,"ngIf"],["src","assets/pokemon.png","alt","...",1,"card-img-top"],["routerLink","../juegos/preguntados","class","btn btn-primary",4,"ngIf"],["src","assets/cartas.jfif","alt","...",1,"card-img-top"],["routerLink","../juegos/mayoromenor","class","btn btn-primary",4,"ngIf"],["src","...","alt","...",1,"card-img-top"],["class","btn btn-primary",4,"ngIf"],["routerLink","../juegos/ahorcado",1,"btn","btn-primary"],["routerLink","../juegos/preguntados",1,"btn","btn-primary"],["routerLink","../juegos/mayoromenor",1,"btn","btn-primary"],[1,"btn","btn-primary"],[1,"btn","btn-primary","btn-chat",3,"click","ngClass"],[1,"chat"]],template:function(t,r){t&1&&(Ke(0,jE,37,4,"div",0),F(1,"div",1),Ke(2,$E,2,5,"button",2)(3,zE,1,0,"app-chat",3),B()),t&2&&(we("ngIf",!r.showChat),ae(),we("ngClass",_s(4,ME,r.showChat,!r.showChat)),ae(),we("ngIf",r.auth.isLoggedIn),ae(),we("ngIf",r.showChat))},dependencies:[Wo,Go,fi,zo,Bn,Tc],styles:[".contenedor-card[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-evenly;gap:20px;padding:20px;align-items:center}.card[_ngcontent-%COMP%]{border:2px solid #78b1ef;border-radius:10px;overflow:hidden;box-shadow:0 4px 8px #0003;max-height:65vh;min-height:65vh;margin-bottom:5rem;padding:15px;display:flex;flex-direction:column;background:#ddf9ff;background:linear-gradient(180deg,#ddf9ff,#cdcdff)}.card-img-top[_ngcontent-%COMP%]{height:150px;background-size:cover}.card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100%}.card-btn[_ngcontent-%COMP%]{margin-top:auto}.card-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%}.card-title[_ngcontent-%COMP%]{color:#007bff;font-weight:700}.card-text[_ngcontent-%COMP%]{color:#333}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#00408d}.chat-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.btn-chat[_ngcontent-%COMP%]{width:200px;height:50px;z-index:1000;position:absolute}.btn-chat-on[_ngcontent-%COMP%]{width:50px;height:50px;z-index:1000;position:absolute;margin-top:20px;margin-left:90%;font-size:x-large}.chat-on[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.chat[_ngcontent-%COMP%]{width:75%}@media (min-width: 1520px) and (max-width: 1900px){.card[_ngcontent-%COMP%]{max-height:65vh;min-height:65vh}}@media (min-width: 1900px){.card[_ngcontent-%COMP%]{max-height:55vh;min-height:55vh;min-width:350px;max-width:350px;font-size:20px;margin-top:50px}.btn-chat-off[_ngcontent-%COMP%]{margin-top:120px}.chat[_ngcontent-%COMP%]{margin-top:100px}}"]})};var Ac=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ct({type:n,selectors:[["app-quien-soy"]],standalone:!0,features:[ut],decls:31,vars:0,consts:[[1,"centered-container"],[1,"component-container"],[1,"quien-soy-container"],[1,"personal-info"],["src","assets/yo.jpeg","alt","Mi Imagen",1,"profile-image"],[1,"details"],[1,"game-explanation"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),z(4,"Qui\xE9n Soy"),B(),F(5,"div",3),xe(6,"img",4),F(7,"div",5)(8,"h2"),z(9,"Datos Personales"),B(),F(10,"p")(11,"strong"),z(12,"Nombre:"),B(),z(13," Facundo Careri"),B(),F(14,"p")(15,"strong"),z(16,"Edad:"),B(),z(17," 24 a\xF1os"),B(),F(18,"p")(19,"strong"),z(20,"Curso:"),B(),z(21," LAB IV A341"),B(),F(22,"p")(23,"strong"),z(24,"Email:"),B(),z(25," facucareri@gmail.com"),B()()(),F(26,"div",6)(27,"h2"),z(28,"Explicaci\xF3n del Juego"),B(),F(29,"p"),z(30,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptate excepturi expedita fuga illo nulla voluptates reiciendis aliquam iure perferendis quis commodi, cum, debitis laborum corrupti ratione magnam quia ad cumque."),B()()()()())},styles:[".quien-soy-container[_ngcontent-%COMP%]{padding:20px;font-family:Arial,sans-serif;border:2px solid #000;border-radius:8px;box-shadow:0 4px 8px #0003;font-weight:700}.centered-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-image:url(https://images.unsplash.com/photo-1588420343728-7411f4c87441?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxleHBsb3JlLWZlZWR8Mnx8fGVufDB8fHx8fA%3D%3D);background-repeat:no-repeat;background-size:cover}.component-container[_ngcontent-%COMP%]{max-width:800px;width:100%}.component-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#464a50;margin-bottom:20px;border-bottom:2px solid #000;padding-bottom:10px;font-weight:700}.details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .game-explanation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#464a50;border-bottom:2px solid #464a50;padding-bottom:5px;margin-bottom:20px;font-weight:700}.profile-image[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;border:2px solid #000;margin-right:20px}.personal-info[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px;border:2px solid #000;border-radius:8px;padding:10px}.component-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333;margin:10px 0;font-weight:700}.game-explanation[_ngcontent-%COMP%]{border:2px solid #000;border-radius:8px;padding:10px}"]})};var Sc=class n{constructor(e){this.auth=e}email;password;registro(){this.auth.register(this.email,this.password)}static \u0275fac=function(t){return new(t||n)(_t(Wt))};static \u0275cmp=ct({type:n,selectors:[["app-registro"]],standalone:!0,features:[ut],decls:13,vars:2,consts:[[1,"form-signin"],[1,"h3","mb-3","font-weight-normal"],["for","inputEmail",1,"sr-only"],["type","email","id","inputEmail","name","email","placeholder","Email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","inputPassword",1,"sr-only"],["type","password","id","inputPassword","name","password","placeholder","Password","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-lg","btn-primary","btn-block",3,"click"]],template:function(t,r){t&1&&(F(0,"form",0)(1,"h1",1),z(2,"Registro"),B(),F(3,"label",2),z(4,"Email"),B(),F(5,"input",3),Un("ngModelChange",function(o){return Fn(r.email,o)||(r.email=o),o}),B(),xe(6,"br"),F(7,"label",4),z(8,"Password"),B(),F(9,"input",5),Un("ngModelChange",function(o){return Fn(r.password,o)||(r.password=o),o}),B(),xe(10,"br"),F(11,"button",6),vt("click",function(){return r.registro()}),z(12,"Registrar"),B()()),t&2&&(ae(5),Ln("ngModel",r.email),ae(4),Ln("ngModel",r.password))},dependencies:[yi,Qo,pi,mi,Ho,Jo,gi,Ko],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding-top:40px;padding-bottom:40px}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:40px 40px 40px 38%;background-color:#f0f0f0}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}form[_ngcontent-%COMP%]{border:1px solid #ccc;box-shadow:0 10px 25px #0000001a;padding:20px;margin-bottom:20px}.alert-danger[_ngcontent-%COMP%]{text-align:center}"]})};var Bg=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"login",component:Ec},{path:"home",component:so},{path:"quienSoy",component:Ac},{path:"registrar",component:Sc},{path:"juegos",loadChildren:()=>import("./chunk-HTXLXIMG.js").then(n=>n.JuegosModule)},{path:"**",pathMatch:"full",component:so}];var qg={providers:[jd({eventCoalescing:!0}),Kd(Bg),Tf(()=>Af({projectId:"saladejuegos-2a39c",appId:"1:733122896022:web:52aca9a6ffcbc8751b22b7",storageBucket:"saladejuegos-2a39c.appspot.com",apiKey:"AIzaSyA3HIXqwVEPT3LZfePaID4dAb5J4T9vM4g",authDomain:"saladejuegos-2a39c.firebaseapp.com",messagingSenderId:"733122896022"})),Ip(()=>bp()),Rg(()=>Dg()),zd()]};function GE(n,e){if(n&1&&(F(0,"p"),z(1),B()),n&2){let t=Qe();ae(),Mn(" Bienvenido ",t.auth.currentUser.email,"!")}}function WE(n,e){n&1&&(F(0,"a",15),z(1,"Login"),B())}function HE(n,e){n&1&&(F(0,"a",16),z(1,"Registrar"),B())}function KE(n,e){if(n&1){let t=di();F(0,"a",17),vt("click",function(){_r(t);let i=Qe();return vr(i.logOut())}),z(1,"Log Out"),B()}}var Cc=class n{constructor(e){this.auth=e}title="salaDeJuegos";logOut(){Ap(this.auth)}static \u0275fac=function(t){return new(t||n)(_t(on))};static \u0275cmp=ct({type:n,selectors:[["app-root"]],standalone:!0,features:[ut],decls:20,vars:4,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary"],[1,"container-fluid"],[1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page","routerLink","home",1,"nav-link","active"],["routerLink","quienSoy",1,"nav-link"],[1,"session-container"],[4,"ngIf"],["class","btn btn-primary","routerLink","login",4,"ngIf"],["class","btn btn-primary","routerLink","registrar",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["routerLink","login",1,"btn","btn-primary"],["routerLink","registrar",1,"btn","btn-primary"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){t&1&&(F(0,"nav",0)(1,"div",1)(2,"a",2),z(3,"Sala De Juegos"),B(),F(4,"button",3),xe(5,"span",4),B(),F(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),z(10,"Home"),B()(),F(11,"li",7)(12,"a",9),z(13,"Quien Soy?"),B()()()(),F(14,"div",10),Ke(15,GE,2,1,"p",11)(16,WE,2,0,"a",12)(17,HE,2,0,"a",13)(18,KE,2,0,"a",14),B()()(),xe(19,"router-outlet")),t&2&&(ae(15),we("ngIf",r.auth.currentUser),ae(),we("ngIf",!r.auth.currentUser),ae(),we("ngIf",!r.auth.currentUser),ae(),we("ngIf",r.auth.currentUser))},dependencies:[Wd,fi,Bn,Wo,Go,Qd],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;width:100vh}.navbar[_ngcontent-%COMP%]{background-color:#007bff;border-bottom:2px solid #000}.navbar-brand[_ngcontent-%COMP%]{color:#fff;font-weight:700}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fff;margin-right:15px}.navbar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{border-bottom:2px solid #fff}.login-btn[_ngcontent-%COMP%]{margin-left:1}.session-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly;color:#fff;text-align:center}.session-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem}"]})};Gd(Cc,qg).catch(n=>console.error(n));
